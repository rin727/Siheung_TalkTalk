/*! For license information please see main.7594a647.js.LICENSE.txt */
(()=>{var e={730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function ke(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Ee||null!==Se)&&(Ae(),Ie())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,o,s,a,l){Me=!1,Fe=null,Le.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,Et,St,Tt,kt=!1,It=[],Ct=null,At=null,Rt=null,Pt=new Map,Nt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function zt(){kt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Rt&&Ut(Rt)&&(Rt=null),Pt.forEach(jt),Nt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Rt&&Bt(Rt,e),Pt.forEach(t),Nt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Gt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Wt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Mt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(F({},fn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),vn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(yn),bn=on(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(kn),Cn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Sr={};function Tr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var kr=Tr("animationend"),Ir=Tr("animationiteration"),Cr=Tr("animationstart"),Ar=Tr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Rr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Nr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Nr(kr,"onAnimationEnd"),Nr(Ir,"onAnimationIteration"),Nr(Cr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Ir:case Cr:l=vn;break;case Ar:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ne(p,d))&&u.push(Kr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,g=d;g;g=Wr(g))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==h&&Qr(s,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Jn;else if(Hn(a))if(Xn)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(s,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Vn?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Vn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=$t=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Ne(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ne(n,o))&&s.unshift(Kr(n,l,a)):i||null!=(l=Ne(n,o))&&s.push(Kr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var xi=[],Ei=-1;function Si(e){return{current:e}}function Ti(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function ki(e,t){Ei++,xi[Ei]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Ri=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ai),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(o(168));ki(Ci,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ri=Ci.current,ki(Ci,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(Ci),ki(Ci,e)):Ti(Ai),ki(Ai,n)}var Ui=null,ji=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function Vi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Vi),i}finally{wt=t,zi=!1}}return null}var qi=[],Hi=0,Ki=null,Gi=0,Wi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){qi[Hi++]=Gi,qi[Hi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Xi=o+e}else Ji=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Ki;)Ki=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===N&&wo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),io&&$i(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return io&&$i(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),io&&$i(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var w=f(i,g,y.value,c);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(i,g),a=s(w,a,m),null===h?u=w:h.sibling=w,h=w,g=v}if(y.done)return n(i,g),io&&$i(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return io&&$i(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),io&&$i(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&wo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===E?((o=Lc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Oc(s.type,s.key,s.props,null,r.mode,l)).ref=vo(r,o,s),l.return=r,r=l)}return a(r);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uc(s,r.mode,l)).return=r,r=o}return a(r);case N:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(L(s))return m(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var _o=bo(!0),xo=bo(!1),Eo=Si(null),So=null,To=null,ko=null;function Io(){ko=To=So=null}function Co(e){var t=Eo.current;Ti(Eo),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){So=e,ko=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===So)throw Error(o(308));To=e,So.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var No=null;function Do(e){null===No?No=[e]:No.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=s,e.lanes=s,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ko={},Go=Si(Ko),Wo=Si(Ko),Qo=Si(Ko);function Yo(e){if(e===Ko)throw Error(o(174));return e}function Jo(e,t){switch(ki(Qo,t),ki(Wo,e),ki(Go,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Go),ki(Go,t)}function Xo(){Ti(Go),Ti(Wo),Ti(Qo)}function $o(e){Yo(Qo.current);var t=Yo(Go.current),n=le(t,e.type);t!==n&&(ki(Wo,e),ki(Go,n))}function Zo(e){Wo.current===e&&(Ti(Go),Ti(Wo))}var es=Si(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,hs=!1,ds=0,fs=0;function ps(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),hs){s=0;do{if(hs=!1,ds=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(hs)}if(is.current=$s,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ws(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function bs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ss&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,as.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Ml|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Es(){}function Ss(e,t){var n=as,r=ws(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Ms(Is.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ps(9,ks.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(o(349));0!==(30&ss)||Ts(n,t,i)}return i}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ks(e,t,n,r){t.value=n,t.getSnapshot=r,Cs(t)&&As(e)}function Is(e,t,n){return n((function(){Cs(t)&&As(e)}))}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function As(e){var t=Lo(e,1);null!==t&&nc(t,e,1,-1)}function Rs(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ns(){return ws().memoizedState}function Ds(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=ws();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ls(e,t){return Ds(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Fs(e,t){return Os(4,2,e,t)}function Us(e,t){return Os(4,4,e,t)}function js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,js.bind(null,t,e),n)}function Bs(){}function Vs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),as.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ks(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{wt=n,os.transition=r}}function Gs(){return ws().memoizedState}function Ws(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Js(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Qs(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Js(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Do(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Js(e,t){hs=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $s={readContext:Po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ls,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4194308,4,js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Rs,useDebugValue:Bs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=Ks.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Al)throw Error(o(349));0!==(30&ss)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ls(Is.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,ks.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Al.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Vs,useContext:Po,useEffect:Ms,useImperativeHandle:zs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:_s,useRef:Ns,useState:function(){return _s(bs)},useDebugValue:Bs,useDeferredValue:function(e){return Hs(ws(),ls.memoizedState,e)},useTransition:function(){return[_s(bs)[0],ws().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ss,useId:Gs,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Vs,useContext:Po,useEffect:Ms,useImperativeHandle:zs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:xs,useRef:Ns,useState:function(){return xs(bs)},useDebugValue:Bs,useDeferredValue:function(e){var t=ws();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[xs(bs)[0],ws().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ss,useId:Gs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nc(t,e,r,n),Bo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ni(t)?Ri:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ni(t)?Ri:Ci.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),qo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),ha(0,t)},n}function pa(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?xo(t,null,n,r):_o(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ms(e,t,n,r,o,i),n=vs(),null===e||wa?(io&&n&&eo(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Dl,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(Dl,Nl),Nl|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var o=Ni(n)?Ri:Ci.current;return o=Pi(t,o),Ro(t,i),n=ms(e,t,n,r,o,i),r=vs(),null===e||wa?(io&&r&&eo(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(Ni(n)){var o=!0;Mi(t)}else o=!1;if(Ro(t,i),null===t.stateNode)qa(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Ni(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Mo=!1;var d=t.memoizedState;s.state=d,qo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Mo?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Mo||oa(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Ni(n)?Ri:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,s,r,l),Mo=!1,d=t.memoizedState,s.state=d,qo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Mo?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Mo||oa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,o,i)}function Ca(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Ha(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):ba(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Jo(e,t.containerInfo)}function Ra(e,t,n,r,i){return po(),go(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Na,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(s=Lc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),nc(r,e,i,-1))}return gc(),ja(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&go(r),_o(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Ba(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Va(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,o);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ni(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,Xo(),Ti(Ai),Ti(Ci),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Na(e,t),Ga(t),null;case 5:Zo(t);var i=Yo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ga(t),null}if(e=Yo(Go.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":ie(r,s),jr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&jr("scroll",e):null!=u&&w(e,s,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Qo.current),Yo(Go.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ti(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Xo(),Na(e,t),null===e&&Vr(t.stateNode.containerInfo),Ga(t),null;case 10:return Co(t.type._context),Ga(t),null;case 19:if(Ti(es),null===(s=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ka(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ka(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ga(t),null}else 2*Xe()-s.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=es.current,ki(es,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Ni(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Ti(Ai),Ti(Ci),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(es),null;case 4:return Xo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Go.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,dl(e,t,n),Ja=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),we(l,a);var u=we(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,$a=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Sc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$a=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=s,(Ja=l)&&!c)for($a=i;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?xl(i):null!==l?(l.return=s,$a=l):xl(i);for(;null!==o;)$a=o,wl(o,t,n),o=o.sibling;$a=i,Ya=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):bl(e)}}function bl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function _l(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function xl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Sc(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var El,Sl=Math.ceil,Tl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Cl=0,Al=null,Rl=null,Pl=0,Nl=0,Dl=Si(0),Ol=0,Ll=null,Ml=0,Fl=0,Ul=0,jl=null,zl=null,Bl=0,Vl=1/0,ql=null,Hl=!1,Kl=null,Gl=null,Wl=!1,Ql=null,Yl=0,Jl=0,Xl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==$l?$l:$l=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==mo.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Cl)&&e===Al||(e===Al&&(0===(2&Cl)&&(Fl|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Xe()+500,ji&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Al?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),si((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cl;Cl|=2;var s=pc();for(Al===e&&Pl===t||(ql=null,Vl=Xe()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}Io(),Tl.current=s,Cl=i,null!==Rl?t=0:(Al=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,zl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zl,ql),t);break}_c(e,zl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zl,ql),r);break}_c(e,zl,ql);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&sc(t)),e}function sc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(o(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,ql),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Xe()+500,ji&&Vi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&xc();var t=Cl;Cl|=1;var n=Il.transition,r=wt;try{if(Il.transition=null,wt=1,e)return e()}finally{wt=r,Il.transition=n,0===(6&(Cl=t))&&Vi()}}function hc(){Nl=Dl.current,Ti(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Xo(),Ti(Ai),Ti(Ci),rs();break;case 5:Zo(r);break;case 4:Xo();break;case 13:case 19:Ti(es);break;case 10:Co(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Rl=e=Dc(e.current,null),Pl=Nl=t,Ol=0,Ll=null,Ul=Fl=Ml=0,zl=jl=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}No=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Io(),is.current=$s,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,hs=!1,ds=0,kl.current=null,null===n||null===n.return){Ol=1,Ll=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),go(ca(c,l));break e}}s=c=ca(c,l),4!==Ol&&(Ol=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,fa(0,c,t));break e;case 1:l=c;var y=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gl||!Gl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Tl.current;return Tl.current=$s,null===e?$s:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Al||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Al,Pl)}function mc(e,t){var n=Cl;Cl|=2;var r=pc();for(Al===e&&Pl===t||(ql=null,dc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Io(),Cl=n,Tl.current=r,null!==Rl)throw Error(o(261));return Al=null,Pl=0,Ol}function vc(){for(;null!==Rl;)wc(Rl)}function yc(){for(;null!==Rl&&!Ye();)wc(Rl)}function wc(e){var t=El(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Nl)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ol=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=wt,i=Il.transition;try{Il.transition=null,wt=1,function(e,t,n,r){do{xc()}while(null!==Ql);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Al&&(Rl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ac(tt,(function(){return xc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Il.transition,Il.transition=null;var a=wt;wt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Cl=l,wt=a,Il.transition=s}else e.current=n;if(Wl&&(Wl=!1,Ql=e,Yl=i),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),s=e.pendingLanes,0!==(1&s)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Vi()}(e,t,n,r)}finally{Il.transition=i,wt=r}return null}function xc(){if(null!==Ql){var e=bt(Yl),t=Il.transition,n=wt;try{if(Il.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(ol(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$a=y;break e}$a=s.return}}var w=e.current;for($a=w;null!==$a;){var b=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,$a=b;else e:for(a=w;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Sc(l,l.return,x)}if(l===a){$a=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,$a=_;break e}$a=l.return}}if(Cl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{wt=n,Il.transition=t}}return!1}function Ec(e,t,n){e=zo(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=zo(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Xe()-Bl?dc(e,0):Ul|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Lo(e,t))&&(vt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kc(e,n)}function Ac(e,t){return We(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,s,t);case S:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=s,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=s,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=s,e;case D:return Mc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case I:a=9;break e;case C:a=11;break e;case P:a=14;break e;case N:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,s,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function Bc(e){if(!e)return Ii;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Li(e,n,t)}return t}function Vc(e,t,n,r,i,o,s,a,l){return(e=zc(n,r,!0,e,0,o,0,a,l)).context=Bc(null),n=e.current,(o=jo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,s))&&(nc(e,i,s,o),Bo(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),po();break;case 5:$o(t);break;case 1:Ni(t.type)&&Mi(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ro(t,n),i=ms(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),qo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return $o(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ki(Eo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=jo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Po(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ni(r)?(e=!0,Mi(t)):e=!1,Ro(t,n),sa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return Sa(e,t,n)}throw Error(o(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Hc(s);a.call(e)}}qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(s);o.call(e)}}var s=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(s)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(Vl=Xe()+500,Vi()))}break;case 13:uc((function(){var t=Lo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Lo(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));W(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ie,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},D={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,D(x);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(k),k=-1),p=!0;var o=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,T=null,k=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function R(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?E():(S=!1,T=null)}}else S=!1}if("function"===typeof w)E=function(){w(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=R,E=function(){N.postMessage(null)}}else E=function(){v(R,0)};function D(e){T=e,S||(S=!0,E())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(y(k),k=-1):m=!0,O(_,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,D(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".52ca9479.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="siheung-festival-talktalk:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Siheung_TalkTalk/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunksiheung_festival_talktalk=self.webpackChunksiheung_festival_talktalk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>ps,SDK_VERSION:()=>Wa,_DEFAULT_ENTRY_NAME:()=>Pa,_addComponent:()=>Ma,_addOrOverwriteComponent:()=>Fa,_apps:()=>Da,_clearComponents:()=>qa,_components:()=>La,_getProvider:()=>ja,_isFirebaseApp:()=>Ba,_isFirebaseServerApp:()=>Va,_registerComponent:()=>Ua,_removeServiceInstance:()=>za,_serverApps:()=>Oa,deleteApp:()=>$a,getApp:()=>Ja,getApps:()=>Xa,initializeApp:()=>Qa,initializeServerApp:()=>Ya,onLog:()=>el,registerVersion:()=>Za,setLogLevel:()=>tl});var t=n(43),r=n.t(t,2),i=n(391);function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s,a=n(950),l=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,d=null,m=v();function v(){return(a.state||{idx:null}).idx}function y(){l=s.Pop;let e=v(),t=null==e?null:e-m;m=e,d&&d({action:l,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(c({},a.state,{idx:m}),""));let b={get action(){return l},get location(){return e(i,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(u,y),d=e,()=>{i.removeEventListener(u,y),d=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=p(b.location,e,t);n&&n(r,e),m=v()+1;let c=f(r,m),u=b.createHref(r);try{a.pushState(c,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(u)}o&&d&&d({action:l,location:b.location,delta:1})},replace:function(e,t){l=s.Replace;let r=p(b.location,e,t);n&&n(r,e),m=v();let i=f(r,m),c=b.createHref(r);a.replaceState(i,"",c),o&&d&&d({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));const w=new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let o=[...n,i],s="string"===typeof e.id?e.id:o.join("-");if(h(!0!==e.index||!e.children,"Cannot specify children on an index route"),h(!r[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=c({},e,t(e),{id:s});return r[s]=n,n}{let n=c({},e,t(e),{id:s,children:void 0});return r[s]=n,e.children&&(n.children=b(e.children,t,o,r)),n}}))}function _(e,t,n){void 0===n&&(n="/");let r=L(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=O(r);o=N(i[s],e)}return o}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(h(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=z([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=E(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,T=3,k=2,I=1,C=10,A=-2,R=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=A),t&&(r+=k),n.filter((e=>!R(e))).reduce(((e,t)=>e+(S.test(t)?T:""===t?I:C)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:z([i,c.pathname]),pathnameBase:B(z([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=z([i,c.pathnameBase]))}return o}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=F(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function j(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),h(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:q(i)}}(i,o),u=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class H{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],W=new Set(G),Q=["get",...G],Y=new Set(Q),J=new Set([301,302,303,307,308]),X=new Set([307,308]),$={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Z={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ee={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ne=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),re="remix-router-transitions";function ie(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,r=!n;let i;if(h(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;i=e=>({hasErrorBoundary:t(e)})}else i=ne;let o,a,l={},u=b(e.routes,i,void 0,l),f=e.basename||"/",g=e.unstable_dataStrategy||de,m=c({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),v=null,w=new Set,x=null,E=null,S=null,T=null!=e.hydrationData,k=_(u,e.history.location,f),I=null;if(null==k){let t=ke(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=Te(u);k=n,I={[r.id]:t}}let C,A=k.some((e=>e.route.lazy)),R=k.some((e=>e.route.loader));if(A)a=!1;else if(R)if(m.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||("function"!==typeof e.route.loader||!0!==e.route.loader.hydrate)&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id]);if(n){let e=k.findIndex((e=>void 0!==n[e.route.id]));a=k.slice(0,e+1).every(r)}else a=k.every(r)}else a=null!=e.hydrationData;else a=!0;let P,N={historyAction:e.history.action,location:e.history.location,matches:k,initialized:a,navigation:$,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||I,fetchers:new Map,blockers:new Map},D=s.Pop,O=!1,M=!1,F=new Map,U=null,j=!1,z=!1,B=[],V=[],q=new Map,H=0,K=-1,G=new Map,W=new Set,Q=new Map,Y=new Map,J=new Set,ie=new Map,ae=new Map,ce=!1;function ue(e,t){void 0===t&&(t={}),N=c({},N,e);let n=[],r=[];m.v7_fetcherPersist&&N.fetchers.forEach(((e,t)=>{"idle"===e.state&&(J.has(t)?r.push(t):n.push(t))})),[...w].forEach((e=>e(N,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),m.v7_fetcherPersist&&(n.forEach((e=>N.fetchers.delete(e))),r.forEach((e=>Ke(e))))}function he(t,n,r){var i,a;let l,{flushSync:h}=void 0===r?{}:r,d=null!=N.actionData&&null!=N.navigation.formMethod&&Le(N.navigation.formMethod)&&"loading"===N.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);l=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:d?N.actionData:null;let f=n.loaderData?xe(N.loaderData,n.loaderData,n.matches||[],n.errors):N.loaderData,p=N.blockers;p.size>0&&(p=new Map(p),p.forEach(((e,t)=>p.set(t,ee))));let g,m=!0===O||null!=N.navigation.formMethod&&Le(N.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(o&&(u=o,o=void 0),j||D===s.Pop||(D===s.Push?e.history.push(t,t.state):D===s.Replace&&e.history.replace(t,t.state)),D===s.Pop){let e=F.get(N.location.pathname);e&&e.has(t.pathname)?g={currentLocation:N.location,nextLocation:t}:F.has(t.pathname)&&(g={currentLocation:t,nextLocation:N.location})}else if(M){let e=F.get(N.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),F.set(N.location.pathname,e)),g={currentLocation:N.location,nextLocation:t}}ue(c({},n,{actionData:l,loaderData:f,historyAction:D,location:t,initialized:!0,navigation:$,revalidation:"idle",restoreScrollPosition:tt(t,n.matches||N.matches),preventScrollReset:m,blockers:p}),{viewTransitionOpts:g,flushSync:!0===h}),D=s.Pop,O=!1,M=!1,j=!1,z=!1,B=[],V=[]}async function ye(t,n,r){P&&P.abort(),P=null,D=t,j=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(x&&S){let n=et(e,t);x[n]=S()}}(N.location,N.matches),O=!0===(r&&r.preventScrollReset),M=!0===(r&&r.enableViewTransition);let i=o||u,a=r&&r.overrideNavigation,l=_(i,n,f),h=!0===(r&&r.flushSync);if(!l){let e=ke(404,{pathname:n.pathname}),{matches:t,route:r}=Te(i);return Ze(),void he(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:h})}if(N.initialized&&!z&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(N.location,n)&&!(r&&r.submission&&Le(r.submission.formMethod)))return void he(n,{matches:l},{flushSync:h});P=new AbortController;let d,p=ve(e.history,n,P.signal,r&&r.submission);if(r&&r.pendingError)d=[Se(l).route.id,{type:y.error,error:r.pendingError}];else if(r&&r.submission&&Le(r.submission.formMethod)){let t=await async function(e,t,n,r,i){void 0===i&&(i={});De();let o,a=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(t,n);ue({navigation:a},{flushSync:!0===i.flushSync});let l=je(r,t);if(l.route.action||l.route.lazy){if(o=(await be("action",e,[l],r))[0],e.signal.aborted)return{shortCircuited:!0}}else o={type:y.error,error:ke(405,{method:e.method,pathname:t.pathname,routeId:l.route.id})};if(Ne(o)){let t;if(i&&null!=i.replace)t=i.replace;else{t=me(o.response.headers.get("Location"),new URL(e.url),f)===N.location.pathname+N.location.search}return await we(e,o,{submission:n,replace:t}),{shortCircuited:!0}}if(Re(o))throw ke(400,{type:"defer-action"});if(Pe(o)){let e=Se(r,l.route.id);return!0!==(i&&i.replace)&&(D=s.Push),{pendingActionResult:[e.route.id,o]}}return{pendingActionResult:[l.route.id,o]}}(p,n,r.submission,l,{replace:r.replace,flushSync:h});if(t.shortCircuited)return;d=t.pendingActionResult,a=Be(n,r.submission),h=!1,p=ve(e.history,p.url,p.signal)}let{shortCircuited:g,loaderData:v,errors:w}=await async function(t,n,r,i,s,a,l,h,d,p){let g=i||Be(n,s),v=s||a||ze(g),y=o||u,[w,b]=le(e.history,N,r,v,n,m.v7_partialHydration&&!0===h,m.unstable_skipActionErrorRevalidation,z,B,V,J,Q,W,y,f,p);if(Ze((e=>!(r&&r.some((t=>t.route.id===e)))||w&&w.some((t=>t.route.id===e)))),K=++H,0===w.length&&0===b.length){let e=Qe();return he(n,c({matches:r,loaderData:{},errors:p&&Pe(p[1])?{[p[0]]:p[1].error}:null},Ee(p),e?{fetchers:new Map(N.fetchers)}:{}),{flushSync:d}),{shortCircuited:!0}}if(!j&&(!m.v7_partialHydration||!h)){let e;b.forEach((e=>{let t=N.fetchers.get(e.key),n=Ve(void 0,t?t.data:void 0);N.fetchers.set(e.key,n)})),p&&!Pe(p[1])?e={[p[0]]:p[1].data}:N.actionData&&(e=0===Object.keys(N.actionData).length?null:N.actionData),ue(c({navigation:g},void 0!==e?{actionData:e}:{},b.length>0?{fetchers:new Map(N.fetchers)}:{}),{flushSync:d})}b.forEach((e=>{q.has(e.key)&&Ge(e.key),e.controller&&q.set(e.key,e.controller)}));let _=()=>b.forEach((e=>Ge(e.key)));P&&P.signal.addEventListener("abort",_);let{loaderResults:x,fetcherResults:E}=await Ce(N.matches,r,w,b,t);if(t.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",_);b.forEach((e=>q.delete(e.key)));let S=Ie([...x,...E]);if(S){if(S.idx>=w.length){let e=b[S.idx-w.length].key;W.add(e)}return await we(t,S.result,{replace:l}),{shortCircuited:!0}}let{loaderData:T,errors:k}=_e(N,r,w,x,p,b,E,ie);ie.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&ie.delete(t)}))})),m.v7_partialHydration&&h&&N.errors&&Object.entries(N.errors).filter((e=>{let[t]=e;return!w.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;k=Object.assign(k||{},{[t]:n})}));let I=Qe(),C=Ye(K),A=I||C||b.length>0;return c({loaderData:T,errors:k},A?{fetchers:new Map(N.fetchers)}:{})}(p,n,l,a,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,h,d);g||(P=null,he(n,c({matches:l},Ee(d),{loaderData:v,errors:w})))}async function we(r,i,o){let{submission:a,fetcherSubmission:l,replace:u}=void 0===o?{}:o;i.response.headers.has("X-Remix-Revalidate")&&(z=!0);let d=i.response.headers.get("Location");h(d,"Expected a Location header on the redirect Response"),d=me(d,new URL(r.url),f);let g=p(N.location,d,{_isRedirect:!0});if(n){let n=!1;if(i.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(te.test(d)){const r=e.history.createURL(d);n=r.origin!==t.location.origin||null==L(r.pathname,f)}if(n)return void(u?t.location.replace(d):t.location.assign(d))}P=null;let m=!0===u?s.Replace:s.Push,{formMethod:v,formAction:y,formEncType:w}=N.navigation;!a&&!l&&v&&y&&w&&(a=ze(N.navigation));let b=a||l;if(X.has(i.response.status)&&b&&Le(b.formMethod))await ye(m,g,{submission:c({},b,{formAction:d}),preventScrollReset:O});else{let e=Be(g,a);await ye(m,g,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:O})}}async function be(e,t,n,r){try{let o=await fe(g,e,t,n,r,l,i);return await Promise.all(o.map(((e,i)=>{if(Ae(e)){let o=e.result;return{type:y.redirect,response:ge(o,t,n[i].route.id,r,f,m.v7_relativeSplatPath)}}return pe(e)})))}catch(o){return n.map((()=>({type:y.error,error:o})))}}async function Ce(t,n,r,i,o){let[s,...a]=await Promise.all([r.length?be("loader",o,r,n):[],...i.map((t=>{if(t.matches&&t.match&&t.controller){return be("loader",ve(e.history,t.path,t.controller.signal),[t.match],t.matches).then((e=>e[0]))}return Promise.resolve({type:y.error,error:ke(404,{pathname:t.path})})}))]);return await Promise.all([Me(t,r,s,s.map((()=>o.signal)),!1,N.loaderData),Me(t,i.map((e=>e.match)),a,i.map((e=>e.controller?e.controller.signal:null)),!0)]),{loaderResults:s,fetcherResults:a}}function De(){z=!0,B.push(...Ze()),Q.forEach(((e,t)=>{q.has(t)&&(V.push(t),Ge(t))}))}function Oe(e,t,n){void 0===n&&(n={}),N.fetchers.set(e,t),ue({fetchers:new Map(N.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Ue(e,t,n,r){void 0===r&&(r={});let i=Se(N.matches,t);Ke(e),ue({errors:{[i.route.id]:n},fetchers:new Map(N.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function He(e){return m.v7_fetcherPersist&&(Y.set(e,(Y.get(e)||0)+1),J.has(e)&&J.delete(e)),N.fetchers.get(e)||Z}function Ke(e){let t=N.fetchers.get(e);!q.has(e)||t&&"loading"===t.state&&G.has(e)||Ge(e),Q.delete(e),G.delete(e),W.delete(e),J.delete(e),N.fetchers.delete(e)}function Ge(e){let t=q.get(e);h(t,"Expected fetch controller: "+e),t.abort(),q.delete(e)}function We(e){for(let t of e){let e=qe(He(t).data);N.fetchers.set(t,e)}}function Qe(){let e=[],t=!1;for(let n of W){let r=N.fetchers.get(n);h(r,"Expected fetcher: "+n),"loading"===r.state&&(W.delete(n),e.push(n),t=!0)}return We(e),t}function Ye(e){let t=[];for(let[n,r]of G)if(r<e){let e=N.fetchers.get(n);h(e,"Expected fetcher: "+n),"loading"===e.state&&(Ge(n),G.delete(n),t.push(n))}return We(t),t.length>0}function Je(e){N.blockers.delete(e),ae.delete(e)}function Xe(e,t){let n=N.blockers.get(e)||ee;h("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(N.blockers);r.set(e,t),ue({blockers:r})}function $e(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===ae.size)return;ae.size>1&&d(!1,"A router only supports one blocker at a time");let i=Array.from(ae.entries()),[o,s]=i[i.length-1],a=N.blockers.get(o);return a&&"proceeding"===a.state?void 0:s({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}function Ze(e){let t=[];return ie.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),ie.delete(r))})),t}function et(e,t){if(E){let n=E(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,N.loaderData))));return n||e.key}return e.key}function tt(e,t){if(x){let n=et(e,t),r=x[n];if("number"===typeof r)return r}return null}return C={get basename(){return f},get future(){return m},get state(){return N},get routes(){return u},get window(){return t},initialize:function(){if(v=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(ce)return void(ce=!1);d(0===ae.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=$e({currentLocation:N.location,nextLocation:r,historyAction:n});return o&&null!=i?(ce=!0,e.history.go(-1*i),void Xe(o,{state:"blocked",location:r,proceed(){Xe(o,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(N.blockers);e.set(o,ee),ue({blockers:e})}})):ye(n,r)})),n){!function(e,t){try{let n=e.sessionStorage.getItem(re);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,F);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(re,JSON.stringify(r))}catch(n){d(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,F);t.addEventListener("pagehide",e),U=()=>t.removeEventListener("pagehide",e)}return N.initialized||ye(s.Pop,N.location,{initialHydration:!0}),C},subscribe:function(e){return w.add(e),()=>w.delete(e)},enableScrollRestoration:function(e,t,n){if(x=e,S=t,E=n||null,!T&&N.navigation===$){T=!0;let e=tt(N.location,N.matches);null!=e&&ue({restoreScrollPosition:e})}return()=>{x=null,S=null,E=null}},navigate:async function t(n,r){if("number"===typeof n)return void e.history.go(n);let i=oe(N.location,N.matches,f,m.v7_prependBasename,n,m.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:o,submission:a,error:l}=se(m.v7_normalizeFormMethod,!1,i,r),u=N.location,h=p(N.location,o,r&&r.state);h=c({},h,e.history.encodeLocation(h));let d=r&&null!=r.replace?r.replace:void 0,g=s.Push;!0===d?g=s.Replace:!1===d||null!=a&&Le(a.formMethod)&&a.formAction===N.location.pathname+N.location.search&&(g=s.Replace);let v=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,y=!0===(r&&r.unstable_flushSync),w=$e({currentLocation:u,nextLocation:h,historyAction:g});if(!w)return await ye(g,h,{submission:a,pendingError:l,preventScrollReset:v,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:y});Xe(w,{state:"blocked",location:h,proceed(){Xe(w,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),t(n,r)},reset(){let e=new Map(N.blockers);e.set(w,ee),ue({blockers:e})}})},fetch:function(t,n,i,s){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");q.has(t)&&Ge(t);let a=!0===(s&&s.unstable_flushSync),l=o||u,c=oe(N.location,N.matches,f,m.v7_prependBasename,i,m.v7_relativeSplatPath,n,null==s?void 0:s.relative),d=_(l,c,f);if(!d)return void Ue(t,n,ke(404,{pathname:c}),{flushSync:a});let{path:p,submission:g,error:v}=se(m.v7_normalizeFormMethod,!0,c,s);if(v)return void Ue(t,n,v,{flushSync:a});let y=je(d,p);O=!0===(s&&s.preventScrollReset),g&&Le(g.formMethod)?async function(t,n,r,i,s,a,l){if(De(),Q.delete(t),!i.route.action&&!i.route.lazy){let e=ke(405,{method:l.formMethod,pathname:r,routeId:n});return void Ue(t,n,e,{flushSync:a})}let c=N.fetchers.get(t);Oe(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(l,c),{flushSync:a});let d=new AbortController,p=ve(e.history,r,d.signal,l);q.set(t,d);let g=H,v=await be("action",p,[i],s),y=v[0];if(p.signal.aborted)return void(q.get(t)===d&&q.delete(t));if(m.v7_fetcherPersist&&J.has(t)){if(Ne(y)||Pe(y))return void Oe(t,qe(void 0))}else{if(Ne(y))return q.delete(t),K>g?void Oe(t,qe(void 0)):(W.add(t),Oe(t,Ve(l)),we(p,y,{fetcherSubmission:l}));if(Pe(y))return void Ue(t,n,y.error)}if(Re(y))throw ke(400,{type:"defer-action"});let w=N.navigation.location||N.location,b=ve(e.history,w,d.signal),x=o||u,E="idle"!==N.navigation.state?_(x,N.navigation.location,f):N.matches;h(E,"Didn't find any matches after fetcher action");let S=++H;G.set(t,S);let T=Ve(l,y.data);N.fetchers.set(t,T);let[k,I]=le(e.history,N,E,l,w,!1,m.unstable_skipActionErrorRevalidation,z,B,V,J,Q,W,x,f,[i.route.id,y]);I.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=N.fetchers.get(t),r=Ve(void 0,n?n.data:void 0);N.fetchers.set(t,r),q.has(t)&&Ge(t),e.controller&&q.set(t,e.controller)})),ue({fetchers:new Map(N.fetchers)});let C=()=>I.forEach((e=>Ge(e.key)));d.signal.addEventListener("abort",C);let{loaderResults:A,fetcherResults:R}=await Ce(N.matches,E,k,I,b);if(d.signal.aborted)return;d.signal.removeEventListener("abort",C),G.delete(t),q.delete(t),I.forEach((e=>q.delete(e.key)));let O=Ie([...A,...R]);if(O){if(O.idx>=k.length){let e=I[O.idx-k.length].key;W.add(e)}return we(b,O.result)}let{loaderData:L,errors:M}=_e(N,N.matches,k,A,void 0,I,R,ie);if(N.fetchers.has(t)){let e=qe(y.data);N.fetchers.set(t,e)}Ye(S),"loading"===N.navigation.state&&S>K?(h(D,"Expected pending action"),P&&P.abort(),he(N.navigation.location,{matches:E,loaderData:L,errors:M,fetchers:new Map(N.fetchers)})):(ue({errors:M,loaderData:xe(N.loaderData,L,E,M),fetchers:new Map(N.fetchers)}),z=!1)}(t,n,p,y,d,a,g):(Q.set(t,{routeId:n,path:p}),async function(t,n,r,i,o,s,a){let l=N.fetchers.get(t);Oe(t,Ve(a,l?l.data:void 0),{flushSync:s});let c=new AbortController,u=ve(e.history,r,c.signal);q.set(t,c);let d=H,f=await be("loader",u,[i],o),p=f[0];Re(p)&&(p=await Fe(p,u.signal,!0)||p);q.get(t)===c&&q.delete(t);if(u.signal.aborted)return;if(J.has(t))return void Oe(t,qe(void 0));if(Ne(p))return K>d?void Oe(t,qe(void 0)):(W.add(t),void await we(u,p));if(Pe(p))return void Ue(t,n,p.error);h(!Re(p),"Unhandled fetcher deferred data"),Oe(t,qe(p.data))}(t,n,p,y,d,a,g))},revalidate:function(){De(),ue({revalidation:"loading"}),"submitting"!==N.navigation.state&&("idle"!==N.navigation.state?ye(D||N.historyAction,N.navigation.location,{overrideNavigation:N.navigation}):ye(N.historyAction,N.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:He,deleteFetcher:function(e){if(m.v7_fetcherPersist){let t=(Y.get(e)||0)-1;t<=0?(Y.delete(e),J.add(e)):Y.set(e,t)}else Ke(e);ue({fetchers:new Map(N.fetchers)})},dispose:function(){v&&v(),U&&U(),w.clear(),P&&P.abort(),N.fetchers.forEach(((e,t)=>Ke(t))),N.blockers.forEach(((e,t)=>Je(t)))},getBlocker:function(e,t){let n=N.blockers.get(e)||ee;return ae.get(e)!==t&&ae.set(e,t),n},deleteBlocker:Je,_internalFetchControllers:q,_internalActiveDeferreds:ie,_internalSetRoutes:function(e){l={},o=b(e,i,void 0,l)}},C}Symbol("deferred");function oe(e,t,n,r,i,o,s,a){let l,c;if(s){l=[];for(let e of t)if(l.push(e),e.route.id===s){c=e;break}}else l=t,c=t[t.length-1];let u=j(i||".",U(l,o),L(e.pathname,n)||e.pathname,"path"===a);return null==i&&(u.search=e.search,u.hash=e.hash),null!=i&&""!==i&&"."!==i||!c||!c.route.index||Ue(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:z([n,u.pathname])),g(u)}function se(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Oe(r.formMethod))return{path:n,error:ke(405,{method:r.formMethod})};let i,o,s=()=>({path:n,error:ke(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),c=Ce(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Le(l))return s();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Le(l))return s();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(f){return s()}}}if(h("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=ye(r.formData),o=r.formData;else if(r.body instanceof FormData)i=ye(r.body),o=r.body;else if(r.body instanceof URLSearchParams)i=r.body,o=we(i);else if(null==r.body)i=new URLSearchParams,o=new FormData;else try{i=new URLSearchParams(r.body),o=we(i)}catch(f){return s()}let u={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(Le(u.formMethod))return{path:n,submission:u};let d=m(n);return t&&d.search&&Ue(d.search)&&i.append("index",""),d.search="?"+i,{path:g(d),submission:u}}function ae(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function le(e,t,n,r,i,o,s,a,l,u,h,d,f,p,g,m){let v=m?Pe(m[1])?m[1].error:m[1].data:void 0,y=e.createURL(t.location),w=e.createURL(i),b=m&&Pe(m[1])?m[0]:void 0,x=b?ae(n,b):n,E=m?m[1].statusCode:void 0,S=s&&E&&E>=400,T=x.filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(o)return!("function"===typeof i.loader&&!i.loader.hydrate)||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||l.some((t=>t===e.route.id)))return!0;let s=t.matches[n],u=e;return ue(e,c({currentUrl:y,currentParams:s.params,nextUrl:w,nextParams:u.params},r,{actionResult:v,unstable_actionStatus:E,defaultShouldRevalidate:!S&&(a||y.pathname+y.search===w.pathname+w.search||y.search!==w.search||ce(s,u))}))})),k=[];return d.forEach(((e,i)=>{if(o||!n.some((t=>t.route.id===e.routeId))||h.has(i))return;let s=_(p,e.path,g);if(!s)return void k.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(i),d=je(s,e.path),m=!1;m=!f.has(i)&&(!!u.includes(i)||(l&&"idle"!==l.state&&void 0===l.data?a:ue(d,c({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:v,unstable_actionStatus:E,defaultShouldRevalidate:!S&&a})))),m&&k.push({key:i,routeId:e.routeId,path:e.path,matches:s,match:d,controller:new AbortController})})),[T,k]}function ce(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ue(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function he(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];h(i,"No route found in manifest");let o={};for(let s in r){let e=void 0!==i[s]&&"hasErrorBoundary"!==s;d(!e,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),e||w.has(s)||(o[s]=r[s])}Object.assign(i,o),Object.assign(i,c({},t(i),{lazy:void 0}))}function de(e){return Promise.all(e.matches.map((e=>e.resolve())))}async function fe(e,t,n,r,i,o,s,a){let l=r.reduce(((e,t)=>e.add(t.route.id)),new Set),u=new Set,d=await e({matches:i.map((e=>{let r=l.has(e.route.id);return c({},e,{shouldLoad:r,resolve:i=>(u.add(e.route.id),r?async function(e,t,n,r,i,o,s){let a,l,c=r=>{let i,a=new Promise(((e,t)=>i=t));l=()=>i(),t.signal.addEventListener("abort",l);let c,u=i=>"function"!==typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+n.route.id+"]")):r({request:t,params:n.params,context:s},...void 0!==i?[i]:[]);return c=o?o((e=>u(e))):(async()=>{try{return{type:"data",result:await u()}}catch(e){return{type:"error",result:e}}})(),Promise.race([c,a])};try{let o=n.route[e];if(n.route.lazy)if(o){let e,[t]=await Promise.all([c(o).catch((t=>{e=t})),he(n.route,i,r)]);if(void 0!==e)throw e;a=t}else{if(await he(n.route,i,r),o=n.route[e],!o){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw ke(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:y.data,result:void 0}}a=await c(o)}else{if(!o){let e=new URL(t.url);throw ke(404,{pathname:e.pathname+e.search})}a=await c(o)}h(void 0!==a.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(u){return{type:y.error,result:u}}finally{l&&t.signal.removeEventListener("abort",l)}return a}(t,n,e,o,s,i,a):Promise.resolve({type:y.data,result:void 0}))})})),request:n,params:i[0].params,context:a});return i.forEach((e=>h(u.has(e.route.id),'`match.resolve()` was not called for route id "'+e.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.'))),d.filter(((e,t)=>l.has(i[t].route.id)))}async function pe(e){let{result:t,type:n,status:r}=e;if(De(t)){let e;try{let n=t.headers.get("Content-Type");e=n&&/\bapplication\/json\b/.test(n)?null==t.body?null:await t.json():await t.text()}catch(s){return{type:y.error,error:s}}return n===y.error?{type:y.error,error:new H(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:y.data,data:e,statusCode:t.status,headers:t.headers}}return n===y.error?{type:y.error,error:t,statusCode:K(t)?t.status:r}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(t)?{type:y.deferred,deferredData:t,statusCode:null==(i=t.init)?void 0:i.status,headers:(null==(o=t.init)?void 0:o.headers)&&new Headers(t.init.headers)}:{type:y.data,data:t,statusCode:r};var i,o}function ge(e,t,n,r,i,o){let s=e.headers.get("Location");if(h(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!te.test(s)){let a=r.slice(0,r.findIndex((e=>e.route.id===n))+1);s=oe(new URL(t.url),a,i,!0,s,o),e.headers.set("Location",s)}return e}function me(e,t,n){if(te.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),o=null!=L(i.pathname,n);if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function ve(e,t,n,r){let i=e.createURL(Ce(t)).toString(),o={signal:n};if(r&&Le(r.formMethod)){let{formMethod:e,formEncType:t}=r;o.method=e.toUpperCase(),"application/json"===t?(o.headers=new Headers({"Content-Type":t}),o.body=JSON.stringify(r.json)):"text/plain"===t?o.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?o.body=ye(r.formData):o.body=r.formData}return new Request(i,o)}function ye(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function we(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function be(e,t,n,r,i,o){let s,a={},l=null,c=!1,u={},d=r&&Pe(r[1])?r[1].error:void 0;return n.forEach(((n,r)=>{let f=t[r].route.id;if(h(!Ne(n),"Cannot handle redirect results in processLoaderData"),Pe(n)){let t=n.error;if(void 0!==d&&(t=d,d=void 0),l=l||{},o)l[f]=t;else{let n=Se(e,f);null==l[n.route.id]&&(l[n.route.id]=t)}a[f]=void 0,c||(c=!0,s=K(n.error)?n.error.status:500),n.headers&&(u[f]=n.headers)}else Re(n)?(i.set(f,n.deferredData),a[f]=n.deferredData.data,null==n.statusCode||200===n.statusCode||c||(s=n.statusCode),n.headers&&(u[f]=n.headers)):(a[f]=n.data,n.statusCode&&200!==n.statusCode&&!c&&(s=n.statusCode),n.headers&&(u[f]=n.headers))})),void 0!==d&&r&&(l={[r[0]]:d},a[r[0]]=void 0),{loaderData:a,errors:l,statusCode:s||200,loaderHeaders:u}}function _e(e,t,n,r,i,o,s,a){let{loaderData:l,errors:u}=be(t,n,r,i,a,!1);for(let d=0;d<o.length;d++){let{key:t,match:n,controller:r}=o[d];h(void 0!==s&&void 0!==s[d],"Did not find corresponding fetcher result");let i=s[d];if(!r||!r.signal.aborted)if(Pe(i)){let r=Se(e.matches,null==n?void 0:n.route.id);u&&u[r.route.id]||(u=c({},u,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(Ne(i))h(!1,"Unhandled fetcher revalidation redirect");else if(Re(i))h(!1,"Unhandled fetcher deferred data");else{let n=qe(i.data);e.fetchers.set(t,n)}}return{loaderData:l,errors:u}}function xe(e,t,n,r){let i=c({},t);for(let o of n){let n=o.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&o.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function Ee(e){return e?Pe(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Se(e,t){let n=t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e];return n.reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Te(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ke(e,t){let{pathname:n,routeId:r,method:i,type:o}=void 0===t?{}:t,s="Unknown Server Error",a="Unknown @remix-run/router error";return 400===e?(s="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===o?a="defer() is not supported in actions":"invalid-body"===o&&(a="Unable to encode submission body")):403===e?(s="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):404===e?(s="Not Found",a='No route matches URL "'+n+'"'):405===e&&(s="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new H(e||500,s,new Error(a),!0)}function Ie(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Ne(n))return{result:n,idx:t}}}function Ce(e){return g(c({},"string"===typeof e?m(e):e,{hash:""}))}function Ae(e){return De(e.result)&&J.has(e.result.status)}function Re(e){return e.type===y.deferred}function Pe(e){return e.type===y.error}function Ne(e){return(e&&e.type)===y.redirect}function De(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Oe(e){return Y.has(e.toLowerCase())}function Le(e){return W.has(e.toLowerCase())}async function Me(e,t,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],l=t[s];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),u=null!=c&&!ce(c,l)&&void 0!==(o&&o[l.route.id]);if(Re(a)&&(i||u)){let e=r[s];h(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Fe(a,e,i).then((e=>{e&&(n[s]=e||n[s])}))}}}async function Fe(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:y.data,data:e.deferredData.unwrappedData}}catch(r){return{type:y.error,error:r}}return{type:y.data,data:e.deferredData.data}}}function Ue(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function je(e,t){let n="string"===typeof t?m(t).search:t.search;if(e[e.length-1].route.index&&Ue(n||""))return e[e.length-1];let r=F(e);return r[r.length-1]}function ze(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:s}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=o?{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function Be(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ve(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function qe(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}const Ke=t.createContext(null);const Ge=t.createContext(null);const We=t.createContext(null);const Qe=t.createContext(null);const Ye=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Je=t.createContext(null);function Xe(){return null!=t.useContext(Qe)}function $e(){return Xe()||h(!1),t.useContext(Qe).location}function Ze(e){t.useContext(We).static||t.useLayoutEffect(e)}function et(){let{isDataRoute:e}=t.useContext(Ye);return e?function(){let{router:e}=ht(ct.UseNavigateStable),n=ft(ut.UseNavigateStable),r=t.useRef(!1);Ze((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,He({fromRouteId:n},i)))}),[e,n]);return i}():function(){Xe()||h(!1);let e=t.useContext(Ke),{basename:n,future:r,navigator:i}=t.useContext(We),{matches:o}=t.useContext(Ye),{pathname:s}=$e(),a=JSON.stringify(U(o,r.v7_relativeSplatPath)),l=t.useRef(!1);return Ze((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=j(t,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:z([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[n,i,a,s,e])}()}const tt=t.createContext(null);function nt(){let{matches:e}=t.useContext(Ye),n=e[e.length-1];return n?n.params:{}}function rt(e,n,r,i){Xe()||h(!1);let{navigator:o}=t.useContext(We),{matches:a}=t.useContext(Ye),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=$e();if(n){var p;let e="string"===typeof n?m(n):n;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=_(e,{pathname:v});let w=lt(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,i);return n&&w?t.createElement(Qe.Provider,{value:{location:He({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:s.Pop}},w):w}function it(){let e=function(){var e;let n=t.useContext(Je),r=dt(ut.UseRouteError),i=ft(ut.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ot=t.createElement(it,null);class st extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Ye.Provider,{value:this.props.routeContext},t.createElement(Je.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function at(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(Ke);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Ye.Provider,{value:n},i)}function lt(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let a=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,h=!1,d=null,f=null;var p;r&&(s=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ot,c&&(u<0&&0===o?(p="route-fallback",!1||pt[p]||(pt[p]=!0),h=!0,f=null):u===o&&(h=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,o+1)),m=()=>{let n;return n=s?d:h?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(at,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(st,{location:r.location,revalidation:r.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ct=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ct||{}),ut=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ut||{});function ht(e){let n=t.useContext(Ke);return n||h(!1),n}function dt(e){let n=t.useContext(Ge);return n||h(!1),n}function ft(e){let n=function(e){let n=t.useContext(Ye);return n||h(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||h(!1),r.route.id}const pt={};r.startTransition;function gt(e){return function(e){let n=t.useContext(Ye).outlet;return n?t.createElement(tt.Provider,{value:e},n):n}(e.context)}function mt(e){let{basename:n="/",children:r=null,location:i,navigationType:o=s.Pop,navigator:a,static:l=!1,future:c}=e;Xe()&&h(!1);let u=n.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:u,navigator:a,static:l,future:He({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof i&&(i=m(i));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=i,w=t.useMemo((()=>{let e=L(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:o}}),[u,f,p,g,v,y,o]);return null==w?null:t.createElement(We.Provider,{value:d},t.createElement(Qe.Provider,{children:r,value:w}))}new Promise((()=>{}));t.Component;function vt(e){let n={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(n,{element:t.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(n,{hydrateFallbackElement:t.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(n,{errorElement:t.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),n}function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(CM){}function wt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=yt({},t,{errors:bt(t.errors)})),t}function bt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new H(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(CM){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const _t=t.createContext({isTransitioning:!1});const xt=t.createContext(new Map);const Et=r.startTransition,St=l.flushSync;r.useId;function Tt(e){St?St(e):e()}class kt{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function It(e){let{fallbackElement:n,router:r,future:i}=e,[o,s]=t.useState(r.state),[a,l]=t.useState(),[c,u]=t.useState({isTransitioning:!1}),[h,d]=t.useState(),[f,p]=t.useState(),[g,m]=t.useState(),v=t.useRef(new Map),{v7_startTransition:y}=i||{},w=t.useCallback((e=>{y?function(e){Et?Et(e):e()}(e):e()}),[y]),b=t.useCallback(((e,t)=>{let{deletedFetchers:n,unstable_flushSync:i,unstable_viewTransitionOpts:o}=t;n.forEach((e=>v.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)}));let a=null==r.window||null==r.window.document||"function"!==typeof r.window.document.startViewTransition;if(o&&!a){if(i){Tt((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let t=r.window.document.startViewTransition((()=>{Tt((()=>s(e)))}));return t.finished.finally((()=>{Tt((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void Tt((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),m({state:e,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else i?Tt((()=>s(e))):w((()=>s(e)))}),[r.window,f,h,v,w]);t.useLayoutEffect((()=>r.subscribe(b)),[r,b]),t.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new kt)}),[c]),t.useEffect((()=>{if(h&&a&&r.window){let e=a,t=h.promise,n=r.window.document.startViewTransition((async()=>{w((()=>s(e))),await t}));n.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(n)}}),[w,a,h,r.window]),t.useEffect((()=>{h&&a&&o.location.key===a.location.key&&h.resolve()}),[h,f,o.location,a]),t.useEffect((()=>{!c.isTransitioning&&g&&(l(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))}),[c.isTransitioning,g]),t.useEffect((()=>{}),[]);let _=t.useMemo((()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})})),[r]),x=r.basename||"/",E=t.useMemo((()=>({router:r,navigator:_,static:!1,basename:x})),[r,_,x]);return t.createElement(t.Fragment,null,t.createElement(Ke.Provider,{value:E},t.createElement(Ge.Provider,{value:o},t.createElement(xt.Provider,{value:v.current},t.createElement(_t.Provider,{value:c},t.createElement(mt,{basename:x,location:o.location,navigationType:o.historyAction,navigator:_,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},o.initialized||r.future.v7_partialHydration?t.createElement(Ct,{routes:r.routes,future:r.future,state:o}):n))))),null)}function Ct(e){let{routes:t,future:n,state:r}=e;return rt(t,void 0,r,n)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var At,Rt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(At||(At={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Rt||(Rt={}));var Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pt.apply(this,arguments)};function Nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Dt(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ot=n(324),Lt=n.n(Ot),Mt="-ms-",Ft="-moz-",Ut="-webkit-",jt="comm",zt="rule",Bt="decl",Vt="@import",qt="@keyframes",Ht="@layer",Kt=Math.abs,Gt=String.fromCharCode,Wt=Object.assign;function Qt(e){return e.trim()}function Yt(e,t){return(e=t.exec(e))?e[0]:e}function Jt(e,t,n){return e.replace(t,n)}function Xt(e,t,n){return e.indexOf(t,n)}function $t(e,t){return 0|e.charCodeAt(t)}function Zt(e,t,n){return e.slice(t,n)}function en(e){return e.length}function tn(e){return e.length}function nn(e,t){return t.push(e),e}function rn(e,t){return e.filter((function(e){return!Yt(e,t)}))}var on=1,sn=1,an=0,ln=0,cn=0,un="";function hn(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:on,column:sn,length:s,return:"",siblings:a}}function dn(e,t){return Wt(hn("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function fn(e){for(;e.root;)e=dn(e.root,{children:[e]});nn(e,e.siblings)}function pn(){return cn=ln>0?$t(un,--ln):0,sn--,10===cn&&(sn=1,on--),cn}function gn(){return cn=ln<an?$t(un,ln++):0,sn++,10===cn&&(sn=1,on++),cn}function mn(){return $t(un,ln)}function vn(){return ln}function yn(e,t){return Zt(un,e,t)}function wn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bn(e){return on=sn=1,an=en(un=e),ln=0,[]}function _n(e){return un="",e}function xn(e){return Qt(yn(ln-1,Tn(91===e?e+2:40===e?e+1:e)))}function En(e){for(;(cn=mn())&&cn<33;)gn();return wn(e)>2||wn(cn)>3?"":" "}function Sn(e,t){for(;--t&&gn()&&!(cn<48||cn>102||cn>57&&cn<65||cn>70&&cn<97););return yn(e,vn()+(t<6&&32==mn()&&32==gn()))}function Tn(e){for(;gn();)switch(cn){case e:return ln;case 34:case 39:34!==e&&39!==e&&Tn(cn);break;case 40:41===e&&Tn(e);break;case 92:gn()}return ln}function kn(e,t){for(;gn()&&e+cn!==57&&(e+cn!==84||47!==mn()););return"/*"+yn(t,ln-1)+"*"+Gt(47===e?e:gn())}function In(e){for(;!wn(mn());)gn();return yn(e,ln)}function Cn(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function An(e,t,n,r){switch(e.type){case Ht:if(e.children.length)break;case Vt:case Bt:return e.return=e.return||e.value;case jt:return"";case qt:return e.return=e.value+"{"+Cn(e.children,r)+"}";case zt:if(!en(e.value=e.props.join(",")))return""}return en(n=Cn(e.children,r))?e.return=e.value+"{"+n+"}":""}function Rn(e,t,n){switch(function(e,t){return 45^$t(e,0)?(((t<<2^$t(e,0))<<2^$t(e,1))<<2^$t(e,2))<<2^$t(e,3):0}(e,t)){case 5103:return Ut+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ut+e+e;case 4789:return Ft+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ut+e+Ft+e+Mt+e+e;case 5936:switch($t(e,t+11)){case 114:return Ut+e+Mt+Jt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ut+e+Mt+Jt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ut+e+Mt+Jt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ut+e+Mt+e+e;case 6165:return Ut+e+Mt+"flex-"+e+e;case 5187:return Ut+e+Jt(e,/(\w+).+(:[^]+)/,Ut+"box-$1$2"+Mt+"flex-$1$2")+e;case 5443:return Ut+e+Mt+"flex-item-"+Jt(e,/flex-|-self/g,"")+(Yt(e,/flex-|baseline/)?"":Mt+"grid-row-"+Jt(e,/flex-|-self/g,""))+e;case 4675:return Ut+e+Mt+"flex-line-pack"+Jt(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ut+e+Mt+Jt(e,"shrink","negative")+e;case 5292:return Ut+e+Mt+Jt(e,"basis","preferred-size")+e;case 6060:return Ut+"box-"+Jt(e,"-grow","")+Ut+e+Mt+Jt(e,"grow","positive")+e;case 4554:return Ut+Jt(e,/([^-])(transform)/g,"$1"+Ut+"$2")+e;case 6187:return Jt(Jt(Jt(e,/(zoom-|grab)/,Ut+"$1"),/(image-set)/,Ut+"$1"),e,"")+e;case 5495:case 3959:return Jt(e,/(image-set\([^]*)/,Ut+"$1$`$1");case 4968:return Jt(Jt(e,/(.+:)(flex-)?(.*)/,Ut+"box-pack:$3"+Mt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ut+e+e;case 4200:if(!Yt(e,/flex-|baseline/))return Mt+"grid-column-align"+Zt(e,t)+e;break;case 2592:case 3360:return Mt+Jt(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Yt(e.props,/grid-\w+-end/)}))?~Xt(e+(n=n[t].value),"span",0)?e:Mt+Jt(e,"-start","")+e+Mt+"grid-row-span:"+(~Xt(n,"span",0)?Yt(n,/\d+/):+Yt(n,/\d+/)-+Yt(e,/\d+/))+";":Mt+Jt(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Yt(e.props,/grid-\w+-start/)}))?e:Mt+Jt(Jt(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Jt(e,/(.+)-inline(.+)/,Ut+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(en(e)-1-t>6)switch($t(e,t+1)){case 109:if(45!==$t(e,t+4))break;case 102:return Jt(e,/(.+:)(.+)-([^]+)/,"$1"+Ut+"$2-$3$1"+Ft+(108==$t(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Xt(e,"stretch",0)?Rn(Jt(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Jt(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,o,s,a){return Mt+n+":"+r+a+(i?Mt+n+"-span:"+(o?s:+s-+r)+a:"")+e}));case 4949:if(121===$t(e,t+6))return Jt(e,":",":"+Ut)+e;break;case 6444:switch($t(e,45===$t(e,14)?18:11)){case 120:return Jt(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ut+(45===$t(e,14)?"inline-":"")+"box$3$1"+Ut+"$2$3$1"+Mt+"$2box$3")+e;case 100:return Jt(e,":",":"+Mt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Jt(e,"scroll-","scroll-snap-")+e}return e}function Pn(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Bt:return void(e.return=Rn(e.value,e.length,n));case qt:return Cn([dn(e,{value:Jt(e.value,"@","@"+Ut)})],r);case zt:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Yt(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":fn(dn(e,{props:[Jt(t,/:(read-\w+)/,":"+Ft+"$1")]})),fn(dn(e,{props:[t]})),Wt(e,{props:rn(n,r)});break;case"::placeholder":fn(dn(e,{props:[Jt(t,/:(plac\w+)/,":"+Ut+"input-$1")]})),fn(dn(e,{props:[Jt(t,/:(plac\w+)/,":"+Ft+"$1")]})),fn(dn(e,{props:[Jt(t,/:(plac\w+)/,Mt+"input-$1")]})),fn(dn(e,{props:[t]})),Wt(e,{props:rn(n,r)})}return""}))}}function Nn(e){return _n(Dn("",null,null,null,[""],e=bn(e),0,[0],e))}function Dn(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,h=s,d=0,f=0,p=0,g=1,m=1,v=1,y=0,w="",b=i,_=o,x=r,E=w;m;)switch(p=y,y=gn()){case 40:if(108!=p&&58==$t(E,h-1)){-1!=Xt(E+=Jt(xn(y),"&","&\f"),"&\f",Kt(c?a[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:E+=xn(y);break;case 9:case 10:case 13:case 32:E+=En(p);break;case 92:E+=Sn(vn()-1,7);continue;case 47:switch(mn()){case 42:case 47:nn(Ln(kn(gn(),vn()),t,n,l),l);break;default:E+="/"}break;case 123*g:a[c++]=en(E)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:-1==v&&(E=Jt(E,/\f/g,"")),f>0&&en(E)-h&&nn(f>32?Mn(E+";",r,n,h-1,l):Mn(Jt(E," ","")+";",r,n,h-2,l),l);break;case 59:E+=";";default:if(nn(x=On(E,t,n,c,u,i,a,w,b=[],_=[],h,o),o),123===y)if(0===u)Dn(E,t,x,x,b,o,h,a,_);else switch(99===d&&110===$t(E,3)?100:d){case 100:case 108:case 109:case 115:Dn(e,x,x,r&&nn(On(e,x,x,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:Dn(E,x,x,x,[""],_,0,a,_)}}c=u=f=0,g=v=1,w=E="",h=s;break;case 58:h=1+en(E),f=p;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==pn())continue;switch(E+=Gt(y),y*g){case 38:v=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(en(E)-1)*v,v=1;break;case 64:45===mn()&&(E+=xn(gn())),d=mn(),u=h=en(w=E+=In(vn())),y++;break;case 45:45===p&&2==en(E)&&(g=0)}}return o}function On(e,t,n,r,i,o,s,a,l,c,u,h){for(var d=i-1,f=0===i?o:[""],p=tn(f),g=0,m=0,v=0;g<r;++g)for(var y=0,w=Zt(e,d+1,d=Kt(m=s[g])),b=e;y<p;++y)(b=Qt(m>0?f[y]+" "+w:Jt(w,/&\f/g,f[y])))&&(l[v++]=b);return hn(e,t,n,0===i?zt:a,l,c,u,h)}function Ln(e,t,n,r){return hn(e,t,n,jt,Gt(cn),Zt(e,2,-2),0,r)}function Mn(e,t,n,r,i){return hn(e,t,n,Bt,Zt(e,0,r),Zt(e,r+1,-1),r,i)}var Fn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Un="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}&&({NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.SC_ATTR)||"data-styled",jn="active",zn="data-styled-version",Bn="6.1.11",Vn="/*!sc*/\n",qn="undefined"!=typeof window&&"HTMLElement"in window,Hn=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.SC_DISABLE_SPEEDY)),Kn={},Gn=(new Set,Object.freeze([])),Wn=Object.freeze({});function Qn(e,t,n){return void 0===n&&(n=Wn),e.theme!==n.theme&&e.theme||t||n.theme}var Yn=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Jn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Xn=/(^-|-$)/g;function $n(e){return e.replace(Jn,"-").replace(Xn,"")}var Zn=/(a)(d)/gi,er=52,tr=function(e){return String.fromCharCode(e+(e>25?39:97))};function nr(e){var t,n="";for(t=Math.abs(e);t>er;t=t/er|0)n=tr(t%er)+n;return(tr(t%er)+n).replace(Zn,"$1-$2")}var rr,ir=5381,or=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},sr=function(e){return or(ir,e)};function ar(e){return nr(sr(e)>>>0)}function lr(e){return e.displayName||e.name||"Component"}function cr(e){return"string"==typeof e&&!0}var ur="function"==typeof Symbol&&Symbol.for,hr=ur?Symbol.for("react.memo"):60115,dr=ur?Symbol.for("react.forward_ref"):60112,fr={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pr={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gr={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mr=((rr={})[dr]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rr[hr]=gr,rr);function vr(e){return("type"in(t=e)&&t.type.$$typeof)===hr?gr:"$$typeof"in e?mr[e.$$typeof]:fr;var t}var yr=Object.defineProperty,wr=Object.getOwnPropertyNames,br=Object.getOwnPropertySymbols,_r=Object.getOwnPropertyDescriptor,xr=Object.getPrototypeOf,Er=Object.prototype;function Sr(e,t,n){if("string"!=typeof t){if(Er){var r=xr(t);r&&r!==Er&&Sr(e,r,n)}var i=wr(t);br&&(i=i.concat(br(t)));for(var o=vr(e),s=vr(t),a=0;a<i.length;++a){var l=i[a];if(!(l in pr||n&&n[l]||s&&l in s||o&&l in o)){var c=_r(t,l);try{yr(e,l,c)}catch(e){}}}}return e}function Tr(e){return"function"==typeof e}function kr(e){return"object"==typeof e&&"styledComponentId"in e}function Ir(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Cr(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function Ar(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Rr(e,t,n){if(void 0===n&&(n=!1),!n&&!Ar(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Rr(e[r],t[r]);else if(Ar(t))for(var r in t)e[r]=Rr(e[r],t[r]);return e}function Pr(e,t){Object.defineProperty(e,"toString",{value:t})}function Nr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Dr=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw Nr(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(Vn);return t},e}(),Or=new Map,Lr=new Map,Mr=1,Fr=function(e){if(Or.has(e))return Or.get(e);for(;Lr.has(Mr);)Mr++;var t=Mr++;return Or.set(e,t),Lr.set(t,e),t},Ur=function(e,t){Mr=t+1,Or.set(e,t),Lr.set(t,e)},jr="style[".concat(Un,"][").concat(zn,'="').concat(Bn,'"]'),zr=new RegExp("^".concat(Un,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Br=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},Vr=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Vn),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(zr);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Ur(u,c),Br(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}};function qr(){return n.nc}var Hr=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Un,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Un,jn),r.setAttribute(zn,Bn);var s=qr();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},Kr=function(){function e(e){this.element=Hr(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw Nr(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Gr=function(){function e(e){this.element=Hr(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Wr=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Qr=qn,Yr={isServer:!qn,useCSSOMInjection:!Hn},Jr=function(){function e(e,t,n){void 0===e&&(e=Wn),void 0===t&&(t={});var r=this;this.options=Pt(Pt({},Yr),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&qn&&Qr&&(Qr=!1,function(e){for(var t=document.querySelectorAll(jr),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Un)!==jn&&(Vr(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),Pr(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return Lr.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||0===s.length)return"continue";var a="".concat(Un,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),r+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(Vn)},o=0;o<n;o++)i(o);return r}(r)}))}return e.registerId=function(e){return Fr(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Pt(Pt({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Wr(n):t?new Kr(n):new Gr(n)}(this.options),new Dr(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Fr(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Fr(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Fr(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Xr=/&/g,$r=/^\s*\/\/.*$/gm;function Zr(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Zr(e.children,t)),e}))}function ei(e){var t,n,r,i=void 0===e?Wn:e,o=i.options,s=void 0===o?Wn:o,a=i.plugins,l=void 0===a?Gn:a,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===zt&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Xr,n).replace(r,c))})),s.prefix&&u.push(Pn),u.push(An);var h=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace($r,""),c=Nn(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=Zr(c,s.namespace));var h,d=[];return Cn(c,function(e){var t=tn(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=l.length?l.reduce((function(e,t){return t.name||Nr(15),or(e,t.name)}),ir).toString():"",h}var ti=new Jr,ni=ei(),ri=t.createContext({shouldForwardProp:void 0,styleSheet:ti,stylis:ni}),ii=(ri.Consumer,t.createContext(void 0));function oi(){return(0,t.useContext)(ri)}function si(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=oi().styleSheet,s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)((function(){return ei({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)((function(){Lt()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return t.createElement(ri.Provider,{value:l},t.createElement(ii.Provider,{value:a},e.children))}var ai=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ni);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Pr(this,(function(){throw Nr(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=ni),this.name+e.hash},e}(),li=function(e){return e>="A"&&e<="Z"};function ci(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;li(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var ui=function(e){return null==e||!1===e||""===e},hi=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!ui(o)&&(Array.isArray(o)&&o.isCss||Tr(o)?r.push("".concat(ci(i),":"),o,";"):Ar(o)?r.push.apply(r,Dt(Dt(["".concat(i," {")],hi(o),!1),["}"],!1)):r.push("".concat(ci(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Fn||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function di(e,t,n,r){return ui(e)?[]:kr(e)?[".".concat(e.styledComponentId)]:Tr(e)?!Tr(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:di(e(t),t,n,r):e instanceof ai?n?(e.inject(n,r),[e.getName(r)]):[e]:Ar(e)?hi(e):Array.isArray(e)?Array.prototype.concat.apply(Gn,e.map((function(e){return di(e,t,n,r)}))):[e.toString()];var i}function fi(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Tr(n)&&!kr(n))return!1}return!0}var pi=sr(Bn),gi=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&fi(e),this.componentId=t,this.baseHash=or(pi,t),this.baseStyle=n,Jr.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Ir(r,this.staticRulesId);else{var i=Cr(di(this.rules,e,t,n)),o=nr(or(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=Ir(r,o),this.staticRulesId=o}else{for(var a=or(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=Cr(di(u,e,t,n));a=or(a,h+c),l+=h}}if(l){var d=nr(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(l,".".concat(d),void 0,this.componentId)),r=Ir(r,d)}}return r},e}(),mi=t.createContext(void 0);mi.Consumer;var vi={};new Set;function yi(e,n,r){var i=kr(e),o=e,s=!cr(e),a=n.attrs,l=void 0===a?Gn:a,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":$n(e);vi[n]=(vi[n]||0)+1;var r="".concat(n,"-").concat(ar(Bn+n+vi[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,h=n.displayName,d=void 0===h?function(e){return cr(e)?"styled.".concat(e):"Styled(".concat(lr(e),")")}(e):h,f=n.displayName&&n.componentId?"".concat($n(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;g=function(e,t){return m(e,t)&&v(e,t)}}else g=m}var y=new gi(r,f,i?o.componentStyle:void 0);function w(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(mi),h=oi(),d=e.shouldForwardProp||h.shouldForwardProp,f=Qn(n,u,s)||Wn,p=function(e,t,n){for(var r,i=Pt(Pt({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=Tr(r=e[o])?r(i):r;for(var a in s)i[a]="className"===a?Ir(i[a],s[a]):"style"===a?Pt(Pt({},i[a]),s[a]):s[a]}return t.className&&(i.className=Ir(i.className,t.className)),i}(i,n,f),g=p.as||c,m={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?m.as=p.forwardedAs:d&&!d(v,g)||(m[v]=p[v]));var y=function(e,t){var n=oi();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),w=Ir(a,l);return y&&(w+=" "+y),p.className&&(w+=" "+p.className),m[cr(g)&&!Yn.has(g)?"class":"className"]=w,m.ref=r,(0,t.createElement)(g,m)}(b,e,n)}w.displayName=d;var b=t.forwardRef(w);return b.attrs=p,b.componentStyle=y,b.displayName=d,b.shouldForwardProp=g,b.foldedComponentIds=i?Ir(o.foldedComponentIds,o.styledComponentId):"",b.styledComponentId=f,b.target=i?o.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Rr(e,i[r],!0);return e}({},o.defaultProps,e):e}}),Pr(b,(function(){return".".concat(b.styledComponentId)})),s&&Sr(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function wi(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var bi=function(e){return Object.assign(e,{isCss:!0})};function _i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Tr(e)||Ar(e))return bi(di(wi(Gn,Dt([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?di(r):bi(di(wi(r,t)))}function xi(e,t,n){if(void 0===n&&(n=Wn),!t)throw Nr(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,_i.apply(void 0,Dt([r],i,!1)))};return r.attrs=function(r){return xi(e,t,Pt(Pt({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return xi(e,t,Pt(Pt({},n),r))},r}var Ei=function(e){return xi(yi,e)},Si=Ei;Yn.forEach((function(e){Si[e]=Ei(e)}));var Ti=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=fi(e),Jr.registerId(this.componentId+1)}return e.prototype.createStyles=function(e,t,n,r){var i=r(Cr(di(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Jr.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=qr(),r=Cr([n&&'nonce="'.concat(n,'"'),"".concat(Un,'="true"'),"".concat(zn,'="').concat(Bn,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Nr(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw Nr(2);var r=((n={})[Un]="",n[zn]=Bn,n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=qr();return i&&(r.nonce=i),[t.createElement("style",Pt({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Jr({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Nr(2);return t.createElement(si,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Nr(3)}})(),"__sc-".concat(Un,"__");var ki,Ii=n(579);const Ci=Si.div(ki||(ki=o(["\n  width: 390px;\n  min-height: 1200px;\n"])));function Ai(){return(0,Ii.jsx)(Ci,{children:(0,Ii.jsx)(gt,{})})}var Ri,Pi;const Ni=Si.button(Ri||(Ri=o(['\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0;\n  font-size: 10px;\n  font-weight: 500;\n  font-family: "Pretendard";\n  line-height: 150%;\n  text-align: center;\n  border: none;\n  background-color: transparent;\n  color: ',";\n  cursor: pointer;\n"])),(e=>e.color)),Di=Si.div(Pi||(Pi=o(["\n  width: 32px;\n  height: 32px;\n  background: ",";\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin-left: auto;\n  margin-right: auto;\n"])),(e=>e.icon));const Oi=function(e){const{title:t,color:n,icon:r,onClickEvent:i}=e;return(0,Ii.jsxs)(Ni,{color:n||"#CCCCCC",onClick:i,children:[(0,Ii.jsx)(Di,{icon:r||"url('https://i.postimg.cc/T1Hksxyt/home.png')"}),t||"\ud648"]})};var Li,Mi,Fi,Ui,ji;const zi=Si.div(Li||(Li=o(["\n  width: 390px;\n  height: 60px;\n  background: #fff;\n  border-top: 0.5px solid #ccc;\n  position: fixed;\n  bottom: 0px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n"])));Si.div(Mi||(Mi=o(["\n  width: 32px;\n  height: 60px;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Si.div(Fi||(Fi=o(["\n  width: 32px;\n  height: 32px;\n  /* background: url('https://i.postimg.cc/268WSw4R/home-off.png'); */\n  background: url(\"https://i.postimg.cc/T1Hksxyt/home.png\");\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin-left: auto;\n  margin-right: auto;\n"]))),Si.div(Ui||(Ui=o(["\n  width: 32px;\n  height: 32px;\n  /* background: url('https://i.postimg.cc/1tJpGT93/celebration-on.png'); */\n  background: url(\"https://i.postimg.cc/mZFBF0ZS/celebration.png\");\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin-left: auto;\n  margin-right: auto;\n"]))),Si.div(ji||(ji=o(['\n  width: 32px;\n  height: 32px;\n  background: url("https://i.postimg.cc/pLyHR7S8/account-circle.png");\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin-left: auto;\n  margin-right: auto;\n'])));const Bi=function(e){const n=$e(),r=et(),i=n.pathname,[o,s]=(0,t.useState)(!1);return(0,Ii.jsxs)(zi,{children:[(0,Ii.jsx)(Oi,{title:"\ud648",icon:"/"===i?"url('https://i.postimg.cc/T1Hksxyt/home.png')":"url('https://i.postimg.cc/268WSw4R/home-off.png')",color:"/"===i?"#5C67DC":"#ccc",onClickEvent:()=>r("/")}),(0,Ii.jsx)(Oi,{title:"\ucd95\uc81c",icon:i.includes("Festival")||i.includes("Review")?"url('https://i.postimg.cc/1tJpGT93/celebration-off.png')":"url('https://i.postimg.cc/mZFBF0ZS/celebration.png')",color:i.includes("Festival")||i.includes("Review")?"#5C67DC":"#ccc",onClickEvent:()=>r("/FestivalList")}),(0,Ii.jsx)(Oi,{title:"\ub9c8\uc774\ud398\uc774\uc9c0",icon:"url('https://i.postimg.cc/pLyHR7S8/account-circle.png')"})]})};var Vi,qi,Hi,Ki,Gi;const Wi=Si.div(Vi||(Vi=o(["\n  width: 334px;\n  height: 334px;\n  border-radius: 16px;\n  overflow: hidden;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0)),\n    url(",");\n  background-size: cover;\n  background-repeat: no-repeat;\n  margin-left: 10px;\n  flex: 0 0 auto;\n"])),(e=>e.url)),Qi=Si.div(qi||(qi=o(['\n  width: 40px;\n  height: 20px;\n  box-sizing: border-box;\n  border-radius: 50px;\n  margin-left: 282px;\n  background: rgba(0, 0, 0, 0.44);\n  margin-top: 12px;\n\n  display: flex;\n  justify-content: center;\n\n  font-family: "Pretendard";\n  font-size: 12px;\n  line-height: 20px;\n  color: #cccccc;\n']))),Yi=Si.div(Hi||(Hi=o(['\n  font-size: 12px;\n  line-height: 20px;\n  color: #ffffff;\n  margin-right: 3px;\n  font-family: "Pretendard";\n']))),Ji=Si.div(Ki||(Ki=o(['\n  max-width: 240px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box; /* Flexbox\uc640 \uc720\uc0ac\ud55c \ub808\uc774\uc544\uc6c3 \ubaa8\ub4dc \uc0ac\uc6a9 */\n  -webkit-line-clamp: 2; /* \ub450 \uc904\uae4c\uc9c0\ub9cc \ud45c\uc2dc */\n  -webkit-box-orient: vertical; /* Flexbox\uc758 \ubc29\ud5a5 \uc124\uc815 */\n  line-height: 1.2; /* \uc904 \ub192\uc774 \uc124\uc815 */\n  font-size: 28px;\n  color: #fff;\n  font-family: "Jalnan Gothic";\n  /* TODO: \ud3f0\ud2b8 \uc801\uc6a9 \ud655\uc778  */\n  margin-left: 20px;\n  margin-top: 190px;\n  white-space: pre-line; /* \uc904\ubc14\uafc8 \uc801\uc6a9 */\n'])));Si.div(Gi||(Gi=o(['\n  font-size: 14px;\n  color: #fff;\n  margin-left: 20px;\n  font-family: "Pretendard";\n'])));const Xi=function(e){const t=et();return(0,Ii.jsxs)(Wi,{onClick:()=>t("/FestivalDetail/".concat(e.id)),url:e.imgUrl,children:[(0,Ii.jsxs)(Qi,{children:[(0,Ii.jsx)(Yi,{children:e.pagenum})," / ",e.length]}),(0,Ii.jsx)(Ji,{children:e.title})]})};var $i,Zi,eo;const to=Si.div($i||($i=o(["\n  display: flex;\n  padding-left: 18px;\n  overflow-x: hidden;\n  -ms-overflow-style: none; /* Internet Explorer 10+ */\n  scrollbar-width: none; /* Firefox */\n\n  &::-webkit-scrollbar {\n    display: none; /* Safari and Chrome */\n  }\n"]))),no=(Si.div(Zi||(Zi=o(['\n  font-family: "Jalnan Gothic";\n  white-space: pre-line; /* \uc904\ubc14\uafc8 \uc801\uc6a9 */\n']))),Si.div(eo||(eo=o(["\n  display: flex;\n  transition: transform 0.5s ease-in-out;\n  transform: translateX(","px);\n"])),(e=>e.translateValue)));const ro=function(e){let{list:n}=e;const[r,i]=(0,t.useState)(0),[o,s]=(0,t.useState)(0),a=(0,t.useRef)(null),l=(0,t.useRef)(null);return(0,t.useEffect)((()=>{l.current&&s(l.current.offsetWidth)}),[n]),(0,t.useEffect)((()=>{const e=setInterval((()=>{i((e=>{const t=e-o;return Math.abs(t)>=o*n.length?0:t}))}),3e3);return()=>clearInterval(e)}),[o,n.length]),(0,Ii.jsx)(to,{ref:a,children:(0,Ii.jsx)(no,{translateValue:r,children:n.map(((e,t)=>(0,Ii.jsx)("div",{ref:l,children:(0,Ii.jsx)(Xi,{length:n.length,pagenum:t+1,title:e.title,subtitle:"\uc2dc\ud654 \uc911\uc2ec \ud574\uc591\ub808\uc800 \uccb4\ud5d8",imgUrl:e.backgroundUrl,id:e.id})},t)))})})};var io;const oo=Si.button(io||(io=o(["\n  font-size: 16px;\n  border-radius: 50px;\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",';\n  padding: 10px 16px;\n  line-height: 24px;\n\n  font-family: "Pretendard";\n  font-weight: 500;\n  text-align: center;\n\n  display: inline-block; // \ubc84\ud2bc\uc774 \ub0b4\uc6a9\uc5d0 \ub530\ub77c \ud06c\uae30\uac00 \uc870\uc815\ub418\ub3c4\ub85d \ud568\n  width: auto; // \ub108\ube44\ub97c \ub0b4\uc6a9\uc5d0 \ub9de\uac8c \uc790\ub3d9\uc73c\ub85c \uc870\uc815\n'])),(e=>e.backcolor),(e=>e.bordercolor),(e=>e.fontcolor));const so=function(e){const{title:t,isClicked:n,onClick:r}=e;return(0,Ii.jsxs)(oo,{backcolor:n?"#5C67DC":"#fff",bordercolor:n?"":"#ccc",fontcolor:n?"#fff":"#ccc",onClick:r,children:["#",t||null]})};var ao;const lo=Si.ul(ao||(ao=o(['\n  display: flex;\n  flex-wrap: nowrap;\n  margin: 0;\n  padding: 0;\n  gap: 8px;\n  margin-left: 28px;\n  overflow-x: auto;\n  font-family: "Pretendard";\n  list-style: none;\n  white-space: nowrap;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n'])));const co=function(e){let{filter:t,setFilter:n}=e;return(0,Ii.jsx)(lo,{children:["\uac00\uc871\uacfc \ud568\uaed8","\uce5c\uad6c\uc640 \ud568\uaed8","\ud65c\uae30\ucc2c","\ucc28\ubd84\ud55c","\ub2e4\ucc44\ub85c\uc6b4"].map(((e,r)=>(0,Ii.jsx)(so,{title:e,isClicked:e===t,onClick:()=>n(e)},r)))})};var uo,ho,fo,po,go,mo,vo,yo,wo,bo,_o,xo,Eo,So,To;const ko=Si.div(uo||(uo=o(["\n  box-sizing: border-box;\n  width: 334px;\n  height: 149px;\n  border-radius: 16px;\n  background-color: #fff;\n  padding: 16px;\n  padding-bottom: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  border: 1px solid rgba(204, 204, 204, 0.16);\n  box-shadow: 0 0 12px 0 rgba(92, 103, 220, 6%);\n"]))),Io=Si.div(ho||(ho=o(["\n  color: #ccc;\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n  margin-bottom: 12px;\n  line-height: 16px;\n  align-items: center;\n  font-size: 10px;\n  gap: 2px;\n\n  height: 16px;\n"]))),Co=Si.p(fo||(fo=o(["\n  display: flex;\n  align-items: center;\n"]))),Ao=Si.p(po||(po=o(["\n  display: flex;\n  align-items: center;\n"]))),Ro=Si.div(go||(go=o(["\n  display: flex;\n  flex-direction: row;\n  width: 302px;\n  justify-content: start;\n"]))),Po=Si.div(mo||(mo=o(["\n  margin-right: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 197px;\n  height: 117px;\n"]))),No=Si.p(vo||(vo=o(['\n  font-size: 16px;\n  font-weight: 500;\n  margin-bottom: 8px;\n  color: #222222;\n  line-height: 16px;\n\n  font-family: "Pretendard";\n  font-weight: 600;\n  margin-top: 0px;\n']))),Do=Si.p(yo||(yo=o(['\n  font-size: 12px;\n  font-weight: 300;\n  color: #444444;\n  line-height: 12px;\n\n  font-family: "Pretendard";\n  line-height: 160%;\n  margin-top: 0px;\n  margin-bottom: 8px;\n']))),Oo=(Si.div(wo||(wo=o([""]))),Si.img(bo||(bo=o(["\n  border-radius: 16px;\n  width: 89px;\n  height: 89px;\n"])))),Lo=Si.div(_o||(_o=o(["\n  background: #f5f6f8;\n  border-radius: 4px;\n  margin-left: 0px;\n  padding: 4px 8px;\n\n  display: flex;\n  justify-content: left;\n"]))),Mo=Si.div(xo||(xo=o(["\n  background: #f5f6f8;\n  border-radius: 4px;\n  margin-left: 4px;\n  padding: 4px 8px;\n\n  display: flex;\n  justify-content: left;\n"]))),Fo=Si.div(Eo||(Eo=o(['\n  width: 12px;\n  height: 12px;\n  margin-right: 4px;\n  background: url("https://i.postimg.cc/HxTkHdy2/image-88.png");\n  background-size: contain;\n  background-repeat: no-repeat;\n']))),Uo=Si.div(So||(So=o(['\n  font-size: 8px;\n  color: #444;\n  line-height: 12px;\n\n  font-family: "Pretendard";\n']))),jo=Si.div(To||(To=o(["\n  display: flex;\n  justify-content: left;\n  /* align-items: center; */\n  margin-left: 0px;\n  margin-top: 0px;\n"])));const zo=function(e){let{title:t,festival:n,review:r,rating:i,onClickEvent:o,keyword:s,img:a}=e;return(0,Ii.jsxs)(ko,{onClick:o,children:[(0,Ii.jsxs)(Io,{children:[(0,Ii.jsxs)(Co,{children:[(0,Ii.jsx)("img",{src:"https://i.postimg.cc/tJsWzqJk/star.png",width:"16px",height:"16px"}),i]}),(0,Ii.jsx)("p",{children:"\xb7"}),(0,Ii.jsx)(Ao,{children:n})]}),(0,Ii.jsxs)(Ro,{children:[(0,Ii.jsxs)(Po,{children:[(0,Ii.jsx)(No,{children:t}),(0,Ii.jsx)(Do,{children:r.slice(0,12)}),(0,Ii.jsxs)(jo,{children:[(0,Ii.jsxs)(Lo,{children:[(0,Ii.jsx)(Fo,{}),(0,Ii.jsx)(Uo,{children:s[0]})]}),s.length>1&&(0,Ii.jsx)(Mo,{children:(0,Ii.jsxs)(Uo,{children:["+",s.length-1]})})]})]}),a&&(0,Ii.jsx)(Oo,{src:a})]})]})};var Bo;const Vo=Si.div(Bo||(Bo=o(["\n  margin: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n"])));const qo=function(e){let{ReviewList:t}=e;const n=et();return(0,Ii.jsxs)(Vo,{children:[t.map((e=>(0,Ii.jsx)(zo,{title:e.title,review:e.review,festival:e.festival,rating:e.rating,keyword:e.keyWord,img:e.image,onClickEvent:()=>n("/ReviewDetail/".concat(e.id))},e.id))),0===t.length&&(0,Ii.jsx)("div",{children:"\ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})};var Ho,Ko;const Go=Si.button(Ho||(Ho=o(['\n  width: 334px;\n  height: 54px;\n  font-size: 16px;\n  font-family: "Pretendard";\n  font-weight: ',";\n  box-sizing: border-box;\n  color: ",";\n  background-color: ",";\n  border: 0.5px solid ",";\n  border-radius: 500px;\n  cursor: pointer;\n"])),(e=>e.fontWeight||400),(e=>e.fontcolor),(e=>e.backgroundcolor),(e=>e.bordercolor)),Wo=Si.img(Ko||(Ko=o(["\n  margin-left: 10px;\n"])));const Qo=function(e){let{color:t,backgroundcolor:n,bordercolor:r,fontWeight:i,title:o,onClick:s}=e;return(0,Ii.jsxs)(Go,{fontcolor:t,backgroundcolor:n,bordercolor:r,fontWeight:i,onClick:s,children:[o,(0,Ii.jsx)(Wo,{})]})},Yo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Jo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Yo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Xo;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Xo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $o=function(e){return function(e){const t=Yo(e);return Jo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Zo=function(e){try{return Jo.decodeString(e,!0)}catch(CM){console.error("base64Decode failed: ",CM)}return null};function es(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=es(e[n],t[n]));return e}const ts=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ns=()=>{try{return ts()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(CM){return}const t=e&&Zo(e[1]);return t&&JSON.parse(t)})()}catch(CM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(CM))}},rs=()=>{var e;return null===(e=ns())||void 0===e?void 0:e.config};class is{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function os(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$o(JSON.stringify({alg:"none",type:"JWT"})),$o(JSON.stringify(o)),""].join(".")}function ss(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function as(){var e;const t=null===(e=ns())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(CM){return!1}}function ls(){return"object"===typeof self&&self.self===self}function cs(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function us(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function hs(){const e=ss();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ds(){return!as()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fs(){try{return"object"===typeof indexedDB}catch(CM){return!1}}class ps extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gs.prototype.create)}}class gs{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ms,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ps(n,o,t)}}const ms=/\{\$([^}]+)}/g;function vs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ys(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ws(n)&&ws(o)){if(!ys(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ws(e){return null!==e&&"object"===typeof e}function bs(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function _s(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function xs(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Es(e,t){const n=new Ss(e,t);return n.subscribe.bind(n)}class Ss{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ts),void 0===r.error&&(r.error=Ts),void 0===r.complete&&(r.complete=Ts);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(CM){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(CM){"undefined"!==typeof console&&console.error&&console.error(CM)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ts(){}function ks(e){return e&&e._delegate?e._delegate:e}class Is{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cs="[DEFAULT]";class As{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new is;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(CM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(CM){if(r)return null;throw CM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch(CM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(CM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rs(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Rs(e){return e===Cs?void 0:e}class Ps{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new As(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ns=[];var Ds;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ds||(Ds={}));const Os={debug:Ds.DEBUG,verbose:Ds.VERBOSE,info:Ds.INFO,warn:Ds.WARN,error:Ds.ERROR,silent:Ds.SILENT},Ls=Ds.INFO,Ms={[Ds.DEBUG]:"log",[Ds.VERBOSE]:"log",[Ds.INFO]:"info",[Ds.WARN]:"warn",[Ds.ERROR]:"error"},Fs=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ms[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Us{constructor(e){this.name=e,this._logLevel=Ls,this._logHandler=Fs,this._userLogHandler=null,Ns.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ds))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Os[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ds.DEBUG,...t),this._logHandler(this,Ds.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ds.VERBOSE,...t),this._logHandler(this,Ds.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ds.INFO,...t),this._logHandler(this,Ds.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ds.WARN,...t),this._logHandler(this,Ds.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ds.ERROR,...t),this._logHandler(this,Ds.ERROR,...t)}}const js=(e,t)=>t.some((t=>e instanceof t));let zs,Bs;const Vs=new WeakMap,qs=new WeakMap,Hs=new WeakMap,Ks=new WeakMap,Gs=new WeakMap;let Ws={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Hs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Qs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bs||(Bs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xs(this),n),Js(Vs.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Js(e.apply(Xs(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Xs(this),t,...r);return Hs.set(o,t.sort?t.sort():[t]),Js(o)}}function Ys(e){return"function"===typeof e?Qs(e):(e instanceof IDBTransaction&&function(e){if(qs.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));qs.set(e,t)}(e),js(e,zs||(zs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ws):e)}function Js(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Js(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Vs.set(t,e)})).catch((()=>{})),Gs.set(t,e),t}(e);if(Ks.has(e))return Ks.get(e);const t=Ys(e);return t!==e&&(Ks.set(e,t),Gs.set(t,e)),t}const Xs=e=>Gs.get(e);const $s=["get","getKey","getAll","getAllKeys","count"],Zs=["put","add","delete","clear"],ea=new Map;function ta(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ea.get(t))return ea.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$s.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return ea.set(t,o),o}Ws=(e=>({...e,get:(t,n,r)=>ta(t,n)||e.get(t,n,r),has:(t,n)=>!!ta(t,n)||e.has(t,n)}))(Ws);class na{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ra="@firebase/app",ia="0.10.4",oa=new Us("@firebase/app"),sa="@firebase/app-compat",aa="@firebase/analytics-compat",la="@firebase/analytics",ca="@firebase/app-check-compat",ua="@firebase/app-check",ha="@firebase/auth",da="@firebase/auth-compat",fa="@firebase/database",pa="@firebase/database-compat",ga="@firebase/functions",ma="@firebase/functions-compat",va="@firebase/installations",ya="@firebase/installations-compat",wa="@firebase/messaging",ba="@firebase/messaging-compat",_a="@firebase/performance",xa="@firebase/performance-compat",Ea="@firebase/remote-config",Sa="@firebase/remote-config-compat",Ta="@firebase/storage",ka="@firebase/storage-compat",Ia="@firebase/firestore",Ca="@firebase/vertexai-preview",Aa="@firebase/firestore-compat",Ra="firebase",Pa="[DEFAULT]",Na={[ra]:"fire-core",[sa]:"fire-core-compat",[la]:"fire-analytics",[aa]:"fire-analytics-compat",[ua]:"fire-app-check",[ca]:"fire-app-check-compat",[ha]:"fire-auth",[da]:"fire-auth-compat",[fa]:"fire-rtdb",[pa]:"fire-rtdb-compat",[ga]:"fire-fn",[ma]:"fire-fn-compat",[va]:"fire-iid",[ya]:"fire-iid-compat",[wa]:"fire-fcm",[ba]:"fire-fcm-compat",[_a]:"fire-perf",[xa]:"fire-perf-compat",[Ea]:"fire-rc",[Sa]:"fire-rc-compat",[Ta]:"fire-gcs",[ka]:"fire-gcs-compat",[Ia]:"fire-fst",[Aa]:"fire-fst-compat",[Ca]:"fire-vertex","fire-js":"fire-js",[Ra]:"fire-js-all"},Da=new Map,Oa=new Map,La=new Map;function Ma(e,t){try{e.container.addComponent(t)}catch(CM){oa.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),CM)}}function Fa(e,t){e.container.addOrOverwriteComponent(t)}function Ua(e){const t=e.name;if(La.has(t))return oa.debug("There were multiple attempts to register component ".concat(t,".")),!1;La.set(t,e);for(const n of Da.values())Ma(n,e);for(const n of Oa.values())Ma(n,e);return!0}function ja(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function za(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pa;ja(e,t).clearInstance(n)}function Ba(e){return void 0!==e.options}function Va(e){return void 0!==e.settings}function qa(){La.clear()}const Ha=new gs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ka{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Is("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}class Ga extends Ka{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Za(ra,ia,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){$a(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ha.create("server-app-deleted")}}const Wa="10.12.1";function Qa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pa,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ha.create("bad-app-name",{appName:String(i)});if(n||(n=rs()),!n)throw Ha.create("no-options");const o=Da.get(i);if(o){if(ys(n,o.options)&&ys(r,o.config))return o;throw Ha.create("duplicate-app",{appName:i})}const s=new Ps(i);for(const l of La.values())s.addComponent(l);const a=new Ka(n,r,s);return Da.set(i,a),a}function Ya(e,t){if(ls())throw Ha.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Ba(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ha.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const s=Oa.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const a=new Ps(i);for(const c of La.values())a.addComponent(c);const l=new Ga(n,t,i,a);return Oa.set(i,l),l}function Ja(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa;const t=Da.get(e);if(!t&&e===Pa&&rs())return Qa();if(!t)throw Ha.create("no-app",{appName:e});return t}function Xa(){return Array.from(Da.values())}async function $a(e){let t=!1;const n=e.name;if(Da.has(n))t=!0,Da.delete(n);else if(Oa.has(n)){e.decRefCount()<=0&&(Oa.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Za(e,t,n){var r;let i=null!==(r=Na[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void oa.warn(e.join(" "))}Ua(new Is("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function el(e,t){if(null!==e&&"function"!==typeof e)throw Ha.create("invalid-log-argument");!function(e,t){for(const n of Ns){let r=null;t&&t.level&&(r=Os[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Ds[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function tl(e){var t;t=e,Ns.forEach((e=>{e.setLogLevel(t)}))}const nl="firebase-heartbeat-database",rl=1,il="firebase-heartbeat-store";let ol=null;function sl(){return ol||(ol=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Js(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Js(s.result),e.oldVersion,e.newVersion,Js(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(nl,rl,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(il)}catch(CM){console.warn(CM)}}}).catch((e=>{throw Ha.create("idb-open",{originalErrorMessage:e.message})}))),ol}async function al(e,t){try{const n=(await sl()).transaction(il,"readwrite"),r=n.objectStore(il);await r.put(t,ll(e)),await n.done}catch(CM){if(CM instanceof ps)oa.warn(CM.message);else{const t=Ha.create("idb-set",{originalErrorMessage:null===CM||void 0===CM?void 0:CM.message});oa.warn(t.message)}}}function ll(e){return"".concat(e.name,"!").concat(e.options.appId)}class cl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hl(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ul();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ul(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),dl(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dl(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=$o(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ul(){return(new Date).toISOString().substring(0,10)}class hl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fs()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await sl()).transaction(il),n=await t.objectStore(il).get(ll(e));return await t.done,n}catch(CM){if(CM instanceof ps)oa.warn(CM.message);else{const t=Ha.create("idb-get",{originalErrorMessage:null===CM||void 0===CM?void 0:CM.message});oa.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return al(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return al(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dl(e){return $o(JSON.stringify({version:2,heartbeats:e})).length}var fl;fl="",Ua(new Is("platform-logger",(e=>new na(e)),"PRIVATE")),Ua(new Is("heartbeat",(e=>new cl(e)),"PRIVATE")),Za(ra,ia,fl),Za(ra,ia,"esm2017"),Za("fire-js","");class pl{constructor(e,t){this._delegate=e,this.firebase=t,Ma(e,new Is("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),$a(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ma(this._delegate,e)}_addOrOverwriteComponent(e){Fa(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gl=new gs("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ml=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Qa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(vs(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Za,setLogLevel:tl,onLog:el,apps:null,SDK_VERSION:Wa,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(Ua(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw gl.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&es(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!vs(n,e=e||Pa))throw gl.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(pl);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){es(n,e)},createSubscribe:Es,ErrorFactory:gs,deepExtend:es}),n}(),vl=new Us("@firebase/app-compat");if(ls()&&void 0!==self.firebase){vl.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&vl.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yl=ml;!function(e){Za("@firebase/app-compat","0.2.34",e)}();yl.registerVersion("firebase","10.12.1","app-compat");const wl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},bl="EMAIL_SIGNIN",_l="PASSWORD_RESET",xl="RECOVER_EMAIL",El="REVERT_SECOND_FACTOR_ADDITION",Sl="VERIFY_AND_CHANGE_EMAIL",Tl="VERIFY_EMAIL";function kl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Il=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Cl=kl,Al=new gs("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rl=new Us("@firebase/auth");function Pl(e){if(Rl.logLevel<=Ds.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rl.error("Auth (".concat(Wa,"): ").concat(e),...n)}}function Nl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fl(e,...n)}function Dl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fl(e,...n)}function Ol(e,t,n){const r=Object.assign(Object.assign({},Cl()),{[t]:n});return new gs("auth","Firebase",r).create(t,{appName:e.name})}function Ll(e){return Ol(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ml(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Nl(e,"argument-error"),Ol(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Al.create(e,...n)}function Ul(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Fl(t,...r)}}function jl(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Pl(t),new Error(t)}function zl(e,t){e||jl(t)}function Bl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vl(){return"http:"===ql()||"https:"===ql()}function ql(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Hl{constructor(e,t){this.shortDelay=e,this.longDelay=t,zl(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ss())||us()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vl()||cs()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kl(e,t){zl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gl{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void jl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void jl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void jl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ql=new Hl(3e4,6e4);function Yl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jl(e,t,n,r){return Xl(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=bs(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Gl.fetch()(Zl(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Xl(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wl),t);try{const t=new tc(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nc(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw nc(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw nc(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw nc(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ol(e,a,s);Nl(e,a)}}catch(CM){if(CM instanceof ps)throw CM;Nl(e,"network-request-failed",{message:String(CM)})}}async function $l(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Jl(e,t,n,r,i);return"mfaPendingCredential"in o&&Nl(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Zl(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Kl(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function ec(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tc{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Dl(this.auth,"network-request-failed"))),Ql.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function nc(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dl(e,t,r);return i.customData._tokenResponse=n,i}function rc(e){return void 0!==e&&void 0!==e.getResponse}function ic(e){return void 0!==e&&void 0!==e.enterprise}class oc{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ec(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function sc(e,t){return Jl(e,"GET","/v2/recaptchaConfig",Yl(e,t))}async function ac(e,t){return Jl(e,"POST","/v1/accounts:lookup",t)}function lc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(CM){}}function cc(e){return 1e3*Number(e)}function uc(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Pl("JWT malformed, contained fewer than 3 sections"),null;try{const e=Zo(n);return e?JSON.parse(e):(Pl("Failed to decode base64 JWT payload"),null)}catch(CM){return Pl("Caught error parsing JWT payload as JSON",null===CM||void 0===CM?void 0:CM.toString()),null}}function hc(e){const t=uc(e);return Ul(t,"internal-error"),Ul("undefined"!==typeof t.exp,"internal-error"),Ul("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function dc(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(CM){throw CM instanceof ps&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(CM)&&e.auth.currentUser===e&&await e.auth.signOut(),CM}}class fc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(CM){return void((null===CM||void 0===CM?void 0:CM.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class pc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gc(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dc(e,ac(n,{idToken:r}));Ul(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?mc(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new pc(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function mc(e){return e.map((e=>{var{providerId:t}=e,n=Nt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ul(e.idToken,"internal-error"),Ul("undefined"!==typeof e.idToken,"internal-error"),Ul("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):hc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ul(0!==e.length,"internal-error");const t=hc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ul(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Xl(e,{},(async()=>{const n=bs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Zl(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Gl.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new vc;return n&&(Ul("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Ul("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Ul("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return jl("not implemented")}}function yc(e,t){Ul("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Nt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dc(this,this.stsTokenManager.getToken(this.auth,e));return Ul(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ks(e),r=await n.getIdToken(t),i=uc(r);Ul(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:lc(cc(i.auth_time)),issuedAtTime:lc(cc(i.iat)),expirationTime:lc(cc(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ks(e);await gc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ul(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ul(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await gc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Va(this.auth.app))return Promise.reject(Ll(this.auth));const e=await this.getIdToken();return await dc(this,async function(e,t){return Jl(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:x}=t;Ul(y&&x,e,"internal-error");const E=vc.fromJSON(this.name,x);Ul("string"===typeof y,e,"internal-error"),yc(u,e.name),yc(h,e.name),Ul("boolean"===typeof w,e,"internal-error"),Ul("boolean"===typeof b,e,"internal-error"),yc(d,e.name),yc(f,e.name),yc(p,e.name),yc(g,e.name),yc(m,e.name),yc(v,e.name);const S=new wc({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new vc;r.updateFromServerResponse(t);const i=new wc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await gc(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ul(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?mc(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new vc;s.updateFromIdToken(n);const a=new wc({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new pc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const bc=new Map;function _c(e){zl(e instanceof Function,"Expected a class definition");let t=bc.get(e);return t?(zl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bc.set(e,t),t)}class xc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xc.type="NONE";const Ec=xc;function Sc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Tc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Sc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Sc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Tc(_c(Ec),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||_c(Ec);const o=Sc(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=wc._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Tc(i,e,n)):new Tc(i,e,n)}}function kc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ic(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nc(t))return"Blackberry";if(Dc(t))return"Webos";if(Cc(t))return"Safari";if((t.includes("chrome/")||Ac(t))&&!t.includes("edge/"))return"Chrome";if(Pc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/firefox\//i.test(e)}function Cc(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ac(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/crios\//i.test(e)}function Rc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/iemobile/i.test(e)}function Pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/android/i.test(e)}function Nc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/blackberry/i.test(e)}function Dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/webos/i.test(e)}function Oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return Oc(e)||Pc(e)||Dc(e)||Nc(e)||/windows phone/i.test(e)||Rc(e)}function Mc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=kc(ss());break;case"Worker":t="".concat(kc(ss()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wa,"/").concat(r)}class Fc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(CM){r(CM)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(CM){t.reverse();for(const n of t)try{n()}catch(Gn){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===CM||void 0===CM?void 0:CM.message})}}}class Uc{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class jc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bc(this),this.idTokenSubscription=new Bc(this),this.beforeStateQueue=new Fc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Al,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_c(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Tc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(CM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ac(this,{idToken:e}),n=await wc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Va(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(CM){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(CM)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ul(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(CM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(CM){if((null===CM||void 0===CM?void 0:CM.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Va(this.app))return Promise.reject(Ll(this));const t=e?ks(e):null;return t&&Ul(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ul(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Va(this.app)?Promise.reject(Ll(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Va(this.app)?Promise.reject(Ll(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(_c(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Jl(e,"GET","/v2/passwordPolicy",Yl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Uc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gs("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jl(e,"POST","/v2/accounts:revokeToken",Yl(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_c(e)||this._popupRedirectResolver;Ul(t,this,"argument-error"),this.redirectPersistenceManager=await Tc.create(this,[_c(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ul(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ul(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rl.logLevel<=Ds.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rl.warn("Auth (".concat(Wa,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function zc(e){return ks(e)}class Bc{constructor(e){this.auth=e,this.observer=null,this.addObserver=Es((e=>this.observer=e))}get next(){return Ul(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qc(e){return Vc.loadJS(e)}function Hc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Kc{constructor(e){this.type="recaptcha-enterprise",this.auth=zc(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ic(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{sc(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new oc(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ic(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Vc.recaptchaEnterpriseScript;0!==t.length&&(t+=i),qc(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Gc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Kc(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Wc(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Gc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Gc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Qc(e,t,n){const r=zc(e);Ul(r._canInitEmulator,r,"emulator-config-failed"),Ul(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Yc(t),{host:s,port:a}=function(e){const t=Yc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Jc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Jc(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Jc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jl("not implemented")}_getIdTokenResponse(e){return jl("not implemented")}_linkToIdToken(e,t){return jl("not implemented")}_getReauthenticationResolver(e){return jl("not implemented")}}async function $c(e,t){return Jl(e,"POST","/v1/accounts:resetPassword",Yl(e,t))}async function Zc(e,t){return Jl(e,"POST","/v1/accounts:signUp",t)}async function eu(e,t){return $l(e,"POST","/v1/accounts:signInWithPassword",Yl(e,t))}async function tu(e,t){return Jl(e,"POST","/v1/accounts:sendOobCode",Yl(e,t))}async function nu(e,t){return tu(e,t)}async function ru(e,t){return tu(e,t)}class iu extends Xc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t){return new iu(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Wc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eu);case"emailLink":return async function(e,t){return $l(e,"POST","/v1/accounts:signInWithEmailLink",Yl(e,t))}(e,{email:this._email,oobCode:this._password});default:Nl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Wc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zc);case"emailLink":return async function(e,t){return $l(e,"POST","/v1/accounts:signInWithEmailLink",Yl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Nl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ou(e,t){return $l(e,"POST","/v1/accounts:signInWithIdp",Yl(e,t))}class su extends Xc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new su(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Nt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new su(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return ou(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ou(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ou(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bs(t)}return e}}const au={USER_NOT_FOUND:"user-not-found"};class lu extends Xc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return $l(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await $l(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,t));if(n.temporaryProof)throw nc(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return $l(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),au)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lu({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class cu{constructor(e){var t,n,r,i,o,s;const a=_s(xs(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ul(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=_s(xs(e)).link,n=t?_s(xs(t)).deep_link_id:null,r=_s(xs(e)).deep_link_id;return(r?_s(xs(r)).link:null)||r||n||t||e}(e);try{return new cu(t)}catch(n){return null}}}class uu{constructor(){this.providerId=uu.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cu.parseLink(t);return Ul(n,"argument-error"),iu._fromEmailAndCode(e,n.code,n.tenantId)}}uu.PROVIDER_ID="password",uu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",uu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class du extends hu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fu extends du{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Ul("providerId"in t&&"signInMethod"in t,"argument-error"),su._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ul(e.idToken||e.accessToken,"argument-error"),su._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new fu(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(CM){return null}}}class pu extends du{constructor(){super("facebook.com")}static credential(e){return su._fromParams({providerId:pu.PROVIDER_ID,signInMethod:pu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pu.credentialFromTaggedObject(e)}static credentialFromError(e){return pu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pu.credential(t.oauthAccessToken)}catch(n){return null}}}pu.FACEBOOK_SIGN_IN_METHOD="facebook.com",pu.PROVIDER_ID="facebook.com";class gu extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return su._fromParams({providerId:gu.PROVIDER_ID,signInMethod:gu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gu.credentialFromTaggedObject(e)}static credentialFromError(e){return gu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gu.credential(n,r)}catch(i){return null}}}gu.GOOGLE_SIGN_IN_METHOD="google.com",gu.PROVIDER_ID="google.com";class mu extends du{constructor(){super("github.com")}static credential(e){return su._fromParams({providerId:mu.PROVIDER_ID,signInMethod:mu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mu.credentialFromTaggedObject(e)}static credentialFromError(e){return mu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mu.credential(t.oauthAccessToken)}catch(n){return null}}}mu.GITHUB_SIGN_IN_METHOD="github.com",mu.PROVIDER_ID="github.com";class vu extends Xc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return ou(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ou(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ou(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new vu(n,i):null}static _create(e,t){return new vu(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yu extends hu{constructor(e){Ul(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return yu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return yu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vu.fromJSON(e);return Ul(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return vu._create(r,n)}catch(CM){return null}}}class wu extends du{constructor(){super("twitter.com")}static credential(e,t){return su._fromParams({providerId:wu.PROVIDER_ID,signInMethod:wu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wu.credentialFromTaggedObject(e)}static credentialFromError(e){return wu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return wu.credential(n,r)}catch(i){return null}}}async function bu(e,t){return $l(e,"POST","/v1/accounts:signUp",Yl(e,t))}wu.TWITTER_SIGN_IN_METHOD="twitter.com",wu.PROVIDER_ID="twitter.com";class _u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await wc._fromIdTokenResponse(e,n,r),o=xu(n);return new _u({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=xu(n);return new _u({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function xu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Eu extends ps{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Eu(e,t,n,r)}}function Su(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Eu._fromErrorAndOperation(e,n,t,r);throw n}))}function Tu(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ku(e,t){const n=ks(e);await Cu(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Tu(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await dc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _u._forOperation(e,"link",r)}async function Cu(e,t,n){await gc(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ul(Tu(t.providerData).has(n)===e,t.auth,r)}async function Au(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Va(r.app))return Promise.reject(Ll(r));const i="reauthenticate";try{const o=await dc(e,Su(r,i,t,e),n);Ul(o.idToken,r,"internal-error");const s=uc(o.idToken);Ul(s,r,"internal-error");const{sub:a}=s;return Ul(e.uid===a,r,"user-mismatch"),_u._forOperation(e,i,o)}catch(CM){throw(null===CM||void 0===CM?void 0:CM.code)==="auth/".concat("user-not-found")&&Nl(r,"user-mismatch"),CM}}async function Ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Va(e.app))return Promise.reject(Ll(e));const r="signIn",i=await Su(e,r,t),o=await _u._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Pu(e,t){return Ru(zc(e),t)}async function Nu(e,t){const n=ks(e);return await Cu(!1,n,t.providerId),Iu(n,t)}async function Du(e,t){return Au(ks(e),t)}async function Ou(e,t){if(Va(e.app))return Promise.reject(Ll(e));const n=zc(e),r=await async function(e,t){return $l(e,"POST","/v1/accounts:signInWithCustomToken",Yl(e,t))}(n,{token:t,returnSecureToken:!0}),i=await _u._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Lu{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Mu._fromServerResponse(e,t):"totpInfo"in t?Fu._fromServerResponse(e,t):Nl(e,"internal-error")}}class Mu extends Lu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Mu(t)}}class Fu extends Lu{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Fu(t)}}function Uu(e,t,n){var r;Ul((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ul("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ul(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ul(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ju(e){const t=zc(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zu(e,t){await async function(e,t){return Jl(e,"POST","/v1/accounts:update",Yl(e,t))}(ks(e),{oobCode:t})}async function Bu(e,t){const n=ks(e),r=await $c(n,{oobCode:t}),i=r.requestType;switch(Ul(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ul(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ul(r.mfaInfo,n,"internal-error");default:Ul(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Lu._fromServerResponse(zc(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Vu(e,t){const n={identifier:t,continueUri:Vl()?Bl():"http://localhost"},{signinMethods:r}=await async function(e,t){return Jl(e,"POST","/v1/accounts:createAuthUri",Yl(e,t))}(ks(e),n);return r||[]}async function qu(e,t){const n=ks(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Uu(n.auth,r,t);const{email:i}=await async function(e,t){return tu(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Hu(e,t,n){const r=ks(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Uu(r.auth,i,n);const{email:o}=await async function(e,t){return tu(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Ku(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ks(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await dc(i,async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Gu(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await dc(e,async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class Wu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Qu extends Wu{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Yu extends Wu{constructor(e,t){super(e,"facebook.com",t)}}class Ju extends Qu{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Xu extends Wu{constructor(e,t){super(e,"google.com",t)}}class $u extends Qu{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Zu(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=uc(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Wu(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Yu(o,i);case"github.com":return new Ju(o,i);case"google.com":return new Xu(o,i);case"twitter.com":return new $u(o,i,e.screenName||null);case"custom":case"anonymous":return new Wu(o,null);default:return new Wu(o,r,i)}}(n)}class eh{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new eh("enroll",e,t)}static _fromMfaPendingCredential(e){return new eh("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return eh._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return eh._fromIdtoken(e.multiFactorSession.idToken)}return null}}class th{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=zc(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Lu._fromServerResponse(n,e)));Ul(r.mfaPendingCredential,n,"internal-error");const o=eh._fromMfaPendingCredential(r.mfaPendingCredential);return new th(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await _u._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Ul(t.user,n,"internal-error"),_u._forOperation(t.user,t.operationType,s);default:Nl(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class nh{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Lu._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new nh(e)}async getSession(){return eh._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await dc(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await dc(this.user,function(e,t){return Jl(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Yl(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(CM){throw CM}}}const rh=new WeakMap;const ih="__sak";class oh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class sh extends oh{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ss();return Cc(e)||Oc(e)}()&&function(){try{return!(!window||window===window.top)}catch(CM){return!1}}(),this.fallbackToPolling=Lc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);hs()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sh.type="LOCAL";const ah=sh;class lh extends oh{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lh.type="SESSION";const ch=lh;class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new uh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function hh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}uh.receivers=[];class dh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=hh("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function fh(){return window}function ph(){return"undefined"!==typeof fh().WorkerGlobalScope&&"function"===typeof fh().importScripts}const gh="firebaseLocalStorageDb",mh="firebaseLocalStorage",vh="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function wh(e,t){return e.transaction([mh],t?"readwrite":"readonly").objectStore(mh)}function bh(){const e=indexedDB.open(gh,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(mh,{keyPath:vh})}catch(CM){n(CM)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(mh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(gh);return new yh(e).toPromise()}(),t(await bh()))}))}))}async function _h(e,t,n){const r=wh(e,!0).put({[vh]:t,value:n});return new yh(r).toPromise()}function xh(e,t){const n=wh(e,!0).delete(t);return new yh(n).toPromise()}class Eh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await bh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(CM){if(t++>3)throw CM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ph()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(ph()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new dh(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bh();return await _h(e,ih,"1"),await xh(e,ih),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_h(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=wh(e,!1).get(t),r=await new yh(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xh(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=wh(e,!1).getAll();return new yh(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Eh.type="LOCAL";const Sh=Eh;const Th=1e12;class kh{constructor(e){this.auth=e,this.counter=Th,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ih(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Th;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Th;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Th;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ih{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Ul(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(CM){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(CM){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ch=Hc("rcb"),Ah=new Hl(3e4,6e4);class Rh{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=fh().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ul(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&rc(fh().grecaptcha)?Promise.resolve(fh().grecaptcha):new Promise(((n,r)=>{const i=fh().setTimeout((()=>{r(Dl(e,"network-request-failed"))}),Ah.get());fh()[Ch]=()=>{fh().clearTimeout(i),delete fh()[Ch];const o=fh().grecaptcha;if(!o||!rc(o))return void r(Dl(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};qc("".concat(Vc.recaptchaV2Script,"?").concat(bs({onload:Ch,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Dl(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=fh().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ph{async load(e){return new kh(e)}clearedOneInstance(){}}const Nh="recaptcha",Dh={theme:"light",type:"image"};class Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Dh);this.parameters=n,this.type=Nh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zc(e),this.isInvisible="invisible"===this.parameters.size,Ul("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Ul(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ph:new Rh,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(CM){return Promise.reject(CM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Ul(!this.parameters.sitekey,this.auth,"argument-error"),Ul(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ul("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=fh()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Ul(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ul(Vl()&&!ph(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Jl(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Ul(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ul(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Lh{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Mh(e,t,n){var r;const i=await n.verify();try{let o;if(Ul("string"===typeof i,e,"argument-error"),Ul(n.type===Nh,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Ul("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Jl(e,"POST","/v2/accounts/mfaEnrollment:start",Yl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ul("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Ul(n,e,"missing-multi-factor-info");const s=await function(e,t){return Jl(e,"POST","/v2/accounts/mfaSignIn:start",Yl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jl(e,"POST","/v1/accounts:sendVerificationCode",Yl(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Fh{constructor(e){this.providerId=Fh.PROVIDER_ID,this.auth=zc(e)}verifyPhoneNumber(e,t){return Mh(this.auth,e,ks(t))}static credential(e,t){return lu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Fh.credentialFromTaggedObject(t)}static credentialFromError(e){return Fh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lu._fromTokenResponse(n,r):null}}function Uh(e,t){return t?_c(t):(Ul(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Fh.PROVIDER_ID="phone",Fh.PHONE_SIGN_IN_METHOD="phone";class jh extends Xc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ou(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ou(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ou(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zh(e){return Ru(e.auth,new jh(e),e.bypassAuthState)}function Bh(e){const{auth:t,user:n}=e;return Ul(n,t,"internal-error"),Au(n,new jh(e),e.bypassAuthState)}async function Vh(e){const{auth:t,user:n}=e;return Ul(n,t,"internal-error"),Iu(n,new jh(e),e.bypassAuthState)}class qh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(CM){this.reject(CM)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(CM){this.reject(CM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zh;case"linkViaPopup":case"linkViaRedirect":return Vh;case"reauthViaPopup":case"reauthViaRedirect":return Bh;default:Nl(this.auth,"internal-error")}}resolve(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hh=new Hl(2e3,1e4);class Kh extends qh{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Kh.currentPopupAction&&Kh.currentPopupAction.cancel(),Kh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ul(e,this.auth,"internal-error"),e}async onExecution(){zl(1===this.filter.length,"Popup operations only handle one event");const e=hh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Dl(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Dl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Dl(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Hh.get())};e()}}Kh.currentPopupAction=null;const Gh="pendingRedirect",Wh=new Map;class Qh extends qh{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=$h(t),r=Xh(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(CM){e=()=>Promise.reject(CM)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Yh(e,t){return Xh(e)._set($h(t),"true")}function Jh(e,t){Wh.set(e._key(),t)}function Xh(e){return _c(e._redirectPersistence)}function $h(e){return Sc(Gh,e.config.apiKey,e.name)}function Zh(e,t,n){return async function(e,t,n){if(Va(e.app))return Promise.reject(Ll(e));const r=zc(e);Ml(e,t,hu),await r._initializationPromise;const i=Uh(r,n);return await Yh(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ed(e,t,n){return async function(e,t,n){const r=ks(e);if(Ml(r.auth,t,hu),Va(r.auth.app))return Promise.reject(Ll(r.auth));await r.auth._initializationPromise;const i=Uh(r.auth,n);await Yh(i,r.auth);const o=await rd(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function td(e,t,n){return async function(e,t,n){const r=ks(e);Ml(r.auth,t,hu),await r.auth._initializationPromise;const i=Uh(r.auth,n);await Cu(!1,r,t.providerId),await Yh(i,r.auth);const o=await rd(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Va(e.app))return Promise.reject(Ll(e));const r=zc(e),i=Uh(r,t),o=new Qh(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function rd(e){const t=hh("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class id{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sd(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!sd(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(od(e))}saveEventToCache(e){this.cachedEventUids.add(od(e)),this.lastProcessedEventTime=Date.now()}}function od(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function sd(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ad(e){return Jl(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const ld=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cd=/^https?/;function ud(e){const t=Bl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!cd.test(n))return!1;if(ld.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hd=new Hl(3e4,6e4);function dd(){const e=fh().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fd(e){return new Promise(((t,n)=>{var r,i,o;function s(){dd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dd(),n(Dl(e,"network-request-failed"))},timeout:hd.get()})}if(null===(i=null===(r=fh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=fh().gapi)||void 0===o?void 0:o.load)){const t=Hc("iframefcb");return fh()[t]=()=>{gapi.load?s():n(Dl(e,"network-request-failed"))},qc("".concat(Vc.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw pd=null,e}))}let pd=null;const gd=new Hl(5e3,15e3),md="__/auth/iframe",vd="emulator/auth/iframe",yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bd(e){const t=e.config;Ul(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kl(t,vd):"https://".concat(e.config.authDomain,"/").concat(md),r={apiKey:t.apiKey,appName:e.name,v:Wa},i=wd.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(bs(r).slice(1))}async function _d(e){const t=await function(e){return pd=pd||fd(e),pd}(e),n=fh().gapi;return Ul(n,e,"internal-error"),t.open({where:document.body,url:bd(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yd,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Dl(e,"network-request-failed"),o=fh().setTimeout((()=>{r(i)}),gd.get());function s(){fh().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ed{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(CM){}}}function Sd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xd),{width:r.toString(),height:i.toString(),top:o,left:s}),c=ss().toLowerCase();n&&(a=Ac(c)?"_blank":n),Ic(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Oc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ed(null);const h=window.open(t||"",a,u);Ul(h,e,"popup-blocked");try{h.focus()}catch(CM){}return new Ed(h)}const Td="__/auth/handler",kd="emulator/auth/handler",Id=encodeURIComponent("fac");async function Cd(e,t,n,r,i,o){Ul(e.config.authDomain,e,"auth-domain-config-required"),Ul(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wa,eventId:i};if(t instanceof hu){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof du){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Id,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Td);return Kl(t,kd)}(e),"?").concat(bs(a).slice(1)).concat(c)}const Ad="webStorageSupport";const Rd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ch,this._completeRedirectFn=nd,this._overrideRedirectResult=Jh}async _openPopup(e,t,n,r){var i;zl(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Sd(e,await Cd(e,t,n,Bl(),r),hh())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){fh().location.href=e}(await Cd(e,t,n,Bl(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _d(e),n=new id(e);return t.register("authEvent",(t=>{Ul(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ad,{type:Ad},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ad];void 0!==i&&t(!!i),Nl(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ad(e);for(const r of t)try{if(ud(r))return}catch(n){}Nl(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lc()||Cc()||Oc()}};class Pd{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return jl("unexpected MultiFactorSessionType")}}}class Nd extends Pd{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Nd(e)}_finalizeEnroll(e,t,n){return function(e,t){return Jl(e,"POST","/v2/accounts/mfaEnrollment:finalize",Yl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Jl(e,"POST","/v2/accounts/mfaSignIn:finalize",Yl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Dd{constructor(){}static assertion(e){return Nd._fromCredential(e)}}Dd.FACTOR_ID="phone";var Od="@firebase/auth",Ld="1.7.3";class Md{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ul(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ns())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Fd;function Ud(){return window}Vc={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Dl("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fd="Browser",Ua(new Is("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ul(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Fd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mc(Fd)},c=new jc(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_c);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ua(new Is("auth-internal",(e=>(e=>new Md(e))(zc(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Za(Od,Ld,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Fd)),Za(Od,Ld,"esm2017");async function jd(e,t,n){var r;const{BuildInfo:i}=Ud();zl(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(zl(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return Oc()?s.ibi=i.packageName:Pc()?s.apn=i.packageName:Nl(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,Cd(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function zd(e){const{cordova:t}=Ud();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Bd=20;class Vd extends id{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function qd(e){const t=await Gd()._get(Wd(e));return t&&await Gd()._remove(Wd(e)),t}function Hd(e,t){var n,r;const i=function(e){const t=Qd(e),n=t.link?decodeURIComponent(t.link):void 0,r=Qd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Qd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Qd(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(CM){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?Dl(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Kd(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Bd;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Gd(){return _c(ah)}function Wd(e){return Sc("authEvent",e.config.apiKey,e.name)}function Qd(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return _s(n.join("?"))}const Yd=class{constructor(){this._redirectPersistence=ch,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nd,this._overrideRedirectResult=Jh}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Vd(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Nl(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,l,c,u;const h=Ud();Ul("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ul("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ul("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ul("function"===typeof(null===(l=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ul("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Wh.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Kd(),postBody:null,tenantId:e.tenantId,error:Dl(e,"no-auth-event")}}(e,n,r);await function(e,t){return Gd()._set(Wd(e),t)}(e,o);const s=await jd(e,o,t);return async function(e,t,n){const{cordova:r}=Ud();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{s(Dl(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Pc()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await zd(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ud(),n={};Oc()?n.iosBundleId=t.packageName:Pc()?n.androidPackageName=t.packageName:Nl(e,"operation-not-supported-in-this-environment"),await ad(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ud(),o=setTimeout((async()=>{await qd(e),t.onEvent(Jd())}),500),s=async n=>{clearTimeout(o);const r=await qd(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Hd(r,n.url)),t.onEvent(i||Jd())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Ud().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&s({url:e}),"function"===typeof a)try{a(e)}catch(CM){console.error(CM)}}}};function Jd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dl("no-auth-event")}}function Xd(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function $d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return!("file:"!==Xd()&&"ionic:"!==Xd()&&"capacitor:"!==Xd()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return hs()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/Edge\/\d+/.test(e)}(e)}function ef(){try{const e=self.localStorage,t=hh();if(e)return e.setItem(t,"1"),e.removeItem(t),!Zd()||fs()}catch(CM){return tf()&&fs()}return!1}function tf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function nf(){return("http:"===Xd()||"https:"===Xd()||cs()||$d())&&!(us()||as())&&ef()&&!tf()}function rf(){return $d()&&"undefined"!==typeof document}const of={LOCAL:"local",NONE:"none",SESSION:"session"},sf=Ul,af="persistence";async function lf(e){await e._initializationPromise;const t=cf(),n=Sc(af,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function cf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(CM){return null}}const uf=Ul;class hf{constructor(){this.browserResolver=_c(Rd),this.cordovaResolver=_c(Yd),this.underlyingResolver=null,this._redirectPersistence=ch,this._completeRedirectFn=nd,this._overrideRedirectResult=Jh}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return uf(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!rf()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function df(e){return e.unwrap()}function ff(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new vf(e,function(e,t){var n;const r=ks(e),i=t;return Ul(t.customData.operationType,r,"argument-error"),Ul(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),th._fromError(r,i)}(e,t))}else if(r){const e=pf(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function pf(e){const{_tokenResponse:t}=e instanceof ps?e.customData:e;if(!t)return null;if(!(e instanceof ps)&&"temporaryProof"in t&&"phoneNumber"in t)return Fh.credentialFromResult(e);const n=t.providerId;if(!n||n===wl.PASSWORD)return null;let r;switch(n){case wl.GOOGLE:r=gu;break;case wl.FACEBOOK:r=pu;break;case wl.GITHUB:r=mu;break;case wl.TWITTER:r=wu;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?vu._create(n,s):su._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new fu(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ps?r.credentialFromError(e):r.credentialFromResult(e)}function gf(e,t){return t.catch((t=>{throw t instanceof ps&&ff(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,pf(r)),additionalUserInfo:Zu(e),user:yf.getOrCreate(n)};var r}))}async function mf(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>gf(e,n.confirm(t))}}class vf{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gf(df(this.auth),this.resolver.resolveSignIn(e))}}class yf{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=ks(e);return rh.has(t)||rh.set(t,nh._fromUser(t)),rh.get(t)}(e)}static getOrCreate(e){return yf.USER_MAP.has(e)||yf.USER_MAP.set(e,new yf(e)),yf.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gf(this.auth,Nu(this._delegate,e))}async linkWithPhoneNumber(e,t){return mf(this.auth,async function(e,t,n){const r=ks(e);await Cu(!1,r,"phone");const i=await Mh(r.auth,t,ks(n));return new Lh(i,(e=>Nu(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return gf(this.auth,async function(e,t,n){const r=ks(e);Ml(r.auth,t,hu);const i=Uh(r.auth,n);return new Kh(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,hf))}async linkWithRedirect(e){return await lf(zc(this.auth)),td(this._delegate,e,hf)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gf(this.auth,Du(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return mf(this.auth,async function(e,t,n){const r=ks(e);if(Va(r.auth.app))return Promise.reject(Ll(r.auth));const i=await Mh(r.auth,t,ks(n));return new Lh(i,(e=>Du(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return gf(this.auth,async function(e,t,n){const r=ks(e);if(Va(r.auth.app))return Promise.reject(Dl(r.auth,"operation-not-supported-in-this-environment"));Ml(r.auth,t,hu);const i=Uh(r.auth,n);return new Kh(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,hf))}async reauthenticateWithRedirect(e){return await lf(zc(this.auth)),ed(this._delegate,e,hf)}sendEmailVerification(e){return qu(this._delegate,e)}async unlink(e){return await ku(this._delegate,e),this}updateEmail(e){return function(e,t){const n=ks(e);return Va(n.auth.app)?Promise.reject(Ll(n.auth)):Gu(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Gu(ks(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=ks(e);if(Va(n.auth.app))return Promise.reject(Ll(n.auth));await Iu(n,t)}(this._delegate,e)}updateProfile(e){return Ku(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Hu(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yf.USER_MAP=new WeakMap;const wf=Ul;class bf{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;wf(n,"invalid-api-key",{appName:e.name}),wf(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?hf:void 0;this._delegate=t.initialize({options:{persistence:xf(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Il),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Qc(this._delegate,e,t)}applyActionCode(e){return zu(this._delegate,e)}checkActionCode(e){return Bu(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await $c(ks(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ju(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gf(this._delegate,async function(e,t,n){if(Va(e.app))return Promise.reject(Ll(e));const r=zc(e),i=Wc(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bu),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ju(e),t})),s=await _u._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Vu(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=cu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){wf(nf(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await zc(e)._initializationPromise,nd(e,t,!1)}(this._delegate,hf);return e?gf(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){zc(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=_f(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=_f(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=zc(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Ul(t.handleCodeInApp,r,"argument-error"),t&&Uu(r,e,t)}(i,n),await Wc(r,i,"getOobCode",ru)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=zc(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Uu(r,i,n),await Wc(r,i,"getOobCode",nu)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){sf(Object.values(of).includes(t),e,"invalid-persistence-type"),us()?sf(t!==of.SESSION,e,"unsupported-persistence-type"):as()?sf(t===of.NONE,e,"unsupported-persistence-type"):tf()?sf(t===of.NONE||t===of.LOCAL&&fs(),e,"unsupported-persistence-type"):sf(t===of.NONE||ef(),e,"unsupported-persistence-type")}(this._delegate,e),e){case of.SESSION:t=ch;break;case of.LOCAL:t=await _c(Sh)._isAvailable()?Sh:ah;break;case of.NONE:t=Ec;break;default:return Nl("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gf(this._delegate,async function(e){var t;if(Va(e.app))return Promise.reject(Ll(e));const n=zc(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new _u({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bu(n,{returnSecureToken:!0}),i=await _u._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return gf(this._delegate,Pu(this._delegate,e))}signInWithCustomToken(e){return gf(this._delegate,Ou(this._delegate,e))}signInWithEmailAndPassword(e,t){return gf(this._delegate,function(e,t,n){return Va(e.app)?Promise.reject(Ll(e)):Pu(ks(e),uu.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ju(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return gf(this._delegate,async function(e,t,n){if(Va(e.app))return Promise.reject(Ll(e));const r=ks(e),i=uu.credentialWithLink(t,n||Bl());return Ul(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Pu(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return mf(this._delegate,async function(e,t,n){if(Va(e.app))return Promise.reject(Ll(e));const r=zc(e),i=await Mh(r,t,ks(n));return new Lh(i,(e=>Pu(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return wf(nf(),this._delegate,"operation-not-supported-in-this-environment"),gf(this._delegate,async function(e,t,n){if(Va(e.app))return Promise.reject(Dl(e,"operation-not-supported-in-this-environment"));const r=zc(e);Ml(e,t,hu);const i=Uh(r,n);return new Kh(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,hf))}async signInWithRedirect(e){return wf(nf(),this._delegate,"operation-not-supported-in-this-environment"),await lf(this._delegate),Zh(this._delegate,e,hf)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Bu(ks(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function _f(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&yf.getOrCreate(e)),error:t,complete:n}}function xf(e,t){const n=function(e,t){const n=cf();if(!n)return[];const r=Sc(af,e,t);switch(n.getItem(r)){case of.NONE:return[Ec];case of.LOCAL:return[Sh,ch];case of.SESSION:return[ch];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Sh)||n.push(Sh),"undefined"!==typeof window)for(const r of[ah,ch])n.includes(r)||n.push(r);return n.includes(Ec)||n.push(Ec),n}bf.Persistence=of;class Ef{constructor(){this.providerId="phone",this._delegate=new Fh(df(yl.auth()))}static credential(e,t){return Fh.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Ef.PHONE_SIGN_IN_METHOD=Fh.PHONE_SIGN_IN_METHOD,Ef.PROVIDER_ID=Fh.PROVIDER_ID;const Sf=Ul;class Tf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl.app();var r;Sf(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Oh(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var kf;(kf=yl).INTERNAL.registerComponent(new Is("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new bf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:bl,PASSWORD_RESET:_l,RECOVER_EMAIL:xl,REVERT_SECOND_FACTOR_ADDITION:El,VERIFY_AND_CHANGE_EMAIL:Sl,VERIFY_EMAIL:Tl}},EmailAuthProvider:uu,FacebookAuthProvider:pu,GithubAuthProvider:mu,GoogleAuthProvider:gu,OAuthProvider:fu,SAMLAuthProvider:yu,PhoneAuthProvider:Ef,PhoneMultiFactorGenerator:Dd,RecaptchaVerifier:Tf,TwitterAuthProvider:wu,Auth:bf,AuthCredential:Xc,Error:ps}).setInstantiationMode("LAZY").setMultipleInstances(!1)),kf.registerVersion("@firebase/auth-compat","0.5.8");var If,Cf,Af="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Rf={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);h(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(o)>>>16,m=65535&e.i(o);n[2*i+2*o]+=f*m,p(n,2*i+2*o),n[2*i+2*o+1]+=l*m,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*g,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*g,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Cf=Rf.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},If=Rf.Integer=r}).apply("undefined"!==typeof Af?Af:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Pf,Nf,Df,Of,Lf,Mf,Ff,Uf,jf,zf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bf={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zf&&zf];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){E(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function N(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(Un){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=q(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new j(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),K={};function G(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)G(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new B(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(o=e.g[t],n,r,i))&&(z(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[H]=null)):z(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){N.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;_(t=new D(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&V(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,N),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){N.call(this),this.h=e,this.g={}}h(le,N);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function we(){D.call(this,"c")}h(ye,D),h(we,D);var be={},_e=null;function xe(){return _e=_e||new ne}function Ee(e){D.call(this,be.La,e)}function Se(e){const t=xe();re(t,new Ee(t))}function Te(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=xe();re(t,new Te(t,e))}function Ie(e,t){D.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return he(n)}catch(jn){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Ee,D),be.STAT_EVENT="statevent",h(Te,D),be.Ma="timingevent",h(Ie,D),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Pe,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=ht(st(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),qe(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=G(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||ln(e.j,e)}function We(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(Ke(a),qe(a)),r.g=s}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Kt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=d||7==t||Se(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Gt(this.g);e="";var o=r.length,s=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){We(this),Ge(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),We(this),Ge(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ve(this,a),e==Ue){4==d&&(this.s=4,ke(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),on(h),h.M=!0,ke(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),Ge(this)}else Re(this.i,this.l,a,null),Qe(this,a);4==d&&We(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),We(this),Ge(this)}}}catch(Hn){}},Le.prototype.cancel=function(){this.J=!0,We(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),We(this),this.s=2,Ge(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){xt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return xt(e),t=kt(e,t),e.g.has(t)}function Tt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function It(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Un){}}function Ct(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(CM){throw t.push(r+"type="+encodeURIComponent("_badmap")),CM}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){xt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,St(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},h(Rt,pe),Rt.prototype.g=function(){return new Pt(this.l,this.j)},Rt.prototype.i=(gt={},function(){return gt}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&Nt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Ut=/^https?$/i,jt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Ut.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Kt(e)?e.g.statusText:""}catch(jn){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(CM){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Kn){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Jt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function Xt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||R(),C||(I(),C=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{At(a,e,"req"+n+"_")}catch(Hn){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||R(),C||(I(),C=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(st(t)),n.m=null,n.P=!0,ze(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Ie(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(It,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(It,n,"TestLoadImage: error",!1,t,r),r.onabort=u(It,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(It,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),It(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?It(0,0,!0,t):It(0,0,!1,t)})).catch((()=>{clearTimeout(r),It(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Rt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Un){return void zt(this,Un)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(Un){zt(this,Un)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let o=this.o;if(this.S&&(o?(o=w(o),_(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Lt(o)))+"&"+t:this.m&&Mt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Jt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,jf=Bf.createWebChannelTransport=function(){return new gn},Uf=Bf.getStatEventTarget=function(){return xe()},Ff=Bf.Event=be,Mf=Bf.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,Lf=Bf.ErrorCode=Ne,De.COMPLETE="complete",Of=Bf.EventType=De,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Df=Bf.WebChannel=me,Nf=Bf.FetchXmlHttpFactory=Rt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Pf=Bf.XhrIo=Ft}).apply("undefined"!==typeof zf?zf:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Vf="@firebase/firestore";class qf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qf.UNAUTHENTICATED=new qf(null),qf.GOOGLE_CREDENTIALS=new qf("google-credentials-uid"),qf.FIRST_PARTY=new qf("first-party-uid"),qf.MOCK_USER=new qf("mock-user");let Hf="10.12.1";const Kf=new Us("@firebase/firestore");function Gf(){return Kf.logLevel}function Wf(e){if(Kf.logLevel<=Ds.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.debug("Firestore (".concat(Hf,"): ").concat(e),...i)}}function Qf(e){if(Kf.logLevel<=Ds.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.error("Firestore (".concat(Hf,"): ").concat(e),...i)}}function Yf(e){if(Kf.logLevel<=Ds.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.warn("Firestore (".concat(Hf,"): ").concat(e),...i)}}function Jf(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Hf,") INTERNAL ASSERTION FAILED: ")+e;throw Qf(t),new Error(t)}function $f(e,t){e||Xf()}function Zf(e,t){return e}const ep={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tp extends ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class np{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class rp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ip{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qf.UNAUTHENTICATED)))}shutdown(){}}class op{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sp{constructor(e){this.t=e,this.currentUser=qf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new np;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new np,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Wf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Wf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new np)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Wf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?($f("string"==typeof t.accessToken),new rp(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $f(null===e||"string"==typeof e),new qf(e)}}class ap{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=qf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lp{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ap(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(qf.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class up{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Wf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Wf("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Wf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Wf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?($f("string"==typeof e.token),this.R=e.token,new cp(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hp(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=hp(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function fp(e,t){return e<t?-1:e>t?1:0}function pp(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gp(e){return e+"\0"}class mp{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tp(ep.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tp(ep.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new tp(ep.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tp(ep.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mp.fromMillis(Date.now())}static fromDate(e){return mp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new mp(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fp(this.nanoseconds,e.nanoseconds):fp(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vp{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vp(e)}static min(){return new vp(new mp(0,0))}static max(){return new vp(new mp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yp{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xf(),void 0===n?n=e.length-t:n>e.length-t&&Xf(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===yp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yp?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wp extends yp{construct(e,t,n){return new wp(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new tp(ep.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new wp(e)}static emptyPath(){return new wp([])}}const bp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _p extends yp{construct(e,t,n){return new _p(e,t,n)}static isValidIdentifier(e){return bp.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_p.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _p(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new tp(ep.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new tp(ep.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tp(ep.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new tp(ep.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _p(t)}static emptyPath(){return new _p([])}}class xp{constructor(e){this.path=e}static fromPath(e){return new xp(wp.fromString(e))}static fromName(e){return new xp(wp.fromString(e).popFirst(5))}static empty(){return new xp(wp.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wp.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wp.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xp(new wp(e.slice()))}}class Ep{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sp(e){return e.fields.find((e=>2===e.kind))}function Tp(e){return e.fields.filter((e=>2!==e.kind))}Ep.UNKNOWN_ID=-1;class kp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ip{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ip(0,Rp.min())}}function Cp(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vp.fromTimestamp(1e9===r?new mp(n+1,0):new mp(n,r));return new Rp(i,xp.empty(),t)}function Ap(e){return new Rp(e.readTime,e.key,-1)}class Rp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rp(vp.min(),xp.empty(),-1)}static max(){return new Rp(vp.max(),xp.empty(),-1)}}function Pp(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=xp.comparator(e.documentKey,t.documentKey),0!==n?n:fp(e.largestBatchId,t.largestBatchId))}const Np="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Op(e){if(e.code!==ep.FAILED_PRECONDITION||e.message!==Np)throw e;Wf("LocalStore","Unexpectedly lost primary lease")}class Lp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Lp(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Lp?t:Lp.resolve(t)}catch(e){return Lp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Lp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Lp.reject(t)}static resolve(e){return new Lp(((t,n)=>{t(e)}))}static reject(e){return new Lp(((t,n)=>{n(e)}))}static waitFor(e){return new Lp(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Lp.resolve(!1);for(const n of e)t=t.next((e=>e?Lp.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Lp(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Lp(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Mp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new np,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zp(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Kp(t.target.error);this.V.reject(new zp(e,n))}}static open(e,t,n,r){try{return new Mp(t,e.transaction(r,n))}catch(e){throw new zp(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Wf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Vp(t)}}class Fp{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Fp.S(ss())&&Qf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Wf("SimpleDb","Removing database:",e),qp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fs())return!1;if(Fp.C())return!0;const e=ss(),t=Fp.S(e),n=0<t&&t<10,r=Up(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Wf("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new zp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new tp(ep.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new tp(ep.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new zp(e,r))},r.onupgradeneeded=e=>{Wf("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Wf("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.M(e);const t=Mp.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Lp.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Wf("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Up(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class jp{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return qp(this.B.delete())}}class zp extends tp{constructor(e,t){super(ep.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Bp(e){return"IndexedDbTransactionError"===e.name}class Vp{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Wf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Wf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qp(n)}add(e){return Wf("SimpleDb","ADD",this.store.name,e,e),qp(this.store.add(e))}get(e){return qp(this.store.get(e)).next((t=>(void 0===t&&(t=null),Wf("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Wf("SimpleDb","DELETE",this.store.name,e),qp(this.store.delete(e))}count(){return Wf("SimpleDb","COUNT",this.store.name),qp(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Lp(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Lp(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Wf("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Lp(((n,r)=>{t.onerror=e=>{const t=Kp(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Lp(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new jp(i),s=t(i.primaryKey,i.value,o);if(s instanceof Lp){const e=s.catch((e=>(o.done(),Lp.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>Lp.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qp(e){return new Lp(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Kp(e.target.error);n(t)}}))}let Hp=!1;function Kp(e){const t=Fp.S(ss());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new tp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Hp||(Hp=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Gp{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Wf("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Wf("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Bp(e)?Wf("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Op(e)}await this.X(6e4)}))}}class Wp{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Lp.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Wf("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Wf("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ap(t);Pp(r,n)>0&&(n=r)})),new Rp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Yp(e){return null==e}function Jp(e){return 0===e&&1/e==-1/0}function Xp(e){return"number"==typeof e&&Number.isInteger(e)&&!Jp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $p(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=eg(t)),t=Zp(e.get(n),t);return eg(t)}function Zp(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function eg(e){return e+"\x01\x01"}function tg(e){const t=e.length;if($f(t>=2),2===t)return $f("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),wp.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Xf(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Xf()}o=t+2}return new wp(r)}Qp.oe=-1;const ng=["userId","batchId"];function rg(e,t){return[e,$p(t)]}function ig(e,t,n){return[e,$p(t),n]}const og={},sg=["prefixPath","collectionGroup","readTime","documentId"],ag=["prefixPath","collectionGroup","documentId"],lg=["collectionGroup","readTime","prefixPath","documentId"],cg=["canonicalId","targetId"],ug=["targetId","path"],hg=["path","targetId"],dg=["collectionId","parent"],fg=["indexId","uid"],pg=["uid","sequenceNumber"],gg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mg=["indexId","uid","orderedDocumentKey"],vg=["userId","collectionPath","documentId"],yg=["userId","collectionPath","largestBatchId"],wg=["userId","collectionGroup","largestBatchId"],bg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_g=[...bg,"documentOverlays"],xg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Eg=xg,Sg=[...Eg,"indexConfiguration","indexState","indexEntries"],Tg=Sg;class kg extends Dp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ig(e,t){const n=Zf(e);return Fp.F(n._e,t)}function Cg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ag(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Pg{constructor(e,t){this.comparator=e,this.root=t||Dg.EMPTY}insert(e,t){return new Pg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dg.BLACK,null,null))}remove(e){return new Pg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dg.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ng(this.root,e,this.comparator,!0)}}class Ng{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dg{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Dg.RED,this.left=null!=r?r:Dg.EMPTY,this.right=null!=i?i:Dg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Dg(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Dg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Dg.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xf();if(this.right.isRed())throw Xf();const e=this.left.check();if(e!==this.right.check())throw Xf();return e+(this.isRed()?0:1)}}Dg.EMPTY=null,Dg.RED=!0,Dg.BLACK=!1,Dg.EMPTY=new class{constructor(){this.size=0}get key(){throw Xf()}get value(){throw Xf()}get color(){throw Xf()}get left(){throw Xf()}get right(){throw Xf()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Dg(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Og{constructor(e){this.comparator=e,this.data=new Pg(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lg(this.data.getIterator())}getIteratorFrom(e){return new Lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Og))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Og(this.comparator);return t.data=e,t}}class Lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mg(e){return e.hasNext()?e.getNext():void 0}class Fg{constructor(e){this.fields=e,e.sort(_p.comparator)}static empty(){return new Fg([])}unionWith(e){let t=new Og(_p.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fg(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pp(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ug extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jg{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ug("Invalid base64 string: "+e):e}}(e);return new jg(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jg(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fp(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jg.EMPTY_BYTE_STRING=new jg("");const zg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bg(e){if($f(!!e),"string"==typeof e){let t=0;const n=zg.exec(e);if($f(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vg(e.seconds),nanos:Vg(e.nanos)}}function Vg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qg(e){return"string"==typeof e?jg.fromBase64String(e):jg.fromUint8Array(e)}function Hg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kg(e){const t=e.mapValue.fields.__previous_value__;return Hg(t)?Kg(t):t}function Gg(e){const t=Bg(e.mapValue.fields.__local_write_time__.timestampValue);return new mp(t.seconds,t.nanos)}class Wg{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Qg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qg("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qg&&e.projectId===this.projectId&&e.database===this.database}}const Yg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jg={nullValue:"NULL_VALUE"};function Xg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hg(e)?4:hm(e)?9007199254740991:10:Xf()}function $g(e,t){if(e===t)return!0;const n=Xg(e);if(n!==Xg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gg(e).isEqual(Gg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bg(e.timestampValue),r=Bg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qg(e.bytesValue).isEqual(qg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vg(e.geoPointValue.latitude)===Vg(t.geoPointValue.latitude)&&Vg(e.geoPointValue.longitude)===Vg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vg(e.integerValue)===Vg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Vg(e.doubleValue),r=Vg(t.doubleValue);return n===r?Jp(n)===Jp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pp(e.arrayValue.values||[],t.arrayValue.values||[],$g);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cg(n)!==Cg(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$g(n[i],r[i])))return!1;return!0}(e,t);default:return Xf()}}function Zg(e,t){return void 0!==(e.values||[]).find((e=>$g(e,t)))}function em(e,t){if(e===t)return 0;const n=Xg(e),r=Xg(t);if(n!==r)return fp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fp(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Vg(e.integerValue||e.doubleValue),r=Vg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tm(e.timestampValue,t.timestampValue);case 4:return tm(Gg(e),Gg(t));case 5:return fp(e.stringValue,t.stringValue);case 6:return function(e,t){const n=qg(e),r=qg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=fp(n[i],r[i]);if(0!==e)return e}return fp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=fp(Vg(e.latitude),Vg(t.latitude));return 0!==n?n:fp(Vg(e.longitude),Vg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=em(n[i],r[i]);if(e)return e}return fp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yg.mapValue&&t===Yg.mapValue)return 0;if(e===Yg.mapValue)return 1;if(t===Yg.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=fp(r[s],o[s]);if(0!==e)return e;const t=em(n[r[s]],i[o[s]]);if(0!==t)return t}return fp(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Xf()}}function tm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fp(e,t);const n=Bg(e),r=Bg(t),i=fp(n.seconds,r.seconds);return 0!==i?i:fp(n.nanos,r.nanos)}function nm(e){return rm(e)}function rm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return qg(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return xp.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=rm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(rm(e.fields[i]));return n+"}"}(e.mapValue):Xf()}function im(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function om(e){return!!e&&"integerValue"in e}function sm(e){return!!e&&"arrayValue"in e}function am(e){return!!e&&"nullValue"in e}function lm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cm(e){return!!e&&"mapValue"in e}function um(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ag(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=um(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=um(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dm(e){return"nullValue"in e?Jg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?im(Qg.empty(),xp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xf()}function fm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?im(Qg.empty(),xp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Yg:Xf()}function pm(e,t){const n=em(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gm(e,t){const n=em(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mm{constructor(e){this.value=e}static empty(){return new mm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=um(t)}setAll(e){let t=_p.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=um(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());cm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $g(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];cm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ag(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new mm(um(this.value))}}function vm(e){const t=[];return Ag(e.fields,((e,n)=>{const r=new _p([e]);if(cm(n)){const e=vm(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Fg(t)}class ym{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new ym(e,0,vp.min(),vp.min(),vp.min(),mm.empty(),0)}static newFoundDocument(e,t,n,r){return new ym(e,1,t,vp.min(),n,r,0)}static newNoDocument(e,t){return new ym(e,2,t,vp.min(),vp.min(),mm.empty(),0)}static newUnknownDocument(e,t){return new ym(e,3,t,vp.min(),vp.min(),mm.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vp.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ym&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ym(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wm{constructor(e,t){this.position=e,this.inclusive=t}}function bm(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?xp.comparator(xp.fromName(s.referenceValue),n.key):em(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function _m(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$g(e.position[n],t.position[n]))return!1;return!0}class xm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Em(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Sm{}class Tm extends Sm{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Lm(e,t,n):"array-contains"===t?new jm(e,n):"in"===t?new zm(e,n):"not-in"===t?new Bm(e,n):"array-contains-any"===t?new Vm(e,n):new Tm(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Mm(e,n):new Fm(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(em(t,this.value)):null!==t&&Xg(this.value)===Xg(t)&&this.matchesComparison(em(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xf()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class km extends Sm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new km(e,t)}matches(e){return Im(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Im(e){return"and"===e.op}function Cm(e){return"or"===e.op}function Am(e){return Rm(e)&&Im(e)}function Rm(e){for(const t of e.filters)if(t instanceof km)return!1;return!0}function Pm(e){if(e instanceof Tm)return e.field.canonicalString()+e.op.toString()+nm(e.value);if(Am(e))return e.filters.map((e=>Pm(e))).join(",");{const t=e.filters.map((e=>Pm(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nm(e,t){return e instanceof Tm?function(e,t){return t instanceof Tm&&e.op===t.op&&e.field.isEqual(t.field)&&$g(e.value,t.value)}(e,t):e instanceof km?function(e,t){return t instanceof km&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Nm(n,t.filters[r])),!0)}(e,t):void Xf()}function Dm(e,t){const n=e.filters.concat(t);return km.create(n,e.op)}function Om(e){return e instanceof Tm?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(nm(e.value))}(e):e instanceof km?function(e){return e.op.toString()+" {"+e.getFilters().map(Om).join(" ,")+"}"}(e):"Filter"}class Lm extends Tm{constructor(e,t,n){super(e,t,n),this.key=xp.fromName(n.referenceValue)}matches(e){const t=xp.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mm extends Tm{constructor(e,t){super(e,"in",t),this.keys=Um("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Fm extends Tm{constructor(e,t){super(e,"not-in",t),this.keys=Um("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Um(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>xp.fromName(e.referenceValue)))}class jm extends Tm{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sm(t)&&Zg(t.arrayValue,this.value)}}class zm extends Tm{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zg(this.value.arrayValue,t)}}class Bm extends Tm{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zg(this.value.arrayValue,t)}}class Vm extends Tm{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Zg(this.value.arrayValue,e)))}}class qm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ue=null}}function Hm(e){return new qm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Km(e){const t=Zf(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Pm(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Yp(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>nm(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>nm(e))).join(",")),t.ue=e}return t.ue}function Gm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Em(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nm(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_m(e.startAt,t.startAt)&&_m(e.endAt,t.endAt)}function Wm(e){return xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Qm(e,t){return e.filters.filter((e=>e instanceof Tm&&e.field.isEqual(t)))}function Ym(e,t,n){let r=Jg,i=!0;for(const o of Qm(e,t)){let e=Jg,t=!0;switch(o.op){case"<":case"<=":e=dm(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Jg}pm({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];pm({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Jm(e,t,n){let r=Yg,i=!0;for(const o of Qm(e,t)){let e=Yg,t=!0;switch(o.op){case">=":case">":e=fm(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Yg}gm({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];gm({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Xm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $m(e,t,n,r,i,o,s,a){return new Xm(e,t,n,r,i,o,s,a)}function Zm(e){return new Xm(e)}function ev(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tv(e){return null!==e.collectionGroup}function nv(e){const t=Zf(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Og(_p.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new xm(r,n))})),e.has(_p.keyField().canonicalString())||t.ce.push(new xm(_p.keyField(),n))}return t.ce}function rv(e){const t=Zf(e);return t.le||(t.le=iv(t,nv(e))),t.le}function iv(e,t){if("F"===e.limitType)return Hm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new xm(e.field,t)}));const n=e.endAt?new wm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wm(e.startAt.position,e.startAt.inclusive):null;return Hm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ov(e,t){const n=e.filters.concat([t]);return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sv(e,t,n){return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function av(e,t){return Gm(rv(e),rv(t))&&e.limitType===t.limitType}function lv(e){return"".concat(Km(rv(e)),"|lt:").concat(e.limitType)}function cv(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Om(e))).join(", "),"]")),Yp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>nm(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>nm(e))).join(",")),"Target(".concat(t,")")}(rv(e)),"; limitType=").concat(e.limitType,")")}function uv(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of nv(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,nv(e),t))&&!(e.endAt&&!function(e,t,n){const r=bm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,nv(e),t))}(e,t)}function hv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dv(e){return(t,n)=>{let r=!1;for(const i of nv(e)){const e=fv(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function fv(e,t,n){const r=e.field.isKeyField()?xp.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?em(r,i):Xf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xf()}}class pv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ag(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}}const gv=new Pg(xp.comparator);function mv(){return gv}const vv=new Pg(xp.comparator);function yv(){let e=vv;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function wv(e){let t=vv;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bv(){return xv()}function _v(){return xv()}function xv(){return new pv((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ev=new Pg(xp.comparator),Sv=new Og(xp.comparator);function Tv(){let e=Sv;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const kv=new Og(fp);function Iv(){return kv}function Cv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jp(t)?"-0":t}}function Av(e){return{integerValue:""+e}}function Rv(e,t){return Xp(t)?Av(t):Cv(e,t)}class Pv{constructor(){this._=void 0}}function Nv(e,t,n){return e instanceof Lv?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Hg(t)&&(t=Kg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mv?Fv(e,t):e instanceof Uv?jv(e,t):function(e,t){const n=Ov(e,t),r=Bv(n)+Bv(e.Pe);return om(n)&&om(e.Pe)?Av(r):Cv(e.serializer,r)}(e,t)}function Dv(e,t,n){return e instanceof Mv?Fv(e,t):e instanceof Uv?jv(e,t):n}function Ov(e,t){return e instanceof zv?function(e){return om(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Lv extends Pv{}class Mv extends Pv{constructor(e){super(),this.elements=e}}function Fv(e,t){const n=Vv(t);for(const r of e.elements)n.some((e=>$g(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Uv extends Pv{constructor(e){super(),this.elements=e}}function jv(e,t){let n=Vv(t);for(const r of e.elements)n=n.filter((e=>!$g(e,r)));return{arrayValue:{values:n}}}class zv extends Pv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Bv(e){return Vg(e.integerValue||e.doubleValue)}function Vv(e){return sm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qv{constructor(e,t){this.field=e,this.transform=t}}class Hv{constructor(e,t){this.version=e,this.transformResults=t}}class Kv{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kv}static exists(e){return new Kv(void 0,e)}static updateTime(e){return new Kv(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wv{}function Qv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new iy(e.key,Kv.none()):new Zv(e.key,e.data,Kv.none());{const n=e.data,r=mm.empty();let i=new Og(_p.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ey(e.key,r,new Fg(i.toArray()),Kv.none())}}function Yv(e,t,n){e instanceof Zv?function(e,t,n){const r=e.value.clone(),i=ny(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ey?function(e,t,n){if(!Gv(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ny(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ty(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Jv(e,t,n,r){return e instanceof Zv?function(e,t,n,r){if(!Gv(e.precondition,t))return n;const i=e.value.clone(),o=ry(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ey?function(e,t,n,r){if(!Gv(e.precondition,t))return n;const i=ry(e.fieldTransforms,r,t),o=t.data;return o.setAll(ty(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gv(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xv(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ov(r.transform,e||null);null!=i&&(null===n&&(n=mm.empty()),n.set(r.field,i))}return n||null}function $v(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&pp(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mv&&t instanceof Mv||e instanceof Uv&&t instanceof Uv?pp(e.elements,t.elements,$g):e instanceof zv&&t instanceof zv?$g(e.Pe,t.Pe):e instanceof Lv&&t instanceof Lv}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zv extends Wv{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ey extends Wv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ty(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ny(e,t,n){const r=new Map;$f(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Dv(s,a,n[i]))}return r}function ry(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Nv(e,o,t))}return r}class iy extends Wv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oy extends Wv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sy{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Yv(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Jv(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Jv(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_v();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Qv(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(vp.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tv())}isEqual(e){return this.batchId===e.batchId&&pp(this.mutations,e.mutations,((e,t)=>$v(e,t)))&&pp(this.baseMutations,e.baseMutations,((e,t)=>$v(e,t)))}}class ay{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){$f(e.mutations.length===n.length);let r=Ev;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new ay(e,t,n,r)}}class ly{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class cy{constructor(e,t){this.count=e,this.unchangedNames=t}}var uy,hy;function dy(e){switch(e){default:return Xf();case ep.CANCELLED:case ep.UNKNOWN:case ep.DEADLINE_EXCEEDED:case ep.RESOURCE_EXHAUSTED:case ep.INTERNAL:case ep.UNAVAILABLE:case ep.UNAUTHENTICATED:return!1;case ep.INVALID_ARGUMENT:case ep.NOT_FOUND:case ep.ALREADY_EXISTS:case ep.PERMISSION_DENIED:case ep.FAILED_PRECONDITION:case ep.ABORTED:case ep.OUT_OF_RANGE:case ep.UNIMPLEMENTED:case ep.DATA_LOSS:return!0}}function fy(e){if(void 0===e)return Qf("GRPC error has no .code"),ep.UNKNOWN;switch(e){case uy.OK:return ep.OK;case uy.CANCELLED:return ep.CANCELLED;case uy.UNKNOWN:return ep.UNKNOWN;case uy.DEADLINE_EXCEEDED:return ep.DEADLINE_EXCEEDED;case uy.RESOURCE_EXHAUSTED:return ep.RESOURCE_EXHAUSTED;case uy.INTERNAL:return ep.INTERNAL;case uy.UNAVAILABLE:return ep.UNAVAILABLE;case uy.UNAUTHENTICATED:return ep.UNAUTHENTICATED;case uy.INVALID_ARGUMENT:return ep.INVALID_ARGUMENT;case uy.NOT_FOUND:return ep.NOT_FOUND;case uy.ALREADY_EXISTS:return ep.ALREADY_EXISTS;case uy.PERMISSION_DENIED:return ep.PERMISSION_DENIED;case uy.FAILED_PRECONDITION:return ep.FAILED_PRECONDITION;case uy.ABORTED:return ep.ABORTED;case uy.OUT_OF_RANGE:return ep.OUT_OF_RANGE;case uy.UNIMPLEMENTED:return ep.UNIMPLEMENTED;case uy.DATA_LOSS:return ep.DATA_LOSS;default:return Xf()}}(hy=uy||(uy={}))[hy.OK=0]="OK",hy[hy.CANCELLED=1]="CANCELLED",hy[hy.UNKNOWN=2]="UNKNOWN",hy[hy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hy[hy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hy[hy.NOT_FOUND=5]="NOT_FOUND",hy[hy.ALREADY_EXISTS=6]="ALREADY_EXISTS",hy[hy.PERMISSION_DENIED=7]="PERMISSION_DENIED",hy[hy.UNAUTHENTICATED=16]="UNAUTHENTICATED",hy[hy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hy[hy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hy[hy.ABORTED=10]="ABORTED",hy[hy.OUT_OF_RANGE=11]="OUT_OF_RANGE",hy[hy.UNIMPLEMENTED=12]="UNIMPLEMENTED",hy[hy.INTERNAL=13]="INTERNAL",hy[hy.UNAVAILABLE=14]="UNAVAILABLE",hy[hy.DATA_LOSS=15]="DATA_LOSS";let py=null;function gy(){return new TextEncoder}const my=new If([4294967295,4294967295],0);function vy(e){const t=gy().encode(e),n=new Cf;return n.update(t),new Uint8Array(n.digest())}function yy(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new If([n,r],0),new If([i,o],0)]}class wy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new by("Invalid padding: ".concat(t));if(n<0)throw new by("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new by("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new by("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=If.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(If.fromNumber(n)));return 1===r.compare(my)&&(r=new If([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=vy(e),[n,r]=yy(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wy(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=vy(e),[n,r]=yy(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class by extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _y{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xy.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new _y(vp.min(),r,new Pg(fp),mv(),Tv())}}class xy{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xy(n,t,Tv(),Tv(),Tv())}}class Ey{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Sy{constructor(e,t){this.targetId=e,this.me=t}}class Ty{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jg.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ky{constructor(){this.fe=0,this.ge=Ay(),this.pe=jg.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Tv(),t=Tv(),n=Tv();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xf()}})),new xy(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Ay()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$f(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Iy{constructor(e){this.Le=e,this.Be=new Map,this.ke=mv(),this.qe=Cy(),this.Qe=new Pg(fp)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Xf()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Wm(i))if(0===n){const e=new xp(i.path);this.Ue(t,e,ym.newNoDocument(e,vp.min()))}else $f(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==py||py.et(function(e,t,n,r,i){var o,s,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=qg(n).toUint8Array()}catch(e){if(e instanceof Ug)return Yf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new wy(o,r,i)}catch(e){return Yf(e instanceof by?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Wm(i.target)){const t=new xp(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ym.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Tv();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new _y(e,t,this.Qe,this.ke,n);return this.ke=mv(),this.qe=Cy(),this.Qe=new Pg(fp),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ky,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Og(fp),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Wf("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cy(){return new Pg(xp.comparator)}function Ay(){return new Pg(xp.comparator)}const Ry={asc:"ASCENDING",desc:"DESCENDING"},Py={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ny={and:"AND",or:"OR"};class Dy{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oy(e,t){return e.useProto3Json||Yp(t)?t:{value:t}}function Ly(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function My(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fy(e,t){return Ly(e,t.toTimestamp())}function Uy(e){return $f(!!e),vp.fromTimestamp(function(e){const t=Bg(e);return new mp(t.seconds,t.nanos)}(e))}function jy(e,t){return zy(e,t).canonicalString()}function zy(e,t){const n=function(e){return new wp(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function By(e){const t=wp.fromString(e);return $f(cw(t)),t}function Vy(e,t){return jy(e.databaseId,t.path)}function qy(e,t){const n=By(t);if(n.get(1)!==e.databaseId.projectId)throw new tp(ep.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new tp(ep.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xp(Wy(n))}function Hy(e,t){return jy(e.databaseId,t)}function Ky(e){const t=By(e);return 4===t.length?wp.emptyPath():Wy(t)}function Gy(e){return new wp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wy(e){return $f(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qy(e,t,n){return{name:Vy(e,t),fields:n.value.mapValue.fields}}function Yy(e,t,n){const r=qy(e,t.name),i=Uy(t.updateTime),o=t.createTime?Uy(t.createTime):vp.min(),s=new mm({mapValue:{fields:t.fields}}),a=ym.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Jy(e,t){let n;if(t instanceof Zv)n={update:Qy(e,t.key,t.value)};else if(t instanceof iy)n={delete:Vy(e,t.key)};else if(t instanceof ey)n={update:Qy(e,t.key,t.data),updateMask:lw(t.fieldMask)};else{if(!(t instanceof oy))return Xf();n={verify:Vy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Lv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Uv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zv)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Xf()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xf()}(e,t.precondition)),n}function Xy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Kv.updateTime(Uy(e.updateTime)):void 0!==e.exists?Kv.exists(e.exists):Kv.none()}(t.currentDocument):Kv.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)$f("REQUEST_TIME"===t.setToServerValue),n=new Lv;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Mv(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Uv(e)}else"increment"in t?n=new zv(e,t.increment):Xf();const r=_p.fromServerFormat(t.fieldPath);return new qv(r,n)}(e,t))):[];if(t.update){t.update.name;const i=qy(e,t.update.name),o=new mm({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Fg(t.map((e=>_p.fromServerFormat(e))))}(t.updateMask);return new ey(i,o,e,n,r)}return new Zv(i,o,n,r)}if(t.delete){const r=qy(e,t.delete);return new iy(r,n)}if(t.verify){const r=qy(e,t.verify);return new oy(r,n)}return Xf()}function $y(e,t){return{documents:[Hy(e,t.path)]}}function Zy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hy(e,i);const o=function(e){if(0!==e.length)return aw(km.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ow(e.field),direction:nw(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Oy(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function ew(e){let t=Ky(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$f(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=tw(e);return t instanceof km&&Am(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new xm(sw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Yp(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wm(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wm(n,t)}(n.endAt)),$m(t,i,s,o,a,"F",l,c)}function tw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sw(e.unaryFilter.field);return Tm.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=sw(e.unaryFilter.field);return Tm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sw(e.unaryFilter.field);return Tm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sw(e.unaryFilter.field);return Tm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xf()}}(e):void 0!==e.fieldFilter?function(e){return Tm.create(sw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return km.create(e.compositeFilter.filters.map((e=>tw(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xf()}}(e.compositeFilter.op))}(e):Xf()}function nw(e){return Ry[e]}function rw(e){return Py[e]}function iw(e){return Ny[e]}function ow(e){return{fieldPath:e.canonicalString()}}function sw(e){return _p.fromServerFormat(e.fieldPath)}function aw(e){return e instanceof Tm?function(e){if("=="===e.op){if(lm(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NAN"}};if(am(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lm(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NOT_NAN"}};if(am(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ow(e.field),op:rw(e.op),value:e.value}}}(e):e instanceof km?function(e){const t=e.getFilters().map((e=>aw(e)));return 1===t.length?t[0]:{compositeFilter:{op:iw(e.op),filters:t}}}(e):Xf()}function lw(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function cw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class uw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vp.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jg.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new uw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new uw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hw{constructor(e){this.ct=e}}function dw(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ly(e,t.version.toTimestamp()),createTime:Ly(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:pw(t.version)};else{if(!t.isUnknownDocument())return Xf();r.unknownDocument={path:n.path.toArray(),version:pw(t.version)}}return r}function fw(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function pw(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gw(e){const t=new mp(e.seconds,e.nanoseconds);return vp.fromTimestamp(t)}function mw(e,t){const n=(t.baseMutations||[]).map((t=>Xy(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Xy(e.ct,t))),i=mp.fromMillis(t.localWriteTimeMs);return new sy(t.batchId,i,n,r)}function vw(e){const t=gw(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?gw(e.lastLimboFreeSnapshotVersion):vp.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return $f(1===e.documents.length),rv(Zm(Ky(e.documents[0])))}(e.query):function(e){return rv(ew(e))}(e.query),new uw(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,jg.fromBase64String(e.resumeToken))}function yw(e,t){const n=pw(t.snapshotVersion),r=pw(t.lastLimboFreeSnapshotVersion);let i;i=Wm(t.target)?$y(e.ct,t.target):Zy(e.ct,t.target)._t;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Km(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ww(e){const t=ew({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sv(t,t.limit,"L"):t}function bw(e,t){return new ly(t.largestBatchId,Xy(e.ct,t.overlayMutation))}function _w(e,t){const n=t.path.lastSegment();return[e,$p(t.path.popLast()),n]}function xw(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:pw(r.readTime),documentKey:$p(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ew{getBundleMetadata(e,t){return Sw(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:gw(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Sw(e).put(function(e){return{bundleId:e.id,createTime:pw(Uy(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Tw(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ww(e.bundledQuery),readTime:gw(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Tw(e).put(function(e){return{name:e.name,readTime:pw(Uy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Sw(e){return Ig(e,"bundles")}function Tw(e){return Ig(e,"namedQueries")}class kw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new kw(e,n)}getOverlay(e,t){return Iw(e).get(_w(this.userId,t)).next((e=>e?bw(this.serializer,e):null))}getOverlays(e,t){const n=bv();return Lp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new ly(t,i);r.push(this.ht(e,o))})),Lp.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add($p(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Iw(e).j("collectionPathOverlayIndex",r))})),Lp.waitFor(i)}getOverlaysForCollection(e,t,n){const r=bv(),i=$p(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Iw(e).U("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=bw(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=bv();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Iw(e).J({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=bw(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Iw(e).put(function(e,t,n){const[r,i,o]=_w(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jy(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Iw(e){return Ig(e,"documentOverlays")}class Cw{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Vg(e.integerValue));else if("doubleValue"in e){const n=Vg(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Jp(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Bg(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qg(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?hm(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Xf()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),xp.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Aw(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Rw(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Aw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Cw.bt=new Cw;class Pw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=Rw(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=Rw(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Nw{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Dw{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Ow{constructor(){this.Gt=new Pw,this.zt=new Nw(this.Gt),this.jt=new Dw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Lw{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Lw(this.indexId,this.documentKey,this.arrayValue,n)}}function Mw(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Fw(e.arrayValue,t.arrayValue),0!==n?n:(n=Fw(e.directionalValue,t.directionalValue),0!==n?n:xp.comparator(e.documentKey,t.documentKey)))}function Fw(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Uw{constructor(e){this.Yt=new Og(((e,t)=>_p.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if($f(e.collectionGroup===this.collectionId),this.en)return!1;const t=Sp(e);if(void 0!==t&&!this.nn(t))return!1;const n=Tp(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new Og(_p.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new kp(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new kp(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new kp(n.field,"asc"===n.dir?0:1)));return new Ep(Ep.UNKNOWN_ID,this.collectionId,t,Ip.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jw(e){var t,n;if($f(e instanceof Tm||e instanceof km),e instanceof Tm){if(e instanceof zm){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Tm.create(e.field,"==",t))))||[];return km.create(r,"or")}return e}const r=e.filters.map((e=>jw(e)));return km.create(r,e.op)}function zw(e){if(0===e.getFilters().length)return[];const t=Hw(jw(e));return $f(qw(t)),Bw(t)||Vw(t)?[t]:t.getFilters()}function Bw(e){return e instanceof Tm}function Vw(e){return e instanceof km&&Am(e)}function qw(e){return Bw(e)||Vw(e)||function(e){if(e instanceof km&&Cm(e)){for(const t of e.getFilters())if(!Bw(t)&&!Vw(t))return!1;return!0}return!1}(e)}function Hw(e){if($f(e instanceof Tm||e instanceof km),e instanceof Tm)return e;if(1===e.filters.length)return Hw(e.filters[0]);const t=e.filters.map((e=>Hw(e)));let n=km.create(t,e.op);return n=Ww(n),qw(n)?n:($f(n instanceof km),$f(Im(n)),$f(n.filters.length>1),n.filters.reduce(((e,t)=>Kw(e,t))))}function Kw(e,t){let n;return $f(e instanceof Tm||e instanceof km),$f(t instanceof Tm||t instanceof km),n=e instanceof Tm?t instanceof Tm?function(e,t){return km.create([e,t],"and")}(e,t):Gw(e,t):t instanceof Tm?Gw(t,e):function(e,t){if($f(e.filters.length>0&&t.filters.length>0),Im(e)&&Im(t))return Dm(e,t.getFilters());const n=Cm(e)?e:t,r=Cm(e)?t:e,i=n.filters.map((e=>Kw(e,r)));return km.create(i,"or")}(e,t),Ww(n)}function Gw(e,t){if(Im(t))return Dm(t,e.getFilters());{const n=t.filters.map((t=>Kw(e,t)));return km.create(n,"or")}}function Ww(e){if($f(e instanceof Tm||e instanceof km),e instanceof Tm)return e;const t=e.getFilters();if(1===t.length)return Ww(t[0]);if(Rm(e))return e;const n=t.map((e=>Ww(e))),r=[];return n.forEach((t=>{t instanceof Tm?r.push(t):t instanceof km&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:km.create(r,e.op)}class Qw{constructor(){this._n=new Yw}addToCollectionParentIndex(e,t){return this._n.add(t),Lp.resolve()}getCollectionParents(e,t){return Lp.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Lp.resolve()}deleteFieldIndex(e,t){return Lp.resolve()}deleteAllFieldIndexes(e){return Lp.resolve()}createTargetIndexes(e,t){return Lp.resolve()}getDocumentsMatchingTarget(e,t){return Lp.resolve(null)}getIndexType(e,t){return Lp.resolve(0)}getFieldIndexes(e,t){return Lp.resolve([])}getNextCollectionGroupToUpdate(e){return Lp.resolve(null)}getMinOffset(e,t){return Lp.resolve(Rp.min())}getMinOffsetFromCollectionGroup(e,t){return Lp.resolve(Rp.min())}updateCollectionGroup(e,t,n){return Lp.resolve()}updateIndexEntries(e,t){return Lp.resolve()}}class Yw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Og(wp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Og(wp.comparator)).toArray()}}const Jw=new Uint8Array(0);class Xw{constructor(e,t){this.databaseId=t,this.an=new Yw,this.un=new pv((e=>Km(e)),((e,t)=>Gm(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:$p(r)};return $w(e).put(i)}return Lp.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gp(t),""],!1,!0);return $w(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tg(r.parent))}return n}))}addFieldIndex(e,t){const n=eb(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=tb(e);return i.next((e=>{n.put(xw(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=eb(e),r=tb(e),i=Zw(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=eb(e),n=Zw(e),r=tb(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Lp.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Uw(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Zw(e);let r=!0;const i=new Map;return Lp.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Tv();const r=[];return Lp.forEach(i,((i,o)=>{Wf("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Km(t)));const s=function(e,t){const n=Sp(t);if(void 0===n)return null;for(const r of Qm(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Tp(t))for(const t of Qm(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Tp(t)){const t=0===i.kind?Ym(e,i.fieldPath,e.startAt):Jm(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new wm(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Tp(t)){const t=0===i.kind?Jm(e,i.fieldPath,e.endAt):Ym(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new wm(n,r)}(o,i),u=this.hn(i,o,l),h=this.hn(i,o,c),d=this.Pn(i,o,a),f=this.In(i.indexId,s,u,l.inclusive,h,c.inclusive,d);return Lp.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=xp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Lp.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:zw(km.create(e.filters,"and")).map((t=>Hm(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Jw,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],o),f=s.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new Lw(e,xp.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Lw(e,xp.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Uw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Lp.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Og(_p.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Ow;for(const r of Tp(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Cw.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Ow;return Cw.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Ow;return Cw.bt.Pt(im(this.databaseId,t),n.Ht(function(e){const t=Tp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Ow);let i=0;for(const o of Tp(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&sm(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);Cw.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Ow;n.seed(e.Wt()),Cw.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Tm&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=eb(e),r=tb(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Lp.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ip(t.sequenceNumber,new Rp(gw(t.readTime),new xp(tg(t.documentKey)),t.largestBatchId)):Ip.empty(),r=e.fields.map((e=>{let[t,n]=e;return new kp(_p.fromServerFormat(t),n)}));return new Ep(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=eb(e),i=tb(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Lp.forEach(t,(t=>i.put(xw(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Lp.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Lp.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Lp.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Lp.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Zw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Zw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Zw(e);let i=new Og(Mw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Lw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Og(Mw);const r=this.An(t,e);if(null==r)return n;const i=Sp(t);if(null!=i){const o=e.data.field(i.fieldPath);if(sm(o))for(const i of o.arrayValue.values||[])n=n.add(new Lw(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Lw(t.indexId,e.key,Jw,r));return n}wn(e,t,n,r,i){Wf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Mg(o),l=Mg(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Mg(s)):t?(i(a),a=Mg(o)):(a=Mg(o),l=Mg(s))}}(r,i,Mw,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),Lp.waitFor(o)}gn(e){let t=1;return tb(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Mw(e,t))).filter(((e,t,n)=>!t||0!==Mw(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Mw(o,e),i=Mw(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Jw,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Jw,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Mw(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nb)}getMinOffset(e,t){return Lp.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Xf())))).next(nb)}}function $w(e){return Ig(e,"collectionParents")}function Zw(e){return Ig(e,"indexEntries")}function eb(e){return Ig(e,"indexConfiguration")}function tb(e){return Ig(e,"indexState")}function nb(e){$f(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Pp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Rp(t.readTime,t.documentKey,n)}const rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ib{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ib(e,ib.DEFAULT_COLLECTION_PERCENTILE,ib.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ob(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{$f(1===a)})));const c=[];for(const u of n.mutations){const e=ig(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return Lp.waitFor(o).next((()=>c))}function sb(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xf();t=e.noDocument}return JSON.stringify(t).length}ib.DEFAULT_COLLECTION_PERCENTILE=10,ib.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ib.DEFAULT=new ib(41943040,ib.DEFAULT_COLLECTION_PERCENTILE,ib.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ib.DISABLED=new ib(-1,0,0);class ab{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){$f(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ab(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cb(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ub(e),o=cb(e);return o.add({}).next((s=>{$f("number"==typeof s);const a=new sy(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Jy(e.ct,t))),i=n.mutations.map((t=>Jy(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Og(((e,t)=>fp(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ig(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,og))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),Lp.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return cb(e).get(t).next((e=>e?($f(e.userId===this.userId),mw(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Lp.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return cb(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&($f(t.batchId>=n),i=mw(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cb(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cb(e).U("userMutationsIndex",t).next((e=>e.map((e=>mw(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rg(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ub(e).J({range:r},((n,r,o)=>{const[s,a,l]=n,c=tg(a);if(s===this.userId&&t.path.isEqual(c))return cb(e).get(l).next((e=>{if(!e)throw Xf();$f(e.userId===this.userId),i.push(mw(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Og(fp);const r=[];return t.forEach((t=>{const i=rg(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=ub(e).J({range:o},((e,r,i)=>{const[o,s,a]=e,l=tg(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),Lp.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rg(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Og(fp);return ub(e).J({range:o},((e,t,i)=>{const[o,a,l]=e,c=tg(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(cb(e).get(t).next((e=>{if(null===e)throw Xf();$f(e.userId===this.userId),n.push(mw(this.serializer,e))})))})),Lp.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return ob(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Lp.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Lp.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ub(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=tg(e[1]);r.push(t)}else n.done()})).next((()=>{$f(0===r.length)}))}))}containsKey(e,t){return lb(e,this.userId,t)}xn(e){return hb(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function lb(e,t,n){const r=rg(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return ub(e).J({range:o,H:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function cb(e){return Ig(e,"mutations")}function ub(e){return Ig(e,"documentMutations")}function hb(e){return Ig(e,"mutationQueues")}class db{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new db(0)}static Ln(){return new db(-1)}}class fb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new db(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>vp.fromTimestamp(new mp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>pb(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>($f(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return pb(e).J(((o,s)=>{const a=vw(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Lp.waitFor(i))).next((()=>r))}forEachTarget(e,t){return pb(e).J(((e,n)=>{const r=vw(n);t(r)}))}Bn(e){return gb(e).get("targetGlobalKey").next((e=>($f(null!==e),e)))}kn(e,t){return gb(e).put("targetGlobalKey",t)}qn(e,t){return pb(e).put(yw(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Km(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return pb(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=vw(n);Gm(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=mb(e);return t.forEach((t=>{const o=$p(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Lp.waitFor(r)}removeMatchingKeys(e,t,n){const r=mb(e);return Lp.forEach(t,(t=>{const i=$p(t.path);return Lp.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=mb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mb(e);let i=Tv();return r.J({range:n,H:!0},((e,t,n)=>{const r=tg(e[1]),o=new xp(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=$p(t.path),r=IDBKeyRange.bound([n],[gp(n)],!1,!0);let i=0;return mb(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return pb(e).get(t).next((e=>e?vw(e):null))}}function pb(e){return Ig(e,"targets")}function gb(e){return Ig(e,"targetGlobal")}function mb(e){return Ig(e,"targetDocuments")}function vb(e,t){let[n,r]=e,[i,o]=t;const s=fp(n,i);return 0===s?fp(r,o):s}class yb{constructor(e){this.Kn=e,this.buffer=new Og(vb),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();vb(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wb{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Wf("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Bp(e)?Wf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Op(e)}await this.zn(3e5)}))}}class bb{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Lp.resolve(Qp.oe);const n=new yb(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Wf("LruGarbageCollector","Garbage collection skipped; disabled"),Lp.resolve(rb)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Wf("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),rb):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Wf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Gf()<=Ds.DEBUG&&Wf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Lp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function _b(e,t){return new bb(e,t)}class xb{constructor(e,t){this.db=e,this.garbageCollector=_b(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Eb(e,n)}removeReference(e,t,n){return Eb(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Eb(e,t)}er(e,t){return function(e,t){let n=!1;return hb(e).Y((r=>lb(e,r,t).next((e=>(e&&(n=!0),Lp.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,vp.min()),mb(e).delete(function(e){return[0,$p(e.path)]}(o)))))}));r.push(t)}})).next((()=>Lp.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Eb(e,t)}Xn(e,t){const n=mb(e);let r,i=Qp.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==Qp.oe&&t(new xp(tg(r)),i),i=l,r=a):i=Qp.oe})).next((()=>{i!==Qp.oe&&t(new xp(tg(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eb(e,t){return mb(e).put(function(e,t){return{targetId:0,path:$p(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Sb{constructor(){this.changes=new pv((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ym.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Lp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ab(e).put(n)}removeEntry(e,t,n){return Ab(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fw(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=ym.newInvalidDocument(t);return Ab(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:ym.newInvalidDocument(t)};return Ab(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},((e,r)=>{n={document:this.nr(t,r),size:sb(r)}})).next((()=>n))}getEntries(e,t){let n=mv();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=mv(),r=new Pg(xp.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,sb(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Lp.resolve();let r=new Og(Nb);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Rb(r.first()),Rb(r.last())),o=r.getIterator();let s=o.getNext();return Ab(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=xp.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&Nb(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.$(Rb(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),fw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ab(e).U(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=mv();for(const i of e){const e=this.nr(xp.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(uv(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=mv();const o=Pb(t,n),s=Pb(t,Rp.max());return Ab(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(xp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Ib(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Cb(e).get("remoteDocumentGlobalKey").next((e=>($f(!!e),e)))}tr(e,t){return Cb(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Yy(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=xp.fromSegments(t.noDocument.path),r=gw(t.noDocument.readTime);n=ym.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xf();{const e=xp.fromSegments(t.unknownDocument.path),r=gw(t.unknownDocument.version);n=ym.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new mp(e[0],e[1]);return vp.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(vp.min()))return e}return ym.newInvalidDocument(e)}}function kb(e){return new Tb(e)}class Ib extends Sb{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new pv((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Og(((e,t)=>fp(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=dw(this.ar.serializer,o);r=r.add(i.path.popLast());const l=sb(a);n+=l-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=dw(this.ar.serializer,o.convertToNoDocument(vp.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Lp.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Cb(e){return Ig(e,"remoteDocumentGlobal")}function Ab(e){return Ig(e,"remoteDocumentsV14")}function Rb(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Pb(e,t){const n=t.documentKey.path.toArray();return[e,fw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Nb(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=fp(n[o],r[o]),i)return i;return i=fp(n.length,r.length),i||(i=fp(n[n.length-2],r[r.length-2]),i||fp(n[n.length-1],r[r.length-1]))}class Db{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ob{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Jv(n.mutation,e,Fg.empty(),mp.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Tv()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tv();const r=bv();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=yv();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bv();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Tv())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=mv();const o=xv(),s=xv();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof ey)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Jv(s.mutation,t,s.mutation.getFieldMask(),mp.now())):o.set(t.key,Fg.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Db(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=xv();let r=new Pg(((e,t)=>e-t)),i=Tv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Fg.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Tv()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=_v();l.forEach((e=>{if(!i.has(e)){const r=Qv(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Lp.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Lp.resolve(bv());let s=-1,a=i;return o.next((t=>Lp.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Lp.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Tv()))).next((e=>({batchId:s,changes:wv(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xp(t)).next((e=>{let t=yv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=yv();return this.indexManager.getCollectionParents(e,i).next((s=>Lp.forEach(s,(s=>{const a=function(e,t){return new Xm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ym.newInvalidDocument(r)))}));let n=yv();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Jv(o.mutation,r,Fg.empty(),mp.now()),uv(t,r)&&(n=n.insert(e,r))})),n}))}}class Lb{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Lp.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Uy(e.createTime)}}(t)),Lp.resolve()}getNamedQuery(e,t){return Lp.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:ww(e.bundledQuery),readTime:Uy(e.readTime)}}(t)),Lp.resolve()}}class Mb{constructor(){this.overlays=new Pg(xp.comparator),this.hr=new Map}getOverlay(e,t){return Lp.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bv();return Lp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Lp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Lp.resolve()}getOverlaysForCollection(e,t,n){const r=bv(),i=t.length+1,o=new xp(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Lp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Pg(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bv(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=bv(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Lp.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ly(t,n));let i=this.hr.get(t);void 0===i&&(i=Tv(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Fb{constructor(){this.Pr=new Og(Ub.Ir),this.Tr=new Og(Ub.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Ub(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Ub(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new xp(new wp([])),n=new Ub(t,e),r=new Ub(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new xp(new wp([])),n=new Ub(t,e),r=new Ub(t,e+1);let i=Tv();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ub(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ub{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return xp.comparator(e.key,t.key)||fp(e.pr,t.pr)}static Er(e,t){return fp(e.pr,t.pr)||xp.comparator(e.key,t.key)}}class jb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Og(Ub.Ir)}checkEmpty(e){return Lp.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sy(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new Ub(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Lp.resolve(o)}lookupMutationBatch(e,t){return Lp.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Lp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Lp.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Lp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ub(t,0),r=new Ub(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Lp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Og(fp);return t.forEach((e=>{const t=new Ub(e,0),r=new Ub(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Lp.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;xp.isDocumentKey(i)||(i=i.child(""));const o=new Ub(new xp(i),0);let s=new Og(fp);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),Lp.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){$f(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Lp.forEach(t.mutations,(r=>{const i=new Ub(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Ub(t,0),r=this.wr.firstAfterOrEqual(n);return Lp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Lp.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zb{constructor(e){this.vr=e,this.docs=new Pg(xp.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Lp.resolve(n?n.document.mutableCopy():ym.newInvalidDocument(t))}getEntries(e,t){let n=mv();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ym.newInvalidDocument(e))})),Lp.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=mv();const o=t.path,s=new xp(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Pp(Ap(s),n)<=0||(r.has(s.key)||uv(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Lp.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Xf()}Fr(e,t){return Lp.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bb(this)}getSize(e){return Lp.resolve(this.size)}}class Bb extends Sb{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Lp.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Vb{constructor(e){this.persistence=e,this.Mr=new pv((e=>Km(e)),Gm),this.lastRemoteSnapshotVersion=vp.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Fb,this.targetCount=0,this.Lr=db.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Lp.resolve()}getLastRemoteSnapshotVersion(e){return Lp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lp.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Lp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Lp.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new db(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Lp.resolve()}updateTargetData(e,t){return this.qn(t),Lp.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Lp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Lp.waitFor(i).next((()=>r))}getTargetCount(e){return Lp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Lp.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Lp.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Lp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Lp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Lp.resolve(n)}containsKey(e,t){return Lp.resolve(this.Nr.containsKey(t))}}class qb{constructor(e,t){this.Br={},this.overlays={},this.kr=new Qp(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Vb(this),this.indexManager=new Qw,this.remoteDocumentCache=function(e){return new zb(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new hw(t),this.$r=new Lb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new jb(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Wf("MemoryPersistence","Starting transaction:",e);const r=new Hb(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Lp.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Hb extends Dp{constructor(e){super(),this.currentSequenceNumber=e}}class Kb{constructor(e){this.persistence=e,this.zr=new Fb,this.jr=null}static Hr(e){return new Kb(e)}get Jr(){if(this.jr)return this.jr;throw Xf()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Lp.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Lp.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Lp.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lp.forEach(this.Jr,(n=>{const r=xp.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,vp.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Lp.or([()=>Lp.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Gb{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Mp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ng,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wb(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Lp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wb(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ng,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Lp.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:vg});t.createIndex("collectionPathOverlayIndex",yg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:sg});t.createIndex("documentKeyIndex",ag),t.createIndex("collectionGroupIndex",lg)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fg}).createIndex("sequenceNumberIndex",pg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gg}).createIndex("documentKeyIndex",mg,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),o}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=sb(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Lp.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Lp.forEach(n,(n=>{$f(n.userId===t.userId);const r=mw(this.serializer,n);return ob(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const o=new wp(n),s=function(e){return[0,$p(e)]}(o);r.push(t.get(s).next((n=>n?Lp.resolve():(n=>t.put({targetId:0,path:$p(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Lp.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:dg});const n=t.store("collectionParents"),r=new Yw,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:$p(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new wp(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,o]=e;const s=tg(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=vw(n),i=yw(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new xp(wp.fromString(e.document.name).popFirst(5)):e.noDocument?xp.fromSegments(e.noDocument.path):e.unknownDocument?xp.fromSegments(e.unknownDocument.path):Xf()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Lp.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=kb(this.serializer),i=new qb(Kb.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Tv();mw(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Lp.forEach(n,((e,n)=>{const o=new qf(n),s=kw.lt(this.serializer,o),a=i.getIndexManager(o),l=ab.lt(o,this.serializer,a,i.referenceDelegate);return new Ob(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new kg(t,Qp.oe),e).next()}))}))}}function Wb(e){e.createObjectStore("targetDocuments",{keyPath:ug}).createIndex("documentTargetsIndex",hg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cg,{unique:!0}),e.createObjectStore("targetGlobal")}const Qb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yb{constructor(e,t,n,r,i,o,s,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Yb.D())throw new tp(ep.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xb(this,r),this.Ti=t+"main",this.serializer=new hw(a),this.Ei=new Fp(this.Ti,this.ui,new Gb(this.serializer)),this.Qr=new fb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kb(this.serializer),this.$r=new Ew,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Qf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tp(ep.FAILED_PRECONDITION,Qb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Qp(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Bp(e))return Wf("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Wf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Jb(e).get("owner").next((e=>Lp.resolve(this.Si(e))))}bi(e){return Xb(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ig(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Lp.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Lp.resolve(!0):Jb(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new tp(ep.FAILED_PRECONDITION,Qb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xb(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Wf("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new kg(e,Qp.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Xb(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return ab.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return kw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Wf("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Tg:15===e?Sg:14===e?Eg:13===e?xg:12===e?_g:11===e?bg:void Xf()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new kg(r,this.kr?this.kr.next():Qp.oe),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Qf("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new tp(ep.FAILED_PRECONDITION,Np);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Jb(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new tp(ep.FAILED_PRECONDITION,Qb)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jb(e).put("owner",t)}static D(){return Fp.D()}yi(e){const t=Jb(e);return t.get("owner").next((e=>this.Si(e)?(Wf("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Lp.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Qf("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ds()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Wf("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Qf("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(CM){Qf("Failed to set zombie client id.",CM)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(CM){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Jb(e){return Ig(e,"owner")}function Xb(e){return Ig(e,"clientMetadata")}function $b(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Zb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Tv(),r=Tv();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zb(e,t.fromCache,n,r)}}class e_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class t_{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ds()?8:Up(ss())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new e_;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Gf()<=Ds.DEBUG&&Wf("QueryEngine","SDK will not create cache indexes for query:",cv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Lp.resolve()):(Gf()<=Ds.DEBUG&&Wf("QueryEngine","Query:",cv(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Gf()<=Ds.DEBUG&&Wf("QueryEngine","The SDK decides to create cache indexes for query:",cv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rv(t))):Lp.resolve())}ji(e,t){if(ev(t))return Lp.resolve(null);let n=rv(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=sv(t,null,"F"),n=rv(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Tv(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,sv(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return ev(t)||r.isEqual(vp.min())?Lp.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?Lp.resolve(null):(Gf()<=Ds.DEBUG&&Wf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cv(t)),this.es(e,o,t,Cp(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Og(dv(e));return t.forEach(((t,r)=>{uv(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Gf()<=Ds.DEBUG&&Wf("QueryEngine","Using full collection scan to execute query:",cv(t)),this.zi.getDocumentsMatchingQuery(e,t,Rp.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class n_{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Pg(fp),this.rs=new pv((e=>Km(e)),Gm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ob(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function r_(e,t,n,r){return new n_(e,t,n,r)}async function i_(e,t){const n=Zf(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Tv();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function o_(e){const t=Zf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function s_(e,t,n){let r=Tv(),i=Tv();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=mv();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(vp.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Wf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function a_(e,t){const n=Zf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function l_(e,t){const n=Zf(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Lp.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new uw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function c_(e,t,n){const r=Zf(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Bp(e))throw e;Wf("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function u_(e,t,n){const r=Zf(e);let i=vp.min(),o=Tv();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Zf(e),i=r.rs.get(n);return void 0!==i?Lp.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,rv(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:vp.min(),n?o:Tv()))).next((e=>(f_(r,hv(t),e),{documents:e,hs:o})))))}function h_(e,t){const n=Zf(e),r=Zf(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function d_(e,t){const n=Zf(e),r=n.ss.get(t)||vp.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Cp(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(f_(n,t,e),e)))}function f_(e,t,n){let r=e.ss.get(t)||vp.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function p_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tv();const r=await l_(e,rv(ww(t.bundledQuery))),i=Zf(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Uy(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(jg.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function g_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function m_(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function v_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class y_{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new tp(r.error.code,r.error.message))),o?new y_(e,t,r.state,i):(Qf("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class w_{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new tp(n.error.code,n.error.message))),i?new w_(e,n.state,r):(Qf("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class b_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Iv();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Xp(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new b_(e,i):(Qf("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class __{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new __(t.clientId,t.onlineState):(Qf("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class x_{constructor(){this.activeTargetIds=Iv()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E_{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Pg(fp),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=g_(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new x_),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(g_(this.persistenceKey,n));if(e){const t=b_.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(v_(this.persistenceKey,e));if(n){const r=w_.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(v_(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Wf("SharedClientState","READ",e,t),t}setItem(e,t){Wf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Wf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Wf("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Qf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Qp.oe;if(null!=e)try{const n=JSON.parse(e);$f("number"==typeof n),t=n}catch(e){Qf("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Qp.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new y_(this.currentUser,e,t,n),i=m_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=m_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=v_(this.persistenceKey,e),i=new w_(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return b_.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return y_.Es(new qf(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return w_.Es(r,t)}xs(e){return __.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Wf("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Iv();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class S_{constructor(){this.no=new x_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new x_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class T_{io(e){}shutdown(){}}class k_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Wf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Wf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let I_=null;function C_(){return null===I_?I_=268435456+Math.round(2147483648*Math.random()):I_++,"0x"+I_.toString(16)}const A_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class R_{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const P_="WebChannelConnection";class N_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const o=C_(),s=this.vo(e,t.toUriEncodedString());Wf("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,s,a,n).then((t=>(Wf("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Yf("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}xo(e,t,n,r,i,o){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=A_[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=C_();return new Promise(((o,s)=>{const a=new Pf;a.setWithCredentials(!0),a.listenOnce(Of.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Lf.NO_ERROR:const t=a.getResponseJson();Wf(P_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Lf.TIMEOUT:Wf(P_,"RPC '".concat(e,"' ").concat(i," timed out")),s(new tp(ep.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const n=a.getStatus();if(Wf(P_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ep).indexOf(t)>=0?t:ep.UNKNOWN}(t.status);s(new tp(e,t.message))}else s(new tp(ep.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new tp(ep.UNAVAILABLE,"Connection failed."));break;default:Xf()}}finally{Wf(P_,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Wf(P_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=C_(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jf(),s=Uf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Nf({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Wf(P_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new R_({lo:t=>{d?Wf(P_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Wf(P_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Wf(P_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Df.EventType.OPEN,(()=>{d||(Wf(P_,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,Df.EventType.CLOSE,(()=>{d||(d=!0,Wf(P_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,Df.EventType.ERROR,(t=>{d||(d=!0,Yf(P_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new tp(ep.UNAVAILABLE,"The operation could not be completed")))})),p(u,Df.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];$f(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Wf(P_,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=uy[e];if(void 0!==t)return fy(t)}(t),i=s.message;void 0===n&&(n=ep.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.po(new tp(n,i)),u.close()}else Wf(P_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(s,Ff.STAT_EVENT,(t=>{t.stat===Mf.PROXY?Wf(P_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Mf.NOPROXY&&Wf(P_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function D_(){return"undefined"!=typeof window?window:null}function O_(){return"undefined"!=typeof document?document:null}function L_(e){return new Dy(e,!0)}class M_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Wf("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class F_{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new M_(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===ep.RESOURCE_EXHAUSTED?(Qf(t.toString()),Qf("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===ep.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new tp(ep.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Wf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Wf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class U_ extends F_{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?($f(void 0===t||"string"==typeof t),jg.fromBase64String(t||"")):($f(void 0===t||t instanceof Buffer||t instanceof Uint8Array),jg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?ep.UNKNOWN:fy(e.code);return new tp(t,e.message||"")}(s);n=new Ty(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=qy(e,r.document.name),o=Uy(r.document.updateTime),s=r.document.createTime?Uy(r.document.createTime):vp.min(),a=new mm({mapValue:{fields:r.document.fields}}),l=ym.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ey(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=qy(e,r.document),o=r.readTime?Uy(r.readTime):vp.min(),s=ym.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ey([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=qy(e,r.document),o=r.removedTargetIds||[];n=new Ey([],o,i,null)}else{if(!("filter"in t))return Xf();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new cy(r,i),s=e.targetId;n=new Sy(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vp.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vp.min():t.readTime?Uy(t.readTime):vp.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Gy(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wm(r)?{documents:$y(e,r)}:{query:Zy(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=My(e,t.resumeToken);const r=Oy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vp.min())>0){n.readTime=Ly(e,t.snapshotVersion.toTimestamp());const r=Oy(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Gy(this.serializer),t.removeTarget=e,this.i_(t)}}class j_ extends F_{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if($f(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?($f(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Uy(e.updateTime):Uy(t);return n.isEqual(vp.min())&&(n=Uy(t)),new Hv(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Uy(e.commitTime);return this.listener.A_(n,t)}return $f(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Gy(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Jy(this.serializer,e)))};this.i_(t)}}class z_ extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new tp(ep.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,zy(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ep.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tp(ep.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.xo(e,zy(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ep.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tp(ep.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class B_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Qf(t),this.y_=!1):Wf("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class V_{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{X_(this)&&(Wf("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Zf(e);t.M_.add(4),await H_(t),t.N_.set("Unknown"),t.M_.delete(4),await q_(t)}(this))}))})),this.N_=new B_(n,r)}}async function q_(e){if(X_(e))for(const t of e.x_)await t(!0)}async function H_(e){for(const t of e.x_)await t(!1)}function K_(e,t){const n=Zf(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),J_(n)?Y_(n):mx(n).Xo()&&W_(n,t))}function G_(e,t){const n=Zf(e),r=mx(n);n.F_.delete(t),r.Xo()&&Q_(n,t),0===n.F_.size&&(r.Xo()?r.n_():X_(n)&&n.N_.set("Unknown"))}function W_(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vp.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mx(e).P_(t)}function Q_(e,t){e.L_.xe(t),mx(e).I_(t)}function Y_(e){e.L_=new Iy({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),mx(e).start(),e.N_.w_()}function J_(e){return X_(e)&&!mx(e).Zo()&&e.F_.size>0}function X_(e){return 0===Zf(e).M_.size}function $_(e){e.L_=void 0}async function Z_(e){e.N_.set("Online")}async function ex(e){e.F_.forEach(((t,n)=>{W_(e,t)}))}async function tx(e,t){$_(e),J_(e)?(e.N_.D_(t),Y_(e)):e.N_.set("Unknown")}async function nx(e,t,n){if(e.N_.set("Online"),t instanceof Ty&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Wf("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await rx(e,n)}else if(t instanceof Ey?e.L_.Ke(t):t instanceof Sy?e.L_.He(t):e.L_.We(t),!n.isEqual(vp.min()))try{const t=await o_(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(jg.EMPTY_BYTE_STRING,r.snapshotVersion)),Q_(e,t);const i=new uw(r.target,t,n,r.sequenceNumber);W_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Wf("RemoteStore","Failed to raise snapshot:",t),await rx(e,t)}}async function rx(e,t,n){if(!Bp(t))throw t;e.M_.add(1),await H_(e),e.N_.set("Offline"),n||(n=()=>o_(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Wf("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await q_(e)}))}function ix(e,t){return t().catch((n=>rx(e,n,t)))}async function ox(e){const t=Zf(e),n=vx(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;sx(t);)try{const e=await a_(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,ax(t,e)}catch(e){await rx(t,e)}lx(t)&&cx(t)}function sx(e){return X_(e)&&e.v_.length<10}function ax(e,t){e.v_.push(t);const n=vx(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function lx(e){return X_(e)&&!vx(e).Zo()&&e.v_.length>0}function cx(e){vx(e).start()}async function ux(e){vx(e).V_()}async function hx(e){const t=vx(e);for(const n of e.v_)t.d_(n.mutations)}async function dx(e,t,n){const r=e.v_.shift(),i=ay.from(r,t,n);await ix(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ox(e)}async function fx(e,t){t&&vx(e).E_&&await async function(e,t){if(function(e){return dy(e)&&e!==ep.ABORTED}(t.code)){const n=e.v_.shift();vx(e).t_(),await ix(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ox(e)}}(e,t),lx(e)&&cx(e)}async function px(e,t){const n=Zf(e);n.asyncQueue.verifyOperationInProgress(),Wf("RemoteStore","RemoteStore received new credentials");const r=X_(n);n.M_.add(3),await H_(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await q_(n)}async function gx(e,t){const n=Zf(e);t?(n.M_.delete(2),await q_(n)):t||(n.M_.add(2),await H_(n),n.N_.set("Unknown"))}function mx(e){return e.B_||(e.B_=function(e,t,n){const r=Zf(e);return r.f_(),new U_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Z_.bind(null,e),To:ex.bind(null,e),Ao:tx.bind(null,e),h_:nx.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),J_(e)?Y_(e):e.N_.set("Unknown")):(await e.B_.stop(),$_(e))}))),e.B_}function vx(e){return e.k_||(e.k_=function(e,t,n){const r=Zf(e);return r.f_(),new j_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:ux.bind(null,e),Ao:fx.bind(null,e),R_:hx.bind(null,e),A_:dx.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await ox(e)):(await e.k_.stop(),e.v_.length>0&&(Wf("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class yx{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new np,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new yx(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tp(ep.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wx(e,t){if(Qf("AsyncQueue","".concat(t,": ").concat(e)),Bp(e))return new tp(ep.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class bx{constructor(e){this.comparator=e?(t,n)=>e(t,n)||xp.comparator(t.key,n.key):(e,t)=>xp.comparator(e.key,t.key),this.keyedMap=yv(),this.sortedSet=new Pg(this.comparator)}static emptySet(e){return new bx(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bx))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class _x{constructor(){this.q_=new Pg(xp.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Xf():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class xx{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new xx(e,t,bx.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&av(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ex{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Sx{constructor(){this.queries=new pv((e=>lv(e)),av),this.onlineState="Unknown",this.z_=new Set}}async function Tx(e,t){const n=Zf(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.W_()&&t.G_()&&(r=2):(o=new Ex,r=t.G_()?0:1);try{switch(r){case 0:o.K_=await n.onListen(i,!0);break;case 1:o.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=wx(e,"Initialization of query '".concat(cv(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.U_.push(t),t.j_(n.onlineState),o.K_&&t.H_(o.K_)&&Ax(n)}async function kx(e,t){const n=Zf(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.U_.indexOf(t);e>=0&&(o.U_.splice(e,1),0===o.U_.length?i=t.G_()?0:1:!o.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ix(e,t){const n=Zf(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&Ax(n)}function Cx(e,t,n){const r=Zf(e),i=r.queries.get(t);if(i)for(const o of i.U_)o.onError(n);r.queries.delete(t)}function Ax(e){e.z_.forEach((e=>{e.next()}))}var Rx,Px;(Px=Rx||(Rx={})).J_="default",Px.Cache="cache";class Nx{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xx(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=xx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Rx.Cache}}class Dx{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class Ox{constructor(e){this.serializer=e}Ps(e){return qy(this.serializer,e)}Is(e){return e.metadata.exists?Yy(this.serializer,e.document,!1):ym.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Uy(e)}}class Lx{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mx(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=wp.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new Ox(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Tv()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Zf(e);let o=Tv(),s=mv();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(o=o.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await l_(i,function(e){return rv(Zm(wp.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>s_(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Ox(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await p_(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function Mx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Fx{constructor(e){this.key=e}}class Ux{constructor(e){this.key=e}}class jx{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Tv(),this.mutatedKeys=Tv(),this.Ia=dv(e),this.Ta=new bx(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new _x,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=uv(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:o,Aa:n,Xi:s,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xf()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const s=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==o.length||l?{snapshot:new xx(this.query,e.Ta,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:s}:{fa:s}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new _x,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Tv(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Ux(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Fx(n))})),t}pa(e){this.la=e.hs,this.Pa=Tv();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return xx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class zx{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Bx{constructor(e){this.key=e,this.wa=!1}}class Vx{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new pv((e=>lv(e)),av),this.Da=new Map,this.Ca=new Set,this.va=new Pg(xp.comparator),this.Fa=new Map,this.Ma=new Fb,this.xa={},this.Oa=new Map,this.Na=db.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function qx(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=yE(e);let i;const o=r.ba.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=await Kx(r,t,n,!0),i}async function Hx(e,t){const n=yE(e);await Kx(n,t,!0,!1)}async function Kx(e,t,n,r){const i=await l_(e.localStore,rv(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await Gx(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&K_(e.remoteStore,i),a}async function Gx(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await u_(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return iE(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const o=await u_(e.localStore,t,!0),s=new jx(t,o.hs),a=s.da(o.documents),l=xy.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);iE(e,n,c.fa);const u=new zx(t,n,s);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function Wx(e,t,n){const r=Zf(e),i=r.ba.get(t),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter((e=>!av(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await c_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&G_(r.remoteStore,i.targetId),nE(r,i.targetId)})).catch(Op)):(nE(r,i.targetId),await c_(r.localStore,i.targetId,!0))}async function Qx(e,t){const n=Zf(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),G_(n.remoteStore,r.targetId))}async function Yx(e,t){const n=Zf(e);try{const e=await function(e,t){const n=Zf(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(jg.EMPTY_BYTE_STRING,vp.min()).withLastLimboFreeSnapshotVersion(vp.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=mv(),l=Tv();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(s_(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(vp.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Lp.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&($f(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?$f(r.wa):e.removedDocuments.size>0&&($f(r.wa),r.wa=!1))})),await aE(n,e,t)}catch(e){await Op(e)}}function Jx(e,t,n){const r=Zf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Zf(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&Ax(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xx(e,t,n){const r=Zf(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),o=i&&i.key;if(o){let e=new Pg(xp.comparator);e=e.insert(o,ym.newNoDocument(o,vp.min()));const n=Tv().add(o),i=new _y(vp.min(),new Map,new Pg(fp),e,n);await Yx(r,i),r.va=r.va.remove(o),r.Fa.delete(t),sE(r)}else await c_(r.localStore,t,!1).then((()=>nE(r,t,n))).catch(Op)}async function $x(e,t){const n=Zf(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Zf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Lp.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);$f(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Tv();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);tE(n,r,null),eE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aE(n,e)}catch(e){await Op(e)}}async function Zx(e,t,n){const r=Zf(e);try{const e=await function(e,t){const n=Zf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>($f(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);tE(r,t,n),eE(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await aE(r,e)}catch(n){await Op(n)}}function eE(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function tE(e,t,n){const r=Zf(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function nE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||rE(e,t)}))}function rE(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(G_(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),sE(e))}function iE(e,t,n){for(const r of n)r instanceof Fx?(e.Ma.addReference(r.key,t),oE(e,r)):r instanceof Ux?(Wf("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||rE(e,r.key)):Xf()}function oE(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Wf("SyncEngine","New document in limbo: "+n),e.Ca.add(r),sE(e))}function sE(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new xp(wp.fromString(t)),r=e.Na.next();e.Fa.set(r,new Bx(n)),e.va=e.va.insert(n,r),K_(e.remoteStore,new uw(rv(Zm(n.path)),r,"TargetPurposeLimboResolution",Qp.oe))}}async function aE(e,t,n){const r=Zf(e),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{s.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Zb.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Sa.h_(i),await async function(e,t){const n=Zf(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Lp.forEach(t,(t=>Lp.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Lp.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Bp(e))throw e;Wf("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function lE(e,t){const n=Zf(e);if(!n.currentUser.isEqual(t)){Wf("SyncEngine","User change. New user:",t.toKey());const e=await i_(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new tp(ep.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await aE(n,e.us)}}function cE(e,t){const n=Zf(e),r=n.Fa.get(t);if(r&&r.wa)return Tv().add(r.key);{let e=Tv();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function uE(e,t){const n=Zf(e),r=await u_(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&iE(n,t.targetId,i.fa),i}async function hE(e,t){const n=Zf(e);return d_(n.localStore,t).then((e=>aE(n,e)))}async function dE(e,t,n,r){const i=Zf(e),o=await function(e,t){const n=Zf(e),r=Zf(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Lp.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await ox(i.remoteStore):"acknowledged"===n||"rejected"===n?(tE(i,t,r||null),eE(i,t),function(e,t){Zf(Zf(e).mutationQueue).Mn(t)}(i.localStore,t)):Xf(),await aE(i,o)):Wf("SyncEngine","Cannot apply mutation batch with id: "+t)}async function fE(e,t,n){const r=Zf(e),i=[],o=[];for(const s of t){let e;const t=r.Da.get(s);if(t&&0!==t.length){e=await l_(r.localStore,rv(t[0]));for(const e of t){const t=r.ba.get(e),n=await uE(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await h_(r.localStore,s);e=await l_(r.localStore,t),await Gx(r,pE(t),s,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(o),i}function pE(e){return $m(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gE(e){return function(e){return Zf(Zf(e).persistence).Bi()}(Zf(e).localStore)}async function mE(e,t,n,r){const i=Zf(e);if(i.La)return void Wf("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await d_(i.localStore,hv(o[0])),r=_y.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,jg.EMPTY_BYTE_STRING);await aE(i,e,r);break}case"rejected":await c_(i.localStore,t,!0),nE(i,t,r);break;default:Xf()}}async function vE(e,t,n){const r=yE(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Wf("SyncEngine","Adding an already active target "+e);continue}const t=await h_(r.localStore,e),n=await l_(r.localStore,t);await Gx(r,pE(t),n.targetId,!1,n.resumeToken),K_(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await c_(r.localStore,e,!1).then((()=>{G_(r.remoteStore,e),nE(r,e)})).catch(Op)}}function yE(e){const t=Zf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xx.bind(null,t),t.Sa.h_=Ix.bind(null,t.eventManager),t.Sa.ka=Cx.bind(null,t.eventManager),t}function wE(e){const t=Zf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$x.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zx.bind(null,t),t}class bE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=L_(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return r_(this.persistence,new t_,e.initialUser,this.serializer)}createPersistence(e){return new qb(Kb.Hr,this.serializer)}createSharedClientState(e){return new S_}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _E extends bE{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await wE(this.Qa.syncEngine),await ox(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return r_(this.persistence,new t_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new wb(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Wp(t,this.persistence);return new Gp(e.asyncQueue,n)}createPersistence(e){const t=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ib.withCacheSize(this.cacheSizeBytes):ib.DEFAULT;return new Yb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,D_(),O_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new S_}}class xE extends _E{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof E_&&(this.sharedClientState.syncEngine={Zs:dE.bind(null,t),Xs:mE.bind(null,t),eo:vE.bind(null,t),Bi:gE.bind(null,t),Ys:hE.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Zf(e);if(yE(n),wE(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await fE(n,e.toArray());n.La=!0,await gx(n.remoteStore,!0);for(const r of t)K_(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(nE(n,i),c_(n.localStore,i,!0)))),G_(n.remoteStore,i)})),await t,await fE(n,e),function(e){const t=Zf(e);t.Fa.forEach(((e,n)=>{G_(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new Pg(xp.comparator)}(n),n.La=!1,await gx(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=D_();if(!E_.D(t))throw new tp(ep.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new E_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class EE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Jx(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lE.bind(null,this.syncEngine),await gx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Sx}createDatastore(e){const t=L_(e.databaseInfo.databaseId),n=function(e){return new N_(e)}(e.databaseInfo);return function(e,t,n,r){return new z_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new V_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Jx(this.syncEngine,e,0)),k_.D()?new k_:new T_)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Vx(e,t,n,r,i,o);return s&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Zf(e);Wf("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await H_(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function SE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class TE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Qf("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class kE{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new np,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new Dx(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class IE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new tp(ep.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Zf(e),r={documents:t.map((e=>Vy(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,wp.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){$f(!!t.found),t.found.name,t.found.updateTime;const n=qy(e,t.found.name),r=Uy(t.found.updateTime),i=t.found.createTime?Uy(t.found.createTime):vp.min(),o=new mm({mapValue:{fields:t.found.fields}});return ym.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){$f(!!t.missing),$f(!!t.readTime);const n=qy(e,t.missing),r=Uy(t.readTime);return ym.newNoDocument(n,r)}(e,t):Xf()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());$f(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new iy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=xp.fromPath(t);this.mutations.push(new oy(n,this.precondition(n)))})),await async function(e,t){const n=Zf(e),r={writes:t.map((e=>Jy(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,wp.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xf();t=vp.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new tp(ep.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vp.min())?Kv.exists(!1):Kv.updateTime(t):Kv.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vp.min()))throw new tp(ep.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kv.updateTime(t)}return Kv.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CE{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new M_(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new IE(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Yp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dy(t)}return!1}}class AE{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=qf.UNAUTHENTICATED,this.clientId=dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Wf("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Wf("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tp(ep.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new np;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wx(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function RE(e,t){e.asyncQueue.verifyOperationInProgress(),Wf("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await i_(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function PE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await DE(e);Wf("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>px(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>px(t.remoteStore,n))),e._onlineComponents=t}function NE(e){return"FirebaseError"===e.name?e.code===ep.FAILED_PRECONDITION||e.code===ep.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function DE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Wf("FirestoreClient","Using user provided OfflineComponentProvider");try{await RE(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!NE(n))throw n;Yf("Error using user provided cache. Falling back to memory cache: "+n),await RE(e,new bE)}}else Wf("FirestoreClient","Using default OfflineComponentProvider"),await RE(e,new bE);return e._offlineComponents}async function OE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Wf("FirestoreClient","Using user provided OnlineComponentProvider"),await PE(e,e._uninitializedComponentsProvider._online)):(Wf("FirestoreClient","Using default OnlineComponentProvider"),await PE(e,new EE))),e._onlineComponents}function LE(e){return DE(e).then((e=>e.persistence))}function ME(e){return DE(e).then((e=>e.localStore))}function FE(e){return OE(e).then((e=>e.remoteStore))}function UE(e){return OE(e).then((e=>e.syncEngine))}function jE(e){return OE(e).then((e=>e.datastore))}async function zE(e){const t=await OE(e),n=t.eventManager;return n.onListen=qx.bind(null,t.syncEngine),n.onUnlisten=Wx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Hx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qx.bind(null,t.syncEngine),n}function BE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new np;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new TE({next:o=>{t.enqueueAndForget((()=>kx(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new tp(ep.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new tp(ep.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Nx(Zm(n.path),o,{includeMetadataChanges:!0,ra:!0});return Tx(e,s)}(await zE(e),e.asyncQueue,t,n,r))),r.promise}function VE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new np;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new TE({next:n=>{t.enqueueAndForget((()=>kx(e,s))),n.fromCache&&"server"===r.source?i.reject(new tp(ep.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Nx(n,o,{includeMetadataChanges:!0,ra:!0});return Tx(e,s)}(await zE(e),e.asyncQueue,t,n,r))),r.promise}function qE(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?gy().encode(e):e,function(e,t){return new kE(e,t)}(function(e,t){if(e instanceof Uint8Array)return SE(e,t);if(e instanceof ArrayBuffer)return SE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,L_(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Zf(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Zf(e),r=Uy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Mx(r));const i=new Lx(r,e.localStore,t.serializer);let o=await t.qa();for(;o;){const e=await i._a(o);e&&n._updateProgress(e),o=await t.qa()}const s=await i.complete();return await aE(e,s.ca,void 0),await function(e,t){const n=Zf(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ua)}catch(e){return Yf("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await UE(e),i,r)}))}function HE(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const KE=new Map;function GE(e,t,n){if(!n)throw new tp(ep.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function WE(e,t,n,r){if(!0===t&&!0===r)throw new tp(ep.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function QE(e){if(!xp.isDocumentKey(e))throw new tp(ep.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function YE(e){if(xp.isDocumentKey(e))throw new tp(ep.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function JE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Xf()}function XE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tp(ep.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=JE(e);throw new tp(ep.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function $E(e,t){if(t<=0)throw new tp(ep.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class ZE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new tp(ep.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tp(ep.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HE(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tp(ep.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new tp(ep.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new tp(ep.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tp(ep.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tp(ep.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ip;switch(e.type){case"firstParty":return new lp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tp(ep.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KE.get(e);t&&(Wf("ComponentProvider","Removing Datastore"),KE.delete(e),t.terminate())}(this),Promise.resolve()}}function tS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=XE(e,eS))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Yf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=qf.MOCK_USER;else{t=os(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new tp(ep.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new qf(o)}e._authCredentials=new op(new rp(t,n))}}class nS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nS(this.firestore,e,this._query)}}class rS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rS(this.firestore,e,this._key)}}class iS extends nS{constructor(e,t,n){super(e,t,Zm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rS(this.firestore,null,new xp(e))}withConverter(e){return new iS(this.firestore,e,this._path)}}function oS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ks(e),GE("collection","path",t),e instanceof eS){const n=wp.fromString(t,...r);return YE(n),new iS(e,null,n)}{if(!(e instanceof rS||e instanceof iS))throw new tp(ep.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wp.fromString(t,...r));return YE(n),new iS(e.firestore,null,n)}}function sS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ks(e),1===arguments.length&&(t=dp.newId()),GE("doc","path",t),e instanceof eS){const n=wp.fromString(t,...r);return QE(n),new rS(e,null,new xp(n))}{if(!(e instanceof rS||e instanceof iS))throw new tp(ep.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wp.fromString(t,...r));return QE(n),new rS(e.firestore,e instanceof iS?e.converter:null,new xp(n))}}function aS(e,t){return e=ks(e),t=ks(t),(e instanceof rS||e instanceof iS)&&(t instanceof rS||t instanceof iS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function lS(e,t){return e=ks(e),t=ks(t),e instanceof nS&&t instanceof nS&&e.firestore===t.firestore&&av(e._query,t._query)&&e.converter===t.converter}class cS{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new M_(this,"async_queue_retry"),this.hu=()=>{const e=O_();e&&Wf("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=O_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=O_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new np;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(CM){if(!Bp(CM))throw CM;Wf("AsyncQueue","Operation failed with retryable error: "+CM)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Qf("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=yx.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Xf()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function uS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hS{constructor(){this._progressObserver={},this._taskCompletionResolver=new np,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dS extends eS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cS,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()}}function fS(e){return e._firestoreClient||pS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pS(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Wg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,HE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new AE(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function gS(e,t,n){const r=new np;return e.asyncQueue.enqueue((async()=>{try{await RE(e,n),await PE(e,t),r.resolve()}catch(e){const n=e;if(!NE(n))throw n;Yf("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function mS(e){return function(e){const t=new np;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Zf(e);X_(n.remoteStore)||Wf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Zf(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=wx(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await UE(e),t))),t.promise}(fS(e=XE(e,dS)))}function vS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await LE(e),n=await FE(e);return t.setNetworkEnabled(!0),function(e){const t=Zf(e);return t.M_.delete(0),q_(t)}(n)}))}(fS(e=XE(e,dS)))}function yS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await LE(e),n=await FE(e);return t.setNetworkEnabled(!1),async function(e){const t=Zf(e);t.M_.add(0),await H_(t),t.N_.set("Offline")}(n)}))}(fS(e=XE(e,dS)))}function wS(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Zf(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await ME(e),t)))}(fS(e=XE(e,dS)),t).then((t=>t?new nS(e,null,t.query):null))}function bS(e){if(e._initialized||e._terminated)throw new tp(ep.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _S{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _S(jg.fromBase64String(e))}catch(e){throw new tp(ep.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _S(jg.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new tp(ep.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _p(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ES{constructor(e){this._methodName=e}}class SS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tp(ep.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tp(ep.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fp(this._lat,e._lat)||fp(this._long,e._long)}}const TS=/^__.*__$/;class kS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ey(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zv(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ey(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xf()}}class AS{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new AS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return YS(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(CS(this.fu)&&TS.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class RS{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||L_(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new AS({fu:e,methodName:t,vu:n,path:_p.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PS(e){const t=e._freezeSettings(),n=L_(e._databaseId);return new RS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NS(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Fu(o.merge||o.mergeFields?2:0,t,n,i);KS("Data must be an object, but it was:",s,r);const a=qS(r,s);let l,c;if(o.merge)l=new Fg(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=GS(t,r,n);if(!s.contains(i))throw new tp(ep.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));JS(e,i)||e.push(i)}l=new Fg(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new kS(new mm(a),l,c)}class DS extends ES{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof DS}}function OS(e,t,n){return new AS({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class LS extends ES{_toFieldTransform(e){return new qv(e.path,new Lv)}isEqual(e){return e instanceof LS}}class MS extends ES{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=OS(this,e,!0),n=this.Mu.map((e=>VS(e,t))),r=new Mv(n);return new qv(e.path,r)}isEqual(e){return e instanceof MS&&ys(this.Mu,e.Mu)}}class FS extends ES{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=OS(this,e,!0),n=this.Mu.map((e=>VS(e,t))),r=new Uv(n);return new qv(e.path,r)}isEqual(e){return e instanceof FS&&ys(this.Mu,e.Mu)}}class US extends ES{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new zv(e.serializer,Rv(e.serializer,this.xu));return new qv(e.path,t)}isEqual(e){return e instanceof US&&this.xu===e.xu}}function jS(e,t,n,r){const i=e.Fu(1,t,n);KS("Data must be an object, but it was:",i,r);const o=[],s=mm.empty();Ag(r,((e,r)=>{const a=QS(t,e,n);r=ks(r);const l=i.Su(a);if(r instanceof DS)o.push(a);else{const e=VS(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Fg(o);return new IS(s,a,i.fieldTransforms)}function zS(e,t,n,r,i,o){const s=e.Fu(1,t,n),a=[GS(t,r,n)],l=[i];if(o.length%2!=0)throw new tp(ep.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(GS(t,o[d])),l.push(o[d+1]);const c=[],u=mm.empty();for(let d=a.length-1;d>=0;--d)if(!JS(c,a[d])){const e=a[d];let t=l[d];t=ks(t);const n=s.Su(e);if(t instanceof DS)c.push(e);else{const r=VS(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Fg(c);return new IS(u,h,s.fieldTransforms)}function BS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return VS(n,e.Fu(r?4:3,t))}function VS(e,t){if(HS(e=ks(e)))return KS("Unsupported field value:",t,e),qS(e,t);if(e instanceof ES)return function(e,t){if(!CS(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=VS(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ks(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rv(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=mp.fromDate(e);return{timestampValue:Ly(t.serializer,n)}}if(e instanceof mp){const n=new mp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ly(t.serializer,n)}}if(e instanceof SS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _S)return{bytesValue:My(t.serializer,e._byteString)};if(e instanceof rS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:jy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(JE(e)))}(e,t)}function qS(e,t){const n={};return Rg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ag(e,((e,r)=>{const i=VS(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function HS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mp||e instanceof SS||e instanceof _S||e instanceof rS||e instanceof ES)}function KS(e,t,n){if(!HS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=JE(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function GS(e,t,n){if((t=ks(t))instanceof xS)return t._internalPath;if("string"==typeof t)return QS(e,t);throw YS("Field path arguments must be of type string or ",e,!1,void 0,n)}const WS=new RegExp("[~\\*/\\[\\]]");function QS(e,t,n){if(t.search(WS)>=0)throw YS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xS(...t.split("."))._internalPath}catch(r){throw YS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function YS(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new tp(ep.INVALID_ARGUMENT,a+e+l)}function JS(e,t){return e.some((e=>e.isEqual(t)))}class XS{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $S(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $S extends XS{data(){return super.data()}}function ZS(e,t){return"string"==typeof t?QS(e,t):t instanceof xS?t._internalPath:t._delegate._internalPath}function eT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tp(ep.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tT{}class nT extends tT{}function rT(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof tT&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof oT)).length,n=e.filter((e=>e instanceof iT)).length;if(t>1||t>0&&n>0)throw new tp(ep.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class iT extends nT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new iT(e,t,n)}_apply(e){const t=this._parse(e);return pT(e._query,t),new nS(e.firestore,e.converter,ov(e._query,t))}_parse(e){const t=PS(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new tp(ep.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){fT(s,o);const t=[];for(const n of s)t.push(dT(r,e,n));a={arrayValue:{values:t}}}else a=dT(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||fT(s,o),a=BS(n,t,s,"in"===o||"not-in"===o);return Tm.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class oT extends tT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:km.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)pT(n,i),n=ov(n,i)}(e._query,t),new nS(e.firestore,e.converter,ov(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sT extends nT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new tp(ep.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tp(ep.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xm(t,n)}(e._query,this._field,this._direction);return new nS(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function aT(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ZS("orderBy",e);return sT._create(n,t)}class lT extends nT{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new lT(e,t,n)}_apply(e){return new nS(e.firestore,e.converter,sv(e._query,this._limit,this._limitType))}}class cT extends nT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new cT(e,t,n)}_apply(e){const t=hT(e,this.type,this._docOrFields,this._inclusive);return new nS(e.firestore,e.converter,function(e,t){return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class uT extends nT{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uT(e,t,n)}_apply(e){const t=hT(e,this.type,this._docOrFields,this._inclusive);return new nS(e.firestore,e.converter,function(e,t){return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function hT(e,t,n,r){if(n[0]=ks(n[0]),n[0]instanceof XS)return function(e,t,n,r,i){if(!r)throw new tp(ep.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of nv(e))if(s.field.isKeyField())o.push(im(t,r.key));else{const e=r.data.field(s.field);if(Hg(e))throw new tp(ep.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new tp(ep.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new wm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=PS(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new tp(ep.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new tp(ep.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!tv(e)&&-1!==o.indexOf("/"))throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(wp.fromString(o));if(!xp.isDocumentKey(n))throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new xp(n);a.push(im(t,i))}else{const e=BS(n,r,o);a.push(e)}}return new wm(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function dT(e,t,n){if("string"==typeof(n=ks(n))){if(""===n)throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tv(t)&&-1!==n.indexOf("/"))throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(wp.fromString(n));if(!xp.isDocumentKey(r))throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return im(e,new xp(r))}if(n instanceof rS)return im(e,n._key);throw new tp(ep.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(JE(n),"."))}function fT(e,t){if(!Array.isArray(e)||0===e.length)throw new tp(ep.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function pT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new tp(ep.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new tp(ep.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class gT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xf()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ag(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new SS(Vg(e.latitude),Vg(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Kg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gg(e));default:return null}}convertTimestamp(e){const t=Bg(e);return new mp(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wp.fromString(e);$f(cw(n));const r=new Qg(n.get(1),n.get(3)),i=new xp(n.popFirst(5));return r.isEqual(t)||Qf("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function mT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vT extends gT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _S(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rS(this.firestore,null,t)}}class yT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wT extends XS{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ZS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bT extends wT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _T{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bT(this._firestore,this._userDataWriter,n.key,n,new yT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new tp(ep.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new bT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new bT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:xT(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function xT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xf()}}function ET(e,t){return e instanceof wT&&t instanceof wT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _T&&t instanceof _T&&e._firestore===t._firestore&&lS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ST extends gT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _S(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rS(this.firestore,null,t)}}function TT(e){e=XE(e,rS);const t=XE(e.firestore,dS),n=fS(t),r=new ST(t);return function(e,t){const n=new np;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Zf(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new tp(ep.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=wx(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await ME(e),t,n))),n.promise}(n,e._key).then((n=>new wT(t,r,e._key,n,new yT(null!==n&&n.hasLocalMutations,!0),e.converter)))}function kT(e){e=XE(e,nS);const t=XE(e.firestore,dS),n=fS(t),r=new ST(t);return eT(e._query),VE(n,e._query).then((n=>new _T(t,r,e,n)))}function IT(e){e=XE(e,nS);const t=XE(e.firestore,dS),n=fS(t),r=new ST(t);return function(e,t){const n=new np;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await u_(e,t,!0),i=new jx(t,r.hs),o=i.da(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=wx(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ME(e),t,n))),n.promise}(n,e._query).then((n=>new _T(t,r,e,n)))}function CT(e,t,n){e=XE(e,rS);const r=XE(e.firestore,dS),i=mT(e.converter,t,n);return NT(r,[NS(PS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kv.none())])}function AT(e,t,n){e=XE(e,rS);const r=XE(e.firestore,dS),i=PS(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=ks(t))||t instanceof xS?zS(i,"updateDoc",e._key,t,n,a):jS(i,"updateDoc",e._key,t),NT(r,[o.toMutation(e._key,Kv.exists(!0))])}function RT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=ks(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||uS(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(uS(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof rS)h=XE(e.firestore,dS),d=Zm(e._key.path),u={next:t=>{n[l]&&n[l](DT(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=XE(e,nS);h=XE(t.firestore,dS),d=t._query;const r=new ST(h);u={next:e=>{n[l]&&n[l](new _T(h,r,t,e))},error:n[l+1],complete:n[l+2]},eT(e._query)}return function(e,t,n,r){const i=new TE(r),o=new Nx(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Tx(await zE(e),o))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>kx(await zE(e),o)))}}(fS(h),d,c,u)}function PT(e,t){return function(e,t){const n=new TE(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Zf(e).z_.add(t),t.next()}(await zE(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Zf(e).z_.delete(t)}(await zE(e),n)))}}(fS(e=XE(e,dS)),uS(t)?t:{next:t})}function NT(e,t){return function(e,t){const n=new np;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=wE(e);try{const e=await function(e,t){const n=Zf(e),r=mp.now(),i=t.reduce(((e,t)=>e.add(t.key)),Tv());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=mv(),l=Tv();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Xv(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new ey(e.key,t,vm(t.value.mapValue),Kv.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:wv(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Pg(fp)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await aE(r,e.changes),await ox(r.remoteStore)}catch(e){const t=wx(e,"Failed to persist write");n.reject(t)}}(await UE(e),t,n))),n.promise}(fS(e),t)}function DT(e,t,n){const r=n.docs.get(t._key),i=new ST(e);return new wT(e,i,t._key,r,new yT(n.hasPendingWrites,n.fromCache),t.converter)}const OT={maxAttempts:5};class LT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=PS(e)}set(e,t,n){this._verifyNotCommitted();const r=MT(e,this._firestore),i=mT(r.converter,t,n),o=NS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Kv.none())),this}update(e,t,n){this._verifyNotCommitted();const r=MT(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=ks(t))||t instanceof xS?zS(this._dataReader,"WriteBatch.update",r._key,t,n,s):jS(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Kv.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=MT(e,this._firestore);return this._mutations=this._mutations.concat(new iy(t._key,Kv.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tp(ep.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function MT(e,t){if((e=ks(e)).firestore!==t)throw new tp(ep.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class FT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=PS(e)}get(e){const t=MT(e,this._firestore),n=new vT(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Xf();const r=e[0];if(r.isFoundDocument())return new XS(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new XS(this._firestore,n,t._key,null,t.converter);throw Xf()}))}set(e,t,n){const r=MT(e,this._firestore),i=mT(r.converter,t,n),o=NS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=MT(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=ks(t))||t instanceof xS?zS(this._dataReader,"Transaction.update",r._key,t,n,s):jS(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=MT(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=MT(e,this._firestore),n=new ST(this._firestore);return super.get(e).then((e=>new wT(this._firestore,n,t._key,e._document,new yT(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hf=e}(Wa),Ua(new Is("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new dS(new sp(e.getProvider("auth-internal")),new up(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tp(ep.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qg(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Za(Vf,"4.6.3",e),Za(Vf,"4.6.3","esm2017")}();function UT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new tp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function jT(){if("undefined"===typeof Uint8Array)throw new tp("unimplemented","Uint8Arrays are not available in this environment.")}function zT(){if("undefined"==typeof atob)throw new tp("unimplemented","Blobs are unavailable in Firestore in this environment.")}class BT{constructor(e){this._delegate=e}static fromBase64String(e){return zT(),new BT(_S.fromBase64String(e))}static fromUint8Array(e){return jT(),new BT(_S.fromUint8Array(e))}toBase64(){return zT(),this._delegate.toBase64()}toUint8Array(){return jT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class qT{enableIndexedDbPersistence(e,t){return function(e,t){bS(e=XE(e,dS));const n=fS(e);if(n._uninitializedComponentsProvider)throw new tp(ep.FAILED_PRECONDITION,"SDK cache is already specified.");Yf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new EE;return gS(n,i,new _E(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){bS(e=XE(e,dS));const t=fS(e);if(t._uninitializedComponentsProvider)throw new tp(ep.FAILED_PRECONDITION,"SDK cache is already specified.");Yf("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new EE;return gS(t,r,new xE(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new tp(ep.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new np;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Fp.D())return Promise.resolve();const t=e+"main";await Fp.delete(t)}($b(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class HT{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qg||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Yf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tS(this._delegate,e,t,n)}enableNetwork(){return vS(this._delegate)}disableNetwork(){return yS(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,WE("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mS(this._delegate)}onSnapshotsInSync(e){return PT(this._delegate,e)}get app(){if(!this._appCompat)throw new tp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ik(this,oS(this._delegate,e))}catch(CM){throw JT(CM,"collection()","Firestore.collection()")}}doc(e){try{return new YT(this,sS(this._delegate,e))}catch(CM){throw JT(CM,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tk(this,function(e,t){if(e=XE(e,eS),GE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new tp(ep.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nS(e,null,function(e){return new Xm(wp.emptyPath(),e)}(t))}(this._delegate,e))}catch(CM){throw JT(CM,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=XE(e,dS);const r=Object.assign(Object.assign({},OT),n);return function(e){if(e.maxAttempts<1)throw new tp(ep.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new np;return e.asyncQueue.enqueueAndForget((async()=>{const i=await jE(e);new CE(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(fS(e),(n=>t(new FT(e,n))),r)}(this._delegate,(t=>e(new GT(this,t))))}batch(){return fS(this._delegate),new WT(new LT(this._delegate,(e=>NT(this._delegate,e))))}loadBundle(e){return function(e,t){const n=fS(e=XE(e,dS)),r=new hS;return qE(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return wS(this._delegate,e).then((e=>e?new tk(this,e):null))}}class KT extends gT{constructor(e){super(),this.firestore=e}convertBytes(e){return new BT(new _S(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return YT.forKey(t,this.firestore,null)}}class GT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}get(e){const t=ok(e);return this._delegate.get(t).then((e=>new ZT(this._firestore,new wT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=ok(e);return n?(UT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=ok(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=ok(e);return this._delegate.delete(t),this}}class WT{constructor(e){this._delegate=e}set(e,t,n){const r=ok(e);return n?(UT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=ok(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=ok(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class QT{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new bT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ek(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=QT.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new QT(e,new KT(e),t),r.set(t,i)),i}}QT.INSTANCES=new WeakMap;class YT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}static forPath(e,t,n){if(e.length%2!==0)throw new tp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new YT(t,new rS(t._delegate,n,new xp(e)))}static forKey(e,t,n){return new YT(t,new rS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ik(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ik(this.firestore,oS(this._delegate,e))}catch(CM){throw JT(CM,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ks(e))instanceof rS&&aS(this._delegate,e)}set(e,t){t=UT("DocumentReference.set",t);try{return t?CT(this._delegate,e,t):CT(this._delegate,e)}catch(CM){throw JT(CM,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?AT(this._delegate,e):AT(this._delegate,e,t,...r)}catch(CM){throw JT(CM,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return NT(XE(e.firestore,dS),[new iy(e._key,Kv.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=XT(t),i=$T(t,(e=>new ZT(this.firestore,new wT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return RT(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?TT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=XE(e,rS);const t=XE(e.firestore,dS);return BE(fS(t),e._key,{source:"server"}).then((n=>DT(t,e,n)))}(this._delegate):function(e){e=XE(e,rS);const t=XE(e.firestore,dS);return BE(fS(t),e._key).then((n=>DT(t,e,n)))}(this._delegate),t.then((e=>new ZT(this.firestore,new wT(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new YT(this.firestore,e?this._delegate.withConverter(QT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function JT(e,t,n){return e.message=e.message.replace(t,n),e}function XT(e){for(const t of e)if("object"===typeof t&&!VT(t))return t;return{}}function $T(e,t){var n,r;let i;return i=VT(e[0])?e[0]:VT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new YT(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ET(this._delegate,e._delegate)}}class ek extends ZT{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Xf()}(void 0!==t),t}}class tk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}where(e,t,n){try{return new tk(this.firestore,rT(this._delegate,function(e,t,n){const r=t,i=ZS("where",e);return iT._create(i,r,n)}(e,t,n)))}catch(CM){throw JT(CM,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tk(this.firestore,rT(this._delegate,aT(e,t)))}catch(CM){throw JT(CM,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tk(this.firestore,rT(this._delegate,function(e){return $E("limit",e),lT._create("limit",e,"F")}(e)))}catch(CM){throw JT(CM,"limit()","Query.limit()")}}limitToLast(e){try{return new tk(this.firestore,rT(this._delegate,function(e){return $E("limitToLast",e),lT._create("limitToLast",e,"L")}(e)))}catch(CM){throw JT(CM,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new tk(this.firestore,rT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cT._create("startAt",t,!0)}(...arguments)))}catch(CM){throw JT(CM,"startAt()","Query.startAt()")}}startAfter(){try{return new tk(this.firestore,rT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cT._create("startAfter",t,!1)}(...arguments)))}catch(CM){throw JT(CM,"startAfter()","Query.startAfter()")}}endBefore(){try{return new tk(this.firestore,rT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uT._create("endBefore",t,!1)}(...arguments)))}catch(CM){throw JT(CM,"endBefore()","Query.endBefore()")}}endAt(){try{return new tk(this.firestore,rT(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uT._create("endAt",t,!0)}(...arguments)))}catch(CM){throw JT(CM,"endAt()","Query.endAt()")}}isEqual(e){return lS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?IT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=XE(e,nS);const t=XE(e.firestore,dS),n=fS(t),r=new ST(t);return VE(n,e._query,{source:"server"}).then((n=>new _T(t,r,e,n)))}(this._delegate):kT(this._delegate),t.then((e=>new rk(this.firestore,new _T(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=XT(t),i=$T(t,(e=>new rk(this.firestore,new _T(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return RT(this._delegate,r,i)}withConverter(e){return new tk(this.firestore,e?this._delegate.withConverter(QT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ek(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tk(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new ek(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new nk(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new ek(this._firestore,n))}))}isEqual(e){return ET(this._delegate,e._delegate)}}class ik extends tk{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new YT(this.firestore,e):null}doc(e){try{return new YT(this.firestore,void 0===e?sS(this._delegate):sS(this._delegate,e))}catch(CM){throw JT(CM,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=XE(e.firestore,dS),r=sS(e),i=mT(e.converter,t);return NT(n,[NS(PS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kv.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new YT(this.firestore,e)))}isEqual(e){return aS(this._delegate,e._delegate)}withConverter(e){return new ik(this.firestore,e?this._delegate.withConverter(QT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ok(e){return XE(e,rS)}class sk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new xS(...t)}static documentId(){return new sk(_p.keyField().canonicalString())}isEqual(e){return(e=ks(e))instanceof xS&&this._delegate._internalPath.isEqual(e._internalPath)}}class ak{constructor(e){this._delegate=e}static serverTimestamp(){const e=new LS("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ak(e)}static delete(){const e=new DS("deleteField");return e._methodName="FieldValue.delete",new ak(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MS("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ak(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FS("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ak(e)}static increment(e){const t=function(e){return new US("increment",e)}(e);return t._methodName="FieldValue.increment",new ak(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lk={Firestore:HT,GeoPoint:SS,Timestamp:mp,Blob:BT,Transaction:GT,WriteBatch:WT,DocumentReference:YT,DocumentSnapshot:ZT,Query:tk,QueryDocumentSnapshot:ek,QuerySnapshot:rk,CollectionReference:ik,FieldPath:sk,FieldValue:ak,setLogLevel:function(e){!function(e){Kf.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Is("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},lk)))}(e,((e,t)=>new HT(e,t,new qT))),e.registerVersion("@firebase/firestore-compat","0.3.32")}(yl);const ck="firebasestorage.googleapis.com",uk="storageBucket";class hk extends ps{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(pk(e),"Firebase Storage: ".concat(t," (").concat(pk(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hk.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var dk,fk;function pk(e){return"storage/"+e}function gk(){return new hk(dk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function mk(){return new hk(dk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vk(){return new hk(dk.CANCELED,"User canceled the upload/download.")}function yk(){return new hk(dk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wk(e){return new hk(dk.INVALID_ARGUMENT,e)}function bk(){return new hk(dk.APP_DELETED,"The Firebase app was deleted.")}function _k(e){return new hk(dk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xk(e,t){return new hk(dk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ek(e){throw new hk(dk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(dk||(dk={}));class Sk{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Sk.makeFromUrl(e,t)}catch(CM){return new Sk(e,"")}if(""===n.path)return n;throw r=e,new hk(dk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===ck?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Sk(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new hk(dk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Tk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function kk(e){return"string"===typeof e||e instanceof String}function Ik(e){return Ck()&&e instanceof Blob}function Ck(){return"undefined"!==typeof Blob}function Ak(e,t,n,r){if(r<t)throw wk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw wk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Rk(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Pk(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Nk(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(fk||(fk={}));class Dk{constructor(e,t,n,r,i,o,s,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ok(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===fk.NO_ERROR,i=n.getStatus();if(!t||Nk(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===fk.ABORT;return void e(!1,new Ok(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Ok(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(CM){r(CM)}else if(null!==i){const e=gk();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?bk():vk())}else{r(mk())}};this.canceled_?t(0,new Ok(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ok{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Lk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Mk(){const e=Lk();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ck())return new Blob(n);throw new hk(dk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Fk(e){if("undefined"===typeof atob)throw t="base-64",new hk(dk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Uk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jk{constructor(e,t){this.data=e,this.contentType=t||null}}function zk(e,t){switch(e){case Uk.RAW:return new jk(Bk(t));case Uk.BASE64:case Uk.BASE64URL:return new jk(Vk(e,t));case Uk.DATA_URL:return new jk(function(e){const t=new qk(e);return t.base64?Vk(Uk.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(CM){throw xk(Uk.DATA_URL,"Malformed data URL.")}return Bk(t)}(t.rest)}(t),new qk(t).contentType)}throw gk()}function Bk(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Vk(e,t){switch(e){case Uk.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw xk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Uk.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw xk(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Fk(t)}catch(CM){if(CM.message.includes("polyfill"))throw CM;throw xk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw xk(Uk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Hk{constructor(e,t){let n=0,r="";Ik(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ik(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Hk(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Hk(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ck()){const e=t.map((e=>e instanceof Hk?e.data_:e));return new Hk(Mk.apply(null,e))}{const e=t.map((e=>kk(e)?zk(Uk.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Hk(r,!0)}}uploadData(){return this.data_}}function Kk(e){let t;try{t=JSON.parse(e)}catch(CM){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Gk(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Wk(e,t){return t}class Qk{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Wk}}let Yk=null;function Jk(){if(Yk)return Yk;const e=[];e.push(new Qk("bucket")),e.push(new Qk("generation")),e.push(new Qk("metageneration")),e.push(new Qk("name","fullPath",!0));const t=new Qk("name");t.xform=function(e,t){return function(e){return!kk(e)||e.length<2?e:Gk(e)}(t)},e.push(t);const n=new Qk("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Qk("timeCreated")),e.push(new Qk("updated")),e.push(new Qk("md5Hash",null,!0)),e.push(new Qk("cacheControl",null,!0)),e.push(new Qk("contentDisposition",null,!0)),e.push(new Qk("contentEncoding",null,!0)),e.push(new Qk("contentLanguage",null,!0)),e.push(new Qk("contentType",null,!0)),e.push(new Qk("metadata","customMetadata",!0)),Yk=e,Yk}function Xk(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Sk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function $k(e,t,n){const r=Kk(t);if(null===r)return null;return Xk(e,r,n)}function Zk(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const eI="prefixes",tI="items";function nI(e,t,n){const r=Kk(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eI])for(const i of n[eI]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new Sk(t,n));r.prefixes.push(o)}if(n[tI])for(const i of n[tI]){const n=e._makeStorageReference(new Sk(t,i.name));r.items.push(n)}return r}(e,t,r)}class rI{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function iI(e){if(!e)throw gk()}function oI(e,t){return function(n,r){const i=$k(e,r,t);return iI(null!==i),i}}function sI(e,t){return function(n,r){const i=$k(e,r,t);return iI(null!==i),function(e,t,n,r){const i=Kk(t);if(null===i)return null;if(!kk(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent,a=o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return Rk("/b/"+s(i)+"/o/"+s(o),n,r)+Pk({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function aI(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new hk(dk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new hk(dk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new hk(dk.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new hk(dk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function lI(e){const t=aI(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new hk(dk.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cI(e,t,n){const r=Rk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new rI(r,"GET",oI(e,n),i);return o.errorHandler=lI(t),o}function uI(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=Rk(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new rI(s,"GET",function(e,t){return function(n,r){const i=nI(e,t,r);return iI(null!==i),i}}(e,t.bucket),a);return l.urlParams=o,l.errorHandler=aI(t),l}function hI(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function dI(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=hI(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zk(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Hk.getBlob(c,r,u);if(null===h)throw yk();const d={name:l.fullPath},f=Rk(o,e.host,e._protocol),p=e.maxUploadRetryTime,g=new rI(f,"POST",oI(e,n),p);return g.urlParams=d,g.headers=s,g.body=h.uploadData(),g.errorHandler=aI(t),g}class fI{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function pI(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(CM){iI(!1)}return iI(!!n&&-1!==(t||["active"]).indexOf(n)),n}const gI=262144;function mI(e,t,n,r,i,o,s,a){const l=new fI(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new hk(dk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},g=r.slice(h,d);if(null===g)throw yk();const m=t.maxUploadRetryTime,v=new rI(n,"POST",(function(e,n){const i=pI(e,["active","final"]),s=l.current+u,a=r.size();let c;return c="final"===i?oI(t,o)(e,n):null,new fI(s,a,"final"===i,c)}),m);return v.headers=p,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=aI(e),v}const vI={STATE_CHANGED:"state_changed"},yI={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wI(e){switch(e){case"running":case"pausing":case"canceling":return yI.RUNNING;case"paused":return yI.PAUSED;case"success":return yI.SUCCESS;case"canceled":return yI.CANCELED;default:return yI.ERROR}}class bI{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function _I(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let xI=null;class EI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fk.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=fk.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=fk.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Ek("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ek("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ek("cannot .getStatus() before sending");try{return this.xhr_.status}catch(CM){return-1}}getResponse(){if(!this.sent_)throw Ek("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ek("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class SI extends EI{initXhr(){this.xhr_.responseType="text"}}function TI(){return xI?xI():new SI}class kI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Jk(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(dk.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Nk(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=mk()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(dk.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=hI(t,r,i),a={name:s.fullPath},l=Rk(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=Zk(s,n),h=e.maxUploadRetryTime,d=new rI(l,"POST",(function(e){let t;pI(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(CM){iI(!1)}return iI(kk(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=aI(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TI,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new rI(n,"POST",(function(e){const t=pI(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(CM){iI(!1)}n||iI(!1);const i=Number(n);return iI(!isNaN(i)),new fI(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=aI(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,TI,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=gI*this._chunkMultiplier,t=new fI(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=mI(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(CM){return this._error=CM,void this._transition("error")}const s=this._ref.storage._makeRequest(o,TI,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(gI*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=cI(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,TI,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=dI(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TI,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=wI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new bI(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(wI(this._state)){case yI.SUCCESS:_I(this._resolve.bind(null,this.snapshot))();break;case yI.CANCELED:case yI.ERROR:_I(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wI(this._state)){case yI.RUNNING:case yI.PAUSED:e.next&&_I(e.next.bind(e,this.snapshot))();break;case yI.SUCCESS:e.complete&&_I(e.complete.bind(e))();break;default:e.error&&_I(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class II{constructor(e,t){this._service=e,this._location=t instanceof Sk?t:Sk.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new II(e,t)}get root(){const e=new Sk(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gk(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Sk(this._location.bucket,e);return new II(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _k(e)}}function CI(e){const t={prefixes:[],items:[]};return AI(e,t).then((()=>t))}async function AI(e,t,n){const r={pageToken:n},i=await RI(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await AI(e,t,i.nextPageToken)}function RI(e,t){null!=t&&"number"===typeof t.maxResults&&Ak("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=uI(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,TI)}function PI(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Rk(t.fullServerUrl(),e.host,e._protocol),o=Zk(n,r),s=e.maxOperationRetryTime,a=new rI(i,"PATCH",oI(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=lI(t),a}(e.storage,e._location,t,Jk());return e.storage.makeRequestWithTokens(n,TI)}function NI(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Rk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new rI(r,"GET",sI(e,n),i);return o.errorHandler=lI(t),o}(e.storage,e._location,Jk());return e.storage.makeRequestWithTokens(t,TI).then((e=>{if(null===e)throw new hk(dk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function DI(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Rk(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new rI(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=lI(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,TI)}function OI(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Sk(e._location.bucket,n);return new II(e.storage,r)}function LI(e,t){if(e instanceof UI){const n=e;if(null==n._bucket)throw new hk(dk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uk+"' property when initializing the app?");const r=new II(n,n._bucket);return null!=t?LI(r,t):r}return void 0!==t?OI(e,t):e}function MI(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof UI)return new II(e,t);throw wk("To use ref(service, url), the first argument must be a Storage instance.")}return LI(e,t)}function FI(e,t){const n=null===t||void 0===t?void 0:t[uk];return null==n?null:Sk.makeFromBucketSpec(n,e)}class UI{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=ck,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Sk.makeFromBucketSpec(r,this._host):FI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Sk.makeFromBucketSpec(this._url,e):this._bucket=FI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ak("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ak("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new II(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Tk(bk());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Pk(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Dk(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const jI="@firebase/storage",zI="0.12.5",BI="storage";function VI(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new kI(e,new Hk(t),n)}(e=ks(e),t,n)}function qI(e){return function(e){e._throwIfRoot("getMetadata");const t=cI(e.storage,e._location,Jk());return e.storage.makeRequestWithTokens(t,TI)}(e=ks(e))}function HI(e,t){return MI(e=ks(e),t)}function KI(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:os(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function GI(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new UI(r,i,o,n,Wa)}Ua(new Is(BI,GI,"PUBLIC").setMultipleInstances(!0)),Za(jI,zI,""),Za(jI,zI,"esm2017");class WI{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class QI{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new WI(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new WI(e,this,this._ref)):{next:t.next?e=>t.next(new WI(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class YI{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new JI(e,this._service)))}get items(){return this._delegate.items.map((e=>new JI(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class JI{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return OI(e,t)}(this._delegate,e);return new JI(t,this.storage)}get root(){return new JI(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new JI(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new QI(VI(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uk.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=zk(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new QI(new kI(this._delegate,new Hk(r.data,!0),i),this)}listAll(){return function(e){return CI(e=ks(e))}(this._delegate).then((e=>new YI(e,this.storage)))}list(e){return function(e,t){return RI(e=ks(e),t)}(this._delegate,e||void 0).then((e=>new YI(e,this.storage)))}getMetadata(){return qI(this._delegate)}updateMetadata(e){return function(e,t){return PI(e=ks(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return NI(e=ks(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return DI(e=ks(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _k(e)}}class XI{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if($I(e))throw wk("ref() expected a child path but got a URL, use refFromURL instead.");return new JI(HI(this._delegate,e),this)}refFromURL(e){if(!$I(e))throw wk("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Sk.makeFromUrl(e,this._delegate.host)}catch(CM){throw wk("refFromUrl() expected a valid full URL but got an invalid one.")}return new JI(HI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};KI(this._delegate,e,t,n)}}function $I(e){return/^[A-Za-z]+:\/\//.test(e)}function ZI(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new XI(r,i)}!function(e){const t={TaskState:yI,TaskEvent:vI,StringFormat:Uk,Storage:XI,Reference:JI};e.INTERNAL.registerComponent(new Is("storage-compat",ZI,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.8")}(yl);const eC={apiKey:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",authDomain:"web-application-ce-team-1.firebaseapp.com",projectId:"web-application-ce-team-1",storageBucket:"web-application-ce-team-1.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/Siheung_TalkTalk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:464497865909:web:5979b3aa25634b08893afc",REACT_APP_FB_API_KEY:"AIzaSyBkLYzguCOt5BWKywXBzyfGhWn-Mf2H4QM",REACT_APP_FB_AUTH_DOMAIN:"web-application-ce-team-1.firebaseapp.com",REACT_APP_FB_MESSAING_SENDER_ID:"464497865909",REACT_APP_FB_PROJECT_ID:"web-application-ce-team-1",REACT_APP_FB_STORAGE_BUCKET:"web-application-ce-team-1.appspot.com"}.REACT_APP_FB_MESSAGING_SENDER_ID,appId:"1:464497865909:web:5979b3aa25634b08893afc"},tC=yl.initializeApp(eC).firestore();yl.storage(),yl.auth();var nC,rC,iC,oC,sC,aC,lC,cC,uC,hC,dC,fC,pC;const gC=Si.div(nC||(nC=o(["\n  width: 162px;\n  height: 241px;\n  padding-bottom: 10px;\n  margin-bottom: 16px;\n\n  border-radius: 16px;\n  background-color: #fff;\n  border: 0.5px solid rgba(204, 204, 204, 0.16);\n  box-shadow: 0px 0px 12px 0px rgba(92, 103, 220, 0.06);\n  overflow: hidden;\n  position: relative;\n  cursor: pointer;\n"]))),mC=Si.div(rC||(rC=o(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 120px;\n  background: url(",");\n  background-size: cover;\n  background-repeat: no-repeat;\n  overflow: hidden;\n\n  /* position: absolute; */\n  z-index: 1;\n"])),(e=>e.src)),vC=Si.div(iC||(iC=o(['\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  background: #5c67dc;\n\n  color: #fff;\n  font-size: 20px;\n  line-height: 44px;\n  text-align: center;\n  font-family: "Jalnan Gothic";\n']))),yC=Si.div(oC||(oC=o(["\n  width: 100%;\n  box-sizing: border-box;\n  height: 12px;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 12px;\n  margin-left: 10px;\n\n  color: #cccccc;\n  font-size: 8px;\n"]))),wC=Si.div(sC||(sC=o(['\n  width: 100%;\n  color: #cccccc;\n  font-size: 8px;\n  margin: 0px;\n  width: 24px;\n  line-height: 12px;\n\n  display: flex;\n  justify-content: space-between;\n  font-family: "Pretendard";\n']))),bC=Si.div(aC||(aC=o(['\n  box-sizing: border-box;\n  width: 12px;\n  height: 12px;\n  line-height: 12px;\n  background: url("https://i.postimg.cc/tJsWzqJk/star.png");\n  background-size: contain;\n  background-repeat: no-repeat;\n']))),_C=Si.div(lC||(lC=o(['\n  width: 100%;\n  font-size: 8px;\n  color: #ccc;\n  line-height: 12px;\n  font-family: "Pretendard";\n']))),xC=Si.h2(cC||(cC=o(['\n  font-size: 14px;\n  color: #222;\n  margin-left: 10px;\n  margin-top: 8px;\n  margin-bottom: 0px;\n  font-family: "Pretendard";\n  font-weight: 600;\n']))),EC=Si.div(uC||(uC=o(['\n  font-size: 10px;\n  color: #444;\n  margin-top: 4px;\n  margin-left: 10px;\n  margin-right: 10px;\n  line-height: 160%;\n  font-family: "Pretendard";\n']))),SC=Si.div(hC||(hC=o(["\n  background: #f5f6f8;\n  border-radius: 4px;\n  margin-left: 4px;\n  padding: 4px 8px;\n  display: flex;\n  justify-content: left;\n  /* align-items: center; */\n"]))),TC=Si.div(dC||(dC=o(['\n  width: 12px;\n  height: 12px;\n  margin-right: 4px;\n  background: url("https://i.postimg.cc/HxTkHdy2/image-88.png");\n  background-size: contain;\n  background-repeat: no-repeat;\n']))),kC=Si.div(fC||(fC=o(['\n  font-size: 8px;\n  color: #444;\n  line-height: 12px;\n  font-family: "Pretendard";\n']))),IC=Si.div(pC||(pC=o(["\n  display: flex;\n  justify-content: left;\n  /* align-items: center; */\n  margin-left: 6px;\n  margin-top: 12px;\n"])));const CC=function(e){let{num:t,title:n,festival:r,review:i,rating:o,id:s,img:a}=e;const l=et();return(0,Ii.jsxs)(gC,{onClick:()=>l("/ReviewDetail/".concat(s)),children:[(0,Ii.jsx)(mC,{src:a||"/Siheung_TalkTalk/FestivalImg.png",children:(0,Ii.jsx)(vC,{children:t})}),(0,Ii.jsxs)(yC,{children:[(0,Ii.jsxs)(wC,{children:[(0,Ii.jsx)(bC,{}),o]}),"\xb7",(0,Ii.jsx)(_C,{children:r})]}),(0,Ii.jsx)(xC,{children:n}),(0,Ii.jsx)(EC,{children:(null===i||void 0===i?void 0:i.length)>10?(null===i||void 0===i?void 0:i.slice(0,10))+"...":i}),(0,Ii.jsxs)(IC,{children:[(0,Ii.jsxs)(SC,{children:[(0,Ii.jsx)(TC,{}),(0,Ii.jsx)(kC,{children:"\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694"})]}),(0,Ii.jsx)(SC,{children:(0,Ii.jsx)(kC,{children:"+5"})})]})]})};var AC;const RC=Si.div(AC||(AC=o(["\n  display: flex;\n  margin-left: auto;\n  margin-right: auto;\n  width: 336px;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-content: space-around;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  margin-bottom: 100px;\n"])));const PC=function(e){let{ReviewList:n}=e;return et(),(0,t.useEffect)((()=>{console.log(n)})),(0,Ii.jsx)(RC,{children:n.map(((e,t)=>(0,Ii.jsx)(CC,{title:e.title,review:e.review,festival:e.festival,rating:e.rating,num:t+1,id:e.id,img:e.image},e.id)))})};var NC,DC,OC,LC,MC,FC;const UC=Si.div(NC||(NC=o(["\n  width: 390px;\n  background: #fcfcfc;\n  margin-left: auto;\n  margin-right: auto;\n"]))),jC=Si.h1(DC||(DC=o(['\n  font-size: 24px;\n  color: #222222;\n  font-family: "Jalnan Gothic";\n  font-weight: 500;\n  margin: 24px 0 16px 28px;\n']))),zC=Si.div(OC||(OC=o(["\n  width: 390px;\n  height: 60px;\n  box-sizing: border-box;\n  background: #fcfcfc;\n  margin-bottom: 10px;\n  text-align: center;\n  padding-top: 10px;\n"]))),BC=Si.div(LC||(LC=o(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),VC=Si.div(MC||(MC=o(["\n  padding: 36px 0 0 0;\n"]))),qC=Si(Qo)(FC||(FC=o([""])));const HC=function(e){const n=et(),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([{}]),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)("\uac00\uc871\uacfc \ud568\uaed8"),[h,d]=(0,t.useState)([]),[f,p]=(0,t.useState)("");return(0,t.useEffect)((()=>{const e=(new Date).getMonth()+1,t=(n=e)>=3&&n<=5?"spring":n>=6&&n<=8?"summer":n>=9&&n<=11?"fall":"winter";var n;p(t);(async()=>{const e=(await kT(oS(tC,"post"))).docs.map((e=>({id:e.id,...e.data()})));i(e),l(e.slice(0,3));const t=rT(oS(tC,"post"),aT("likeNumber","desc")),n=(await kT(t)).docs.map((e=>({id:e.id,...e.data()})));s(n.slice(0,6))})(),(async()=>{try{const e=(await tC.collection("festivals").where("season","==",t).get()).docs.map((e=>({id:e.id,...e.data()})));d(e),console.log(e)}catch(e){console.error("Error fetching festivals: ",e)}})()}),[]),(0,t.useEffect)((()=>{l(""===c?r.slice(0,3):r.filter((e=>e.hashTag===c)).slice(0,3))}),[c,r]),(0,Ii.jsxs)(UC,{children:[(0,Ii.jsx)(zC,{children:(0,Ii.jsx)("img",{src:"https://i.postimg.cc/wByq0xR4/talktalk-logo.png",alt:"logo",width:"90px",height:"40px"})}),(0,Ii.jsx)(ro,{list:h}),(0,Ii.jsx)(jC,{children:"\ud0a4\uc6cc\ub4dc\ub85c \ubcf4\ub294 Review"}),(0,Ii.jsx)(co,{filter:c,setFilter:u}),(0,Ii.jsx)(qo,{ReviewList:a}),(0,Ii.jsx)(BC,{children:(0,Ii.jsx)(qC,{color:"#5C67DC",backgroundcolor:"transparent",title:"\ub354 \ub9ce\uc740 Review \ubcf4\uae30  \u2192",onClick:()=>n("/ReviewList")})}),(0,Ii.jsxs)(VC,{children:[(0,Ii.jsx)(jC,{children:"Best Review"}),(0,Ii.jsx)(PC,{ReviewList:o})]}),(0,Ii.jsx)(Bi,{})]})};var KC;const GC=Si.ul(KC||(KC=o(['\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  margin: 0;\n  margin-left: 28px;\n  padding: 0;\n  gap: 8px;\n\n  overflow-x: auto;\n  font-family: "Pretendard";\n  list-style: none;\n  white-space: nowrap;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n'])));const WC=function(e){let{filter:n,setFilter:r}=e;return(0,t.useEffect)((()=>{console.log(n)}),[n]),(0,Ii.jsx)(GC,{children:[{title:"\uc804\uccb4",value:"all"},{title:"\ubd04(3~5\uc6d4)",value:"spring"},{title:"\uc5ec\ub984(6~8\uc6d4)",value:"summer"},{title:"\uac00\uc744(9~10\uc6d4)",value:"fall"},{title:"\uaca8\uc6b8(11~2\uc6d4)",value:"winter"}].map(((e,t)=>(0,Ii.jsx)(so,{id:t,title:e.title,isClicked:n===e.value,onClick:()=>r(e.value)})))})};var QC,YC,JC,XC,$C,ZC,eA,tA;const nA=Si.div(QC||(QC=o(["\n  width: 162px;\n  height: 231px;\n  margin-bottom: 16px;\n\n  border-radius: 16px;\n  background-color: #fff;\n  border: 0.5px solid rgba(204, 204, 204, 0.16);\n  box-shadow: 0px 0px 12px 0px rgba(92, 103, 220, 0.06);\n  overflow: hidden;\n\n  position: relative;\n"]))),rA=Si.div(YC||(YC=o(["\n  background: url(",");\n  box-sizing: border-box;\n  width: 100%;\n  height: 140px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  overflow: hidden;\n  z-index: 1;\n"])),(e=>e.src)),iA=Si.div(JC||(JC=o(['\n  font-family: "Pretendard";\n  margin-left: 10px;\n  margin-top: 12px;\n  margin-bottom: 2px;\n  font-size: 8px;\n  color: #444;\n']))),oA=Si.div(XC||(XC=o(['\n  font-family: "Pretendard";\n  margin-left: 10px;\n  font-size: 14px;\n  color: #222;\n  font-weight: 600;\n']))),sA=Si.div($C||($C=o(["\n  background: #f5f6f8;\n  border-radius: 4px;\n  margin-left: 4px;\n  padding: 4px 8px;\n\n  display: flex;\n  justify-content: left;\n  /* align-items: center; */\n"]))),aA=Si.div(ZC||(ZC=o(['\n  width: 12px;\n  height: 12px;\n  margin-right: 4px;\n  background: url("https://i.postimg.cc/rw8Q5qFB/image-92.png");\n  background-size: contain;\n  background-repeat: no-repeat;\n']))),lA=Si.div(eA||(eA=o(['\n  font-size: 8px;\n  color: #444;\n  line-height: 12px;\n\n  font-family: "Pretendard";\n']))),cA=Si.div(tA||(tA=o(["\n  display: flex;\n  justify-content: left;\n  /* align-items: center; */\n  margin-left: 6px;\n  margin-top: 12px;\n"])));const uA=function(e){let{id:t,title:n,review:r,festival:i,rating:o,num:s,img:a,keywords:l}=e;const c=et();return console.log(a),(0,Ii.jsxs)(nA,{onClick:()=>c("/FestivalDetail/".concat(t)),children:[(0,Ii.jsx)(rA,{src:a}),(0,Ii.jsx)(iA,{children:"2024.09.27~2024.09.29"}),(0,Ii.jsx)(oA,{children:i}),(0,Ii.jsxs)(cA,{children:[(0,Ii.jsxs)(sA,{children:[(0,Ii.jsx)(aA,{}),(0,Ii.jsx)(lA,{children:l.sort(((e,t)=>t.count-e.count))[0].keyword})]}),(0,Ii.jsx)(sA,{children:(0,Ii.jsxs)(lA,{children:["+",l.length]})})]})]})};var hA;const dA=Si.div(hA||(hA=o(["\n  display: flex;\n  justify-content: start;\n  flex-wrap: wrap;\n  align-content: space-around;\n  gap: 10px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 20px;\n  width: 336px;\n  margin-bottom: 100px;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n"])));const fA=function(e){let{list:t}=e;return console.log(t),(0,Ii.jsx)(dA,{children:t.map(((e,t)=>(0,Ii.jsx)(uA,{id:e.id,title:e.title,reivew:e.reivew,festival:e.festivalName,rating:e.rating,num:t+1,img:e.backgroundUrl,keywords:e.keywords},e.id)))})};var pA,gA,mA,vA;const yA=Si.div(pA||(pA=o(["\n  width: 334px; //width \ubcf4\uae30 \uc88b\uac8c \uc218\uc815\n  padding: 18px 28px;\n  /* position: fixed;\n  top: 0; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 999;\n  background-color: ",";\n  color: ",";\n  box-shadow: ",";\n"])),(e=>e.backgroundcolor||"#FCFCFC"),(e=>e.color||"#444"),(e=>e.boxshadow||"none")),wA=Si.div(gA||(gA=o(["\n  background-image: url(","/arrow_back_ios.png);\n  background-size: cover;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n"])),"/Siheung_TalkTalk"),bA=Si.h1(mA||(mA=o(["\n  font-size: 20px;\n  font-weight: 600;\n  line-height: 120%;\n  margin: 0;\n"]))),_A=Si.div(vA||(vA=o(["\n  width: 24px;\n  height: 24px;\n  background-image: ",";\n  background-size: cover;\n  opacity: ",";\n"])),(e=>e.selected?"url(".concat("/Siheung_TalkTalk","/bookmark_fill.png)"):"url(".concat("/Siheung_TalkTalk","/bookmark.png)")),(e=>e.righticonopacity||1));const xA=function(e){const t=et();return(0,Ii.jsxs)(yA,{color:e.color,backgroundcolor:e.backgroundcolor,boxshadow:e.boxshadow,children:[(0,Ii.jsx)(wA,{onClick:()=>{t(-1)}}),(0,Ii.jsx)(bA,{children:e.title}),(0,Ii.jsx)(_A,{onClick:e.onLikeClick,selected:e.selected,righticonopacity:e.righticonopacity})]})};var EA,SA;const TA=Si.div(EA||(EA=o(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),kA=Si.div(SA||(SA=o(["\n  margin: 20px 0 0 0;\n  width: 390px;\n  background-color: #fff;\n  border-radius: 16px 16px 0 0;\n"])));const IA=function(e){const[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)("all"),[s,a]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{const e=(await kT(oS(tC,"festivals"))).docs.map((e=>({id:e.id,...e.data()})));console.log(e),r(e),a(e)})()}),[]),(0,t.useEffect)((()=>{console.log(i)}),[i]),(0,t.useEffect)((()=>{if("all"!==i){const e=n.filter((e=>e.season===i));a(e)}else a(n)}),[i]),(0,Ii.jsxs)(TA,{children:[(0,Ii.jsx)(xA,{color:"#222",boxshadow:"0px 0px 12px 0px rgba(0, 0, 0, 0.10)",righticonopacity:"0",title:"\ucd95\uc81c"}),(0,Ii.jsxs)(kA,{children:[(0,Ii.jsx)(WC,{filter:i,setFilter:o}),(0,Ii.jsx)(fA,{list:s}),(0,Ii.jsx)(Bi,{})]})]})};var CA,AA,RA,PA,NA,DA,OA,LA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},MA=t.createContext&&t.createContext(LA),FA=["attr","size","title"];function UA(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jA(){return jA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jA.apply(this,arguments)}function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zA(Object(n),!0).forEach((function(t){VA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qA(e){return e&&e.map(((e,n)=>t.createElement(e.tag,BA({key:n},e.attr),qA(e.child))))}function HA(e){return n=>t.createElement(KA,jA({attr:BA({},e.attr)},n),qA(e.child))}function KA(e){var n=n=>{var r,{attr:i,size:o,title:s}=e,a=UA(e,FA),l=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",jA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:BA(BA({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==MA?t.createElement(MA.Consumer,null,(e=>n(e))):n(LA)}const GA=Si.div(CA||(CA=o(["\n  width: 334px;\n  padding: 0 28px;\n  color: white;\n  position: absolute;\n  top: 200px;\n  z-index: 999;\n"]))),WA=Si.div(AA||(AA=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),QA=Si.p(RA||(RA=o(["\n  margin: 0;\n  font-size: 12px;\n  line-height: 140%;\n"]))),YA=Si.div(PA||(PA=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),JA=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"256",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]}]})(e)}))(NA||(NA=o(["\n  width: 16px;\n  height: 16px;\n"]))),XA=Si.p(DA||(DA=o(["\n  margin: 0 0 0 4px;\n  font-size: 12px;\n"]))),$A=Si.p(OA||(OA=o(['\n  margin: 8px 0 0 0;\n  font-family: "Jalnan Gothic";\n  font-size: 24px;\n'])));const ZA=function(e){let{title:t,date:n}=e;return(0,Ii.jsxs)(GA,{children:[(0,Ii.jsxs)(WA,{children:[(0,Ii.jsx)(QA,{children:n}),(0,Ii.jsxs)(YA,{children:[(0,Ii.jsx)(JA,{}),(0,Ii.jsx)(XA,{children:"24"})]})]}),(0,Ii.jsx)($A,{children:t})]})};var eR,tR,nR,rR,iR,oR;const sR=Si.div(eR||(eR=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),aR=Si.div(tR||(tR=o(["\n  height: 100%;\n  padding: 6px 15px;\n  color: #fff;\n  background-color: #5c67dc;\n  border: none;\n  border-radius: 100px;\n"]))),lR=Si.p(nR||(nR=o(["\n  margin: 0;\n  font-size: 12px;\n  font-weight: 700;\n"]))),cR=Si.a(rR||(rR=o(["\n  height: 100%;\n  padding: 4px 16px;\n  background-color: #f5f6f8;\n  border: none;\n  border-radius: 100px;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  color: #444;\n"]))),uR=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"36",d:"M208 352h-64a96 96 0 0 1 0-192h64m96 0h64a96 96 0 0 1 0 192h-64m-140.71-96h187.42"},child:[]}]})(e)}))(iR||(iR=o(["\n  width: 18px;\n  height: 18px;\n"]))),hR=Si.p(oR||(oR=o(['\n  margin: 0 0 0 4px;\n  font-size: 10px;\n  font-weight: 700;\n  line-height: 160%;\n  font-family: "pretendard";\n'])));const dR=function(e){let{link:t}=e;return(0,Ii.jsxs)(sR,{children:[(0,Ii.jsx)(aR,{children:(0,Ii.jsx)(lR,{children:"\ubd04(3~5\uc6d4)"})}),(0,Ii.jsxs)(cR,{href:t,children:[(0,Ii.jsx)(uR,{}),(0,Ii.jsx)(hR,{children:"\uc624\ub298\ub3c4 \uc2dc\ud765\ud589"})]})]})};var fR,pR;const gR=Si.div(fR||(fR=o(["\n  position: relative;\n  margin-top: 24px;\n  width: 334px;\n"]))),mR=Si.img(pR||(pR=o(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 16px;\n"])));const vR=function(e){let{src:t}=e;return console.log(t),(0,Ii.jsx)(gR,{children:(0,Ii.jsx)(mR,{src:t,alt:"\ucd95\uc81c \uc774\ubbf8\uc9c0"})})};var yR,wR,bR,_R,xR,ER,SR,TR;const kR=Si.div(yR||(yR=o(["\n  /* margin-top: 20px; */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 100%;\n  max-width: 334px;\n  height: 92px;\n  background-color: #f5f6f8;\n  border-radius: 16px;\n"]))),IR=Si.div(wR||(wR=o(["\n  margin: 0 0 0 16px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n"]))),CR=Si.div(bR||(bR=o(["\n  border-radius: 50px;\n  background-color: #eee;\n  font-weight: 500;\n  padding: 6px 15px;\n\n  & > * {\n    margin: 0;\n  }\n"]))),AR=Si.p(_R||(_R=o(["\n  margin: 0 0 0 16px;\n  font-weight: 300;\n"]))),RR=Si.div(xR||(xR=o(["\n  margin: 8px 0 0 16px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n"]))),PR=Si.div(ER||(ER=o(["\n  border-radius: 50px;\n  background-color: #eee;\n  font-weight: 500;\n  padding: 6px 15px;\n\n  & > * {\n    margin: 0;\n  }\n"]))),NR=Si.p(SR||(SR=o(["\n  margin: 0 0 0 16px;\n  font-weight: 300;\n"]))),DR=Si.button(TR||(TR=o(["\n  padding: 2px 10px;\n  font-size: 12px;\n  color: #999999;\n  background-color: #eee;\n  border-radius: 30px;\n  border: none;\n  margin-left: 12px;\n  font-weight: 700;\n  opacity: ",";\n"])),(e=>e.changebuttonOpacity));const OR=function(e){const{changebuttonOpacity:n,onClick:r,name:i}=e,[o,s]=(0,t.useState)(window.location.pathname);return(0,Ii.jsxs)(kR,{children:[(0,Ii.jsxs)(IR,{children:[(0,Ii.jsx)(CR,{children:(0,Ii.jsx)("p",{children:"\ucd95\uc81c"})}),(0,Ii.jsx)(AR,{children:e.name})]}),(0,Ii.jsxs)(RR,{children:[(0,Ii.jsx)(PR,{children:(0,Ii.jsx)("p",{children:"\ubc29\ubb38 \uc77c\uc790"})}),(0,Ii.jsx)(NR,{children:"2024.05.26"}),(0,Ii.jsx)(DR,{onClick:()=>{s(window.location.pathname),"/CreateReview"==o&&navigate("")},changebuttonOpacity:"/CreateReview"==o?"1":"0",children:"\ubcc0\uacbd"})]})]})};var LR,MR,FR;const UR=Si.div(LR||(LR=o(["\n  > * {\n    margin-bottom: 8px;\n  }\n  flex-direction: column;\n  align-items: flex-start;\n"]))),jR=Si.img(MR||(MR=o(["\n  width: 18px;\n  height: 18px;\n"]))),zR=Si.div(FR||(FR=o(["\n  background-color: ",";\n  font-size: ",";\n  padding: 4px 8px;\n  font-weight: 400;\n  line-height: 18px;\n  cursor: pointer;\n  border-radius: 4px;\n  width: auto;\n  color: #444444;\n  display: flex;\n  align-items: center;\n"])),(e=>e.selected?"#d1eaff":"#f5f6f8"),(e=>e.fontsize||"12px"));const BR=function(e){const{title:n,icon:r,fontsize:i}=e;return(0,t.useEffect)((()=>{console.log(i)}),[i]),(0,Ii.jsx)(UR,{children:(0,Ii.jsxs)(zR,{fontsize:e.fontsize,children:[(0,Ii.jsx)(jR,{src:"/Siheung_TalkTalk/feedback/"+r}),n||null]})})};var VR;Si.div(VR||(VR=o(["\n  margin: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n"])));const qR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASISURBVHgB7ZzBctNIEIa7RyJL9rLaJ1i7CnJd5wnWPMFublssqdUelgQuJE9A8gQkFyrAxRSBa3gD8gbkDKQsngBzoaCQpukZQYoEC9tYmhlBf5fIsmzJrVb3P90zARAEQRAEQRAEQRAEQRAEQRAE4cdidf1FemX9eR9aRAwtggD+BUKzeQgtAaElpOvDTk7F0L5AurS/d/EQWoCCllBQcfPkBeFf0BJa4cGnvLdkFC9G3cFOdwSB0woPLqDon9mV5G/yDWgB7QgRhDe/2Id4A1pA8AY20oyAOmPeStog2YI3sJVmlW+O8ezACDrJjUluX6Ajvfzo9tIRBErQHnxKmlWgCpVCwATrwdZ7tX7Kg4pkwqFBS7ZgPdhKs8nGNQQt2cINETMlMPUnBEqQBjbyq0KajQepF6pkC9LASN8wiAhUsgWX5KaRZlXEyMlur5tBQATnwdNIsypynacQGM48ON0YJm/fQhJD3kETX3WUkNIJgfoNyaqFhC+mw496QtOph7Hwd2Q8+st4c0SIIwT9ErUaUUQZEI20otHCwrnMlayb28D2kcaih2SMhR0k9YtGNhZRxxoM7HC3AwFS3gxkQ5O5GZkic1P0a3YAsz8zN2PeUWItLSPUeIs9sWO2Oftzkir3E4RNeePLq2SHKLe4JUXW7/BoQasVmJO5Y7BJKtE7tcybj+E7gc37OF5Ul+pImLXGYNaiW22ocE1gd//OhdpGhrWqCG5EbvGztg1thWi7TuMaGlERtkjOcRnmUAMu4YHNqFC0+WjvwgBqpjGZdvn/YS9S+mCmIa8HkNVCxMlscK/bSE25UR1sJFxB+kmoRrbGxXqSWRWNjuSswuAfYCQPBAceRYtquemhtbOR3JW1Fzv8J4xOMOn7+3eXUnCAs1qEzc4hKAyjFBwZ1+C8mrZ67XiDNN0CDxDR5sO7F3fAIV7KlbY4rtWBKxlnZBgXllZ8TBj0Vg92pTBcKIWv4a0ebH4wlyUzaBi+gZnPIrzfgrvGHjSPi3NU4s3A6fVhz1EMTi5ff+bNyN4M/D7XfXAE5tgHT3gzsEL6A1yh1O/gCY8xGJ09ttyt8LbkwIuBjURzXABK/uZzgge8GHjMkoDGOefhnAY/IYLAXfz9dEryI9e8GJi+If6aERlf7Qoi/Ge3Z/48eJkg6HyonKbDJP+peDXTh7gKF5+Pdz5NFrHfcT7fmLXBGi9Gv7qeR+x8KW2+MEMsRDiMi2jzbDtnMLBG2uJkOchJH/AzMdUTkb+x53Y6vcD9WmWE/sRDuPoF3IR8MKEJ+bHGsGyarMabJyqT8txODew+BiNMEv270c+q+2CGDq85tmxNwe6EQ50POJzHYG4dUcWVjA0Hs1JOf60MG87Xczg1sC20Ez75fJ8JBxr0dt2dhsqw4XilvtMQQVqd9SobDppo45yEDdT3T1+DWz3s1MAnBR4OB9aTuBHa5ONqkuD+3lJqZr6faOcpkmxrWV07Hv5z9bm3JVf2X9KsHT+F7xEzODCz3MEzJgmGcB2CIAiCIAiCIAiCIAiCIAiCIAjh8AGN39nXGv0niwAAAABJRU5ErkJggg==",HR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbGSURBVHgB7ZvdThtXEMdnjk1KUpJunyBGDal6VXiCwBMU30XBVYzUAmkvQp4A8wQhN1VCK8WRSNo78gY4TxB6VSkQ2b3pbV3hoAh7z3RmjeHs2gYHr/cjOT8pYfewuzZzZuf8Z2YXwGKxWCwWi8VisVgsFovFYrFYLBbLp8WdH98UCz/szUKKyEKKUErdPd6sQEpASAm3V/7KZWms6u24NLf121QFUoCClJChsbXTHZyHlJAKD/Z5b5t69vLBZHljpg4JJxUerNzMbGDIaR1OrEIKSIWBMyqz1jWIeB9SQOINLNKMgHI9fuWkQbIl3sCGNOsmg2uQcBK9yAUXNwKoISAvbDTdGdNaz7z49eYuJJREe7BPmjGEep0Inplj7OFFSDCJNbB4L9Kp3hXvffH4ZnnsSJXZ0qY8u1tcfe1AQkmsgT1phmQariL/lcuTdVD6kTHuNA8nipBQEmvgoDRzsbne2W5Bq2z+DuGMhTBmEmngwsrerCnNODyU/3j8Ta2zf7xdOTkBaTqpki2ZHkz+JAJdetZ1DNK6bz+hki1xMq2XNHv+5MZkr2MXlver/AfkOvtcn/gyafWJxHlwL2nW71hEv2cnsT4RmQffXqnm5Ge21cqxYXKa0EEFDqG6jiBqgXKcRDhsUR5rq4ezvFcoFqtO65KummqD/6CanMebdeKkBEn/TRrqqHQNtKprpPrh5+9qLyPy9KEN7N3SWk2jZxjMscG+4GEHPYO1b18ybuMPQRY3NvDiWccUlvc3+MeFCj/tySA2NMpk1HhIJuQ/JKoRYU0mY9gsMZSWEWHmIX/bHHhfmk7HYThMadYPndFl5aoLGbg98W0fO/neyFvyD2hXo5uHIQklRLRvVfcpX+1inQZiz8H2LQ3iPcgehe4rydwGOb2wtFdiw9ySbblrLnrHGN/nZePKwWIYYSTUGMz6tcTT30suVeQWlHjo3X6oOBujeguytffj9foo4uE8p8/j7x0nC60caI73pL0QphEdRXCdJyRnFo0MHm09uRHaYhn6ItfHyHVuVOaT0qjkGvM0Z4rbXXVmovWtzakShEjoMm3r8VRJo14MFGQcTgR2Fpb2YpdRC/eqdzOY2fEZl0OURlgM27jCyGSaeAkqtY3BeEhY2tr86tzFaxQUVt6usZeWzDGRdKR1flQ15ZHqYJFwnDjsBI1MRBvPN6ceQIR8v/z2IXut7w4S47JSmTPrHGEz8kSjnfpe2u5eUGg3e7kxN+rUVha7icOrXQpHZNg7/vxRJxyRZXK9EgLO3GpNPBqZB/WdXNLPtjZvFiECIqtFeNInUAGThWaMLu2IISBk5Jpy7W7jilKIxrhC5NW0hXt7q6jxYWCYEwyXV/GvX0IISG1YFljyd0Qk9j/g2L8BERJLuVIK6lx42Q60hNgCbn5YI3uFd5aE/uuCJDZ5lpAViJhYypXyh7bU0cxx1esUrnbBsASqK/IZLdWcicO4Qmz1YFnYMGDg7ERjaC2afZ/1XUM+Y5Qy7DziLbgTni5ARLthSDav6wxoGnkaYiQ2A3tx2IzBiK8gNMi8liNZJcREbAYmLtKb+y65FQgJ1NofJhBnISZiMzC3jW6Z+6T0ufFXsrJBNHMzE5gsVN9CTMRnYDiNvzTAQiSPsV49vFaV5EG2zzo2uIByf+JijYAQiMXAd356M+2vxdKffY/l+Mlp9o5S6qkkDnKebPPY9lnerEn74/DP/1yHGIjHg5uBlZ26X8uScCAVMDbma96d7XGVeXl+orD0ts8DJxl/yDlqzEEMxGJgTmP98ZeoYu53wkGwvNj7YlTiiagGwwZl/XGYJyoWJRGPgY34y5y0xoPhwDzHq90qNy/dkmAG2AkbC8v7Tzth48UvfE2jq8Kf+R3EQOS1CK8D/Zn7rzFUaVw+yE8cXrsv3tjzJK7CNcYbG53arXeN8dZqnwYrF45wQ7omMllghJc4Hq2K3MCFpf15/tRtY6jC3pXr86JLpYXNxX4Ko38xv11r5tCzaxbaWWvnfw+pYjco0b+rjF0Lljyq6h+RJqTSD857LuLY8DN3Vt4UkdSa2ZryJgz9rSpuds7yj0gNHEcMPk/0P2pcOZgc9KETQY6V3pqcC8N9duhEHyKW9/s9UVXRmr12yO7uWWEDYngFN1IDewUe6i6GDxIOPpReYcMj4jf1Iw0RwQIPXCAcDEonbBA3OH3fQUVbvozUwFzg6WjRCkuvOWmEjrJtLovgc25wshKZPNHO2DMr/DiQR/7jfHxKwsbC8t5r+BiR5GA+AS8MyiKY5BcXLRaLxWKxWCwWi8VisVgsFovFYrFYoud/R8sZ+pHMMCUAAAAASUVORK5CYII=";var KR,GR,WR,QR;const YR=Si.div(KR||(KR=o(["\n  margin: 10px 0 0 0;\n  width: 100%;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),JR=Si(YR)(GR||(GR=o(["\n  /* height: 112px; */\n"]))),XR=Si.div(WR||(WR=o(["\n  width: 104px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n"]))),$R=Si.img(QR||(QR=o(["\n  margin: -4px;\n  width: 24px;\n"])));function ZR(e){let{handleRating:n,rating:r}=e;const[i,o]=(0,t.useState)(r),[s,a]=(0,t.useState)(0),[l,c]=(0,t.useState)(!1);(0,t.useEffect)((()=>{o(r)}),[r]);const u=e=>l?e>=s?HR:qR:e>=i?HR:qR;return(0,Ii.jsx)(JR,{children:(0,Ii.jsx)(XR,{children:[...Array(5)].map(((e,t)=>(0,Ii.jsx)($R,{src:u(t)},t)))})})}var eP,tP,nP,rP,iP,oP,sP,aP,lP,cP,uP,hP,dP,fP,pP;const gP=Si.div(eP||(eP=o(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),mP=Si.div(tP||(tP=o(["\n  width: 390px;\n  background-color: #fff;\n  border-radius: 16px 16px 0 0;\n  position: absolute;\n  top: 317px;\n"]))),vP=Si.hr(nP||(nP=o(["\n  width: 100%;\n  height: 12px;\n  border: 0;\n  background-color: #f2f4f6;\n"]))),yP=Si.img(rP||(rP=o(["\n  width: 390px;\n  height: 360px;\n  position: fixed;\n  top: 0;\n  text-align: center;\n  object-fit: cover;\n  filter: brightness(60%);\n  z-index: 0;\n  background-color: #222;\n"]))),wP=Si.div(iP||(iP=o(["\n  padding: 28px;\n"]))),bP=Si.p(oP||(oP=o(["\n  margin-top: 28px;\n  width: 334px;\n  font-size: 16px;\n  font-weight: 300;\n  line-height: 160%;\n  text-align: justify;\n"]))),_P=Si.div(sP||(sP=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 20px 0 0 0;\n"]))),xP=Si.div(aP||(aP=o(["\n  max-width: 34px;\n  height: 100%;\n  border-radius: 50px;\n  background-color: #f5f6f8;\n  padding: 6px 15px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #444;\n"]))),EP=Si.p(lP||(lP=o(["\n  margin: 0;\n  font-size: 12px;\n  font-weight: 600;\n"]))),SP=Si.div(cP||(cP=o(["\n  margin: 12px 0 0 0;\n"]))),TP=Si.p(uP||(uP=o(["\n  margin: 0;\n  font-size: 24px;\n  font-weight: 600;\n  text-align: center;\n  color: #222;\n"]))),kP=Si.div(hP||(hP=o(["\n  margin: 16px 0 0 0;\n  display: flex;\n  gap: 4px;\n"]))),IP=Si.div(dP||(dP=o(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n  margin: 24px 0 100px 0;\n"]))),CP=Si(Qo)(fP||(fP=o([""]))),AP=Si(Qo)(pP||(pP=o([""]))),RP=["\uc2e0\ub098\ub294 \ubd84\uc704\uae30\uc5d0\uc694","\uc794\uc794\ud55c \ubd84\uc704\uae30\uc5d0\uc694","\uc0ac\uc9c4\uc774 \uc798\ub098\uc640\uc694","\uc9c8\uc11c\uc815\uc5f0\ud574\uc694","\uc9c8\uc11c\uac00 \uc548\uc9c0\ucf1c\uc838\uc694","\uc5ec\uc720\ub85c\uc6cc\uc694","\uccb4\ud5d8\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc694","\ub2e4\uc591\ud55c \uccb4\ud5d8\uc774 \uc788\uc5b4\uc694","\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694","\ud654\uc7a5\uc2e4\uc774 \uae68\ub057\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \uae54\ub054\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \ubd88\ud3b8\ud574\uc694"];const PP=function(e){const n=nt().id,[r,i]=(0,t.useState)(),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),h=et();(0,t.useEffect)((()=>{tC.collection("festivals").doc(n).get().then((e=>{console.log(e.data()),i(e.data())}))}),[n]),(0,t.useEffect)((()=>{(async()=>{try{const e=(await tC.collection("post").where("festivalId","==",n).get()).docs.map((e=>({id:e.id,...e.data()})));l(e)}catch(e){console.error("Error fetching posts: ",e)}})()}),[n]),(0,t.useEffect)((()=>{""===o?u(a.slice(0,3)):(u(a.filter((e=>e.hashTag===o)).slice(0,3)),console.log(c))}),[o,a]);const d=e=>{const t=RP.indexOf(e);if(-1===t)return"\ud0a4\uc6cc\ub4dc\uac00 \ubaa9\ub85d\uc5d0 \uc5c6\uc2b5\ub2c8\ub2e4.";const n=t,r=Math.floor(n/3)+1,i=n%3+1;return console.log(r,i),{firstIndex:r,secondIndex:i}};return(0,Ii.jsxs)(gP,{children:[(0,Ii.jsx)(xA,{color:"#fff",backgroundcolor:"transparent",boxshadow:"0px 0px 12px 0px rgba(0, 0, 0, 0.10)",righticonopacity:"1",title:""}),(0,Ii.jsx)(ZA,{title:null===r||void 0===r?void 0:r.title,date:null===r||void 0===r?void 0:r.date}),(0,Ii.jsx)(yP,{src:null===r||void 0===r?void 0:r.backgroundUrl}),(0,Ii.jsxs)(mP,{children:[(0,Ii.jsxs)(wP,{children:[(0,Ii.jsx)(dR,{season:null===r||void 0===r?void 0:r.season,link:null===r||void 0===r?void 0:r.link}),(0,Ii.jsx)(vR,{src:null===r||void 0===r?void 0:r.imgUrl}),(0,Ii.jsx)(OR,{name:null===r||void 0===r?void 0:r.festivalName}),(0,Ii.jsx)(bP,{children:null===r||void 0===r?void 0:r.content})]}),(0,Ii.jsx)(vP,{}),(0,Ii.jsxs)(_P,{children:[(0,Ii.jsx)(xP,{children:(0,Ii.jsx)(EP,{children:"\ucd1d \ud3c9\uc810"})}),(0,Ii.jsxs)(SP,{children:[(0,Ii.jsx)(TP,{children:(f=null===r||void 0===r?void 0:r.ratingSum,p=null===r||void 0===r?void 0:r.ratingNumber,0===p?"0.00":(f/p).toFixed(2))}),(0,Ii.jsx)(ZR,{rating:(null===r||void 0===r?void 0:r.ratingSum)/(null===r||void 0===r?void 0:r.ratingNumber)})]}),(0,Ii.jsx)(kP,{children:null===r||void 0===r?void 0:r.keywords.sort(((e,t)=>t.count-e.count)).slice(0,3).map((e=>(0,Ii.jsx)(BR,{fontsize:"10px",icon:"./feedback".concat(d(e.keyword).firstIndex,"-").concat(d(e.keyword).secondIndex,".png"),title:e.keyword})))})]}),(0,Ii.jsx)(co,{filter:o,setFilter:s}),(0,Ii.jsx)(qo,{ReviewList:c}),(0,Ii.jsxs)(IP,{children:[(0,Ii.jsx)(CP,{onClick:()=>h("/reviewList"),color:"#5C67DC",backgroundcolor:"transparent",title:"\ub354 \ub9ce\uc740 Review \ubcf4\uae30  \u2192"}),(0,Ii.jsx)(AP,{id:null===r||void 0===r?void 0:r.id,onClick:()=>h("/CreateReview/"+n),color:"#fff",backgroundcolor:"#5C67DC",title:"\ub9ac\ubdf0 \uc791\uc131\ud558\uae30",fontWeight:"600"})]}),(0,Ii.jsx)(Bi,{})]})]});var f,p};var NP,DP,OP,LP,MP,FP;const UP=Si.div(NP||(NP=o(["\n  display: flex;\n  justify-content: space-between;\n  color: #444;\n"]))),jP=Si.div(DP||(DP=o(["\n  display: flex;\n  align-items: center;\n"]))),zP=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"},child:[]}]})(e)}))(OP||(OP=o(["\n  width: 16px;\n  height: 16px;\n"]))),BP=Si.p(LP||(LP=o(["\n  font-size: 10px;\n"]))),VP=Si.button(MP||(MP=o(["\n  height: 100%;\n  padding: 5px 10px;\n  background-color: #f5f6f8;\n  border: none;\n  border-radius: 100px;\n"]))),qP=Si.p(FP||(FP=o(['\n  margin: 0;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 160%;\n  font-family: "pretendard";\n'])));const HP=function(e){let{rating:t,hashTag:n}=e;return(0,Ii.jsxs)(UP,{children:[(0,Ii.jsxs)(jP,{children:[(0,Ii.jsx)(zP,{}),(0,Ii.jsx)(BP,{children:t})]}),(0,Ii.jsx)(VP,{children:(0,Ii.jsxs)(qP,{children:["#",n]})})]})};function KP(e){return HA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 448l-30.164-27.211C118.718 322.442 48 258.61 48 179.095 48 114.221 97.918 64 162.4 64c36.399 0 70.717 16.742 93.6 43.947C278.882 80.742 313.199 64 349.6 64 414.082 64 464 114.221 464 179.095c0 79.516-70.719 143.348-177.836 241.694L256 448z"},child:[]}]})(e)}var GP,WP,QP,YP,JP,XP,$P,ZP,eN;const tN=Si.div(GP||(GP=o(["\n  margin-top: 8px;\n  width: 126px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #999;\n  font-size: 10px;\n  line-height: 140%;\n"]))),nN=Si.p(WP||(WP=o(["\n  margin: 0;\n"]))),rN=Si.div(QP||(QP=o(["\n  display: flex;\n  justify-content: space-between;\n"]))),iN=Si.div(YP||(YP=o(["\n  display: flex;\n  align-items: center;\n"]))),oN=Si(KP)(JP||(JP=o(["\n  width: 12px;\n  height: 12px;\n  color: #d9d9d9;\n"]))),sN=Si.p(XP||(XP=o(["\n  margin: 0 0 0 4px;\n"]))),aN=Si.div($P||($P=o(["\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n"]))),lN=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 2H4c-1.103 0-2 .897-2 2v18l4-4h14c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2z"},child:[]}]})(e)}))(ZP||(ZP=o(["\n  width: 12px;\n  height: 12px;\n  color: #d9d9d9;\n"]))),cN=Si.p(eN||(eN=o(["\n  margin: 0 0 0 4px;\n"])));const uN=function(e){let{heart:t,commentNumber:n}=e;return(0,Ii.jsxs)(tN,{children:[(0,Ii.jsx)(nN,{children:"2024.05.26"}),(0,Ii.jsxs)(rN,{children:[(0,Ii.jsxs)(iN,{children:[(0,Ii.jsx)(oN,{}),(0,Ii.jsx)(sN,{children:t})]}),(0,Ii.jsxs)(aN,{children:[(0,Ii.jsx)(lN,{}),(0,Ii.jsx)(cN,{children:n})]})]})]})};var hN,dN,fN;const pN=Si.div(hN||(hN=o(["\n    margin-top: 12px;\n    display: flex;\n    align-items: center;\n    color: #444;\n"]))),gN=Si.img(dN||(dN=o(["\n    width: 28px;\n    height: 28px;\n    border-radius: 50%;\n"]))),mN=Si.p(fN||(fN=o(["\n    margin: 10px;\n    font-size: 12px;\n    font-weight: 600;\n"])));const vN=function(e){return(0,Ii.jsxs)(pN,{children:[(0,Ii.jsx)(gN,{src:"/Siheung_TalkTalk/UserImg.png"}),(0,Ii.jsx)(mN,{children:"\ud589\ubcf5\ud55c \ucc28\ub178\uc744"})]})};var yN,wN,bN,_N;const xN=Si.div(yN||(yN=o(["\n  position: relative;\n  margin-top: 24px;\n  width: 334px;\n  height: 334px;\n"]))),EN=Si.img(wN||(wN=o(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 16px;\n"])));Si.div(bN||(bN=o(["\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 40px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 44%);\n  border-radius: 50px;\n  z-index: 999;\n"]))),Si.p(_N||(_N=o(["\n  margin: 0;\n  color: #fff;\n  line-height: 120%;\n  font-size: 12px;\n"])));const SN=function(e){let{img:t}=e;return(0,Ii.jsx)(xN,{children:(0,Ii.jsx)(EN,{src:t})})};var TN,kN,IN,CN,AN,RN,PN;const NN=Si.div(TN||(TN=o(["\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 100%;\n    max-width: 334px;\n    height: 92px;\n    background-color: #F5F6F8;\n    border-radius: 16px;\n"]))),DN=Si.div(kN||(kN=o(["\n    margin: 0 0 0 16px;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n"]))),ON=Si.div(IN||(IN=o(["\n    border-radius: 50px;\n    background-color: #EEE;\n    font-weight: 500;\n    padding: 6px 15px;\n\n    & > * {\n        margin: 0;\n    }\n"]))),LN=Si.p(CN||(CN=o(["\n    margin: 0 0 0 16px;\n    font-weight: 300;\n"]))),MN=Si.div(AN||(AN=o(["\n    margin: 8px 0 0 16px;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n"]))),FN=Si.div(RN||(RN=o(["\n    border-radius: 50px;\n    background-color: #EEE;\n    font-weight: 500;\n    padding: 6px 15px;\n\n    & > * {\n        margin: 0;\n    }\n"]))),UN=Si.p(PN||(PN=o(["\n    margin: 0 0 0 16px;\n    font-weight: 300;\n"])));const jN=function(e){return(0,Ii.jsxs)(NN,{children:[(0,Ii.jsxs)(DN,{children:[(0,Ii.jsx)(ON,{children:(0,Ii.jsx)("p",{children:"\ucd95\uc81c"})}),(0,Ii.jsx)(LN,{children:"\uc81c7\ud68c \uc2dc\ud765\uc5fc\uc804\uc18c\uae08\uc81c"})]}),(0,Ii.jsxs)(MN,{children:[(0,Ii.jsx)(FN,{children:(0,Ii.jsx)("p",{children:"\ubc29\ubb38\uc77c\uc790"})}),(0,Ii.jsx)(UN,{children:"2024.05.26"})]})]})};var zN,BN,VN,qN,HN,KN,GN;const WN=Si.div(zN||(zN=o(["\n  width: 172px;\n  margin: 28px auto 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),QN=Si.div(BN||(BN=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 68px;\n  height: 68px;\n  border-radius: 50%;\n  color: #fff;\n  background-color: ",";\n"])),(e=>e.selected?"#7883F4":"#CDCDCD")),YN=Si(KP)(VN||(VN=o(["\n  width: 20px;\n  height: 20px;\n"]))),JN=Si.p(qN||(qN=o(["\n  margin: 4px 0 0 0;\n  font-size: 12px;\n  font-weight: 400;\n"]))),XN=Si.div(HN||(HN=o(["\n  margin: 15px 0 0 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),$N=Si.p(KN||(KN=o(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n"]))),ZN=Si.p(GN||(GN=o(["\n  margin: 4px 0 0 0;\n  font-size: 12px;\n  font-weight: 300;\n"])));const eD=function(e){let{selected:t,onLikeClick:n,count:r}=e;return(0,Ii.jsxs)(WN,{children:[(0,Ii.jsxs)(QN,{onClick:n,selected:t,children:[(0,Ii.jsx)(YN,{}),(0,Ii.jsx)(JN,{children:"\uc88b\uc544\uc694"})]}),(0,Ii.jsxs)(XN,{children:[(0,Ii.jsx)($N,{children:"\uc774 \ud6c4\uae30\uac00 \ub3c4\uc6c0\uc774 \ub418\uc168\ub098\uc694?"}),(0,Ii.jsxs)(ZN,{children:[r,"\uba85\uc774 \uacf5\uac10\ud588\uc5b4\uc694"]})]})]})};var tD,nD,rD,iD,oD,sD,aD,lD,cD,uD,hD,dD;const fD=Si.div(tD||(tD=o(["\n  display: inline-block;\n  width: 100%;\n  border-bottom: 0.5px solid #f2f4f6;\n"]))),pD=Si.div(nD||(nD=o(["\n  margin: 16px 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),gD=Si.div(rD||(rD=o(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),mD=Si.img(iD||(iD=o(["\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n"]))),vD=Si.div(oD||(oD=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  justify-content: flex-start;\n  margin: 0 0 0 10px;\n"]))),yD=Si.div(sD||(sD=o(["\n  display: flex;\n  font-size: 12px;\n  font-weight: 300;\n  color: #999;\n"]))),wD=Si.p(aD||(aD=o(["\n  margin: 0;\n"]))),bD=Si.p(lD||(lD=o(["\n  margin: 0;\n"]))),_D=Si.p(cD||(cD=o(["\n  margin: 7px 0 0 0;\n  font-size: 14px;\n  font-weight: 500;\n  color: #666;\n"]))),xD=Si.div(uD||(uD=o(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),ED=Si(KP)(hD||(hD=o(["\n  width: 16px;\n  height: 16px;\n  color: ",";\n"])),(e=>e.selected?"#7883F4":"#CDCDCD")),SD=Si.p(dD||(dD=o(["\n  margin: 0 0 0 4px;\n  font-size: 12px;\n  color: #999;\n"])));const TD=function(e){let{comment:t,selected:n,onLikeClick:r}=e;return(0,Ii.jsx)(fD,{children:(0,Ii.jsxs)(pD,{children:[(0,Ii.jsxs)(gD,{children:[(0,Ii.jsx)(mD,{src:"/Siheung_TalkTalk/CommentUserImg.png"}),(0,Ii.jsxs)(vD,{children:[(0,Ii.jsxs)(yD,{children:[(0,Ii.jsx)(wD,{children:"\ud3b8\uc548\ud55c \ub3c4\ub871\uc774"}),(0,Ii.jsx)(bD,{children:" \xb7 3\uc77c \uc804"})]}),(0,Ii.jsx)(_D,{children:t.content})]})]}),(0,Ii.jsxs)(xD,{children:[(0,Ii.jsx)(ED,{onClick:r,selected:n}),(0,Ii.jsx)(SD,{children:"6"})]})]})})};var kD,ID;const CD=Si.div(kD||(kD=o(["\n  margin: 4px 0;\n"]))),AD=Si(TD)(ID||(ID=o(["\n  &:last-child "," {\n    border-bottom: none;\n  }\n"])),TD.WrappedComponent);const RD=function(e){const{comments:n}=e,[r,i]=(0,t.useState)([]);return(0,Ii.jsx)(CD,{children:n.map(((e,t)=>(0,Ii.jsx)(AD,{comment:e,selected:r.includes(e.id),onLikeClick:()=>{return t=e.id,void i((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}},e.id)))})};var PD,ND,DD,OD;const LD=Si.button(PD||(PD=o(["\n  width: 100%;\n  background-color: #f2f3fc;\n  color: #5c67dc;\n  border: none;\n  border-radius: 50px;\n"]))),MD=Si.div(ND||(ND=o(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 11px 0;\n"]))),FD=Si.p(DD||(DD=o(["\n  margin: 0;\n  font-size: 12px;\n  font-weight: 500;\n"]))),UD=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"},child:[]}]})(e)}))(OD||(OD=o(["\n  width: 18px;\n  height: 18px;\n"])));const jD=function(e){let{number:t,onClick:n}=e;return(0,Ii.jsx)(LD,{onClick:n,children:(0,Ii.jsxs)(MD,{children:[(0,Ii.jsxs)(FD,{children:[t-3,"\uac1c\uc758 \ub313\uae00 \ub354\ubcf4\uae30"]}),(0,Ii.jsx)(UD,{})]})})};var zD;const BD=Si.textarea(zD||(zD=o(['\n  margin: 0;\n  padding: 16px 26px;\n  width: 208px;\n  font-size: 12px;\n  border: 1px solid #d9d9d9;\n  border-radius: 16px;\n  resize: none;\n  font-family: "Pretendard";\n  overflow: hidden;\n  line-height: 120%;\n\n  &::placeholder {\n    color: #999;\n  }\n\n  &:focus {\n    outline: none;\n  }\n'])));const VD=function(e){let{comment:t,setComment:n}=e;return(0,Ii.jsx)(BD,{value:t,placeholder:"\ub313\uae00\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694.",onChange:e=>n(e.target.value)})};var qD,HD;const KD=Si.button(qD||(qD=o(["\n  width: 66px;\n  background-color: #5c67dc;\n  color: #fff;\n  border: none;\n  border-radius: 16px;\n"]))),GD=Si.p(HD||(HD=o(["\n  margin: 0;\n  font-size: 12px;\n  font-weight: 700;\n  padding: 15px auto;\n"])));const WD=function(e){let{onClick:t}=e;return(0,Ii.jsx)(KD,{onClick:t,children:(0,Ii.jsx)(GD,{children:"\ub4f1\ub85d"})})};var QD,YD,JD,XD,$D,ZD,eO,tO,nO,rO,iO,oO,sO,aO,lO,cO;const uO=Si.div(QD||(QD=o(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),hO=Si.div(YD||(YD=o(["\n  width: 390px;\n  background-color: #fff;\n  border-radius: 16px 16px 0 0;\n  position: absolute;\n  top: 265px;\n"]))),dO=Si.hr(JD||(JD=o(["\n  width: 100%;\n  height: 12px;\n  border: 0;\n  background-color: #f2f4f6;\n"]))),fO=Si.img(XD||(XD=o(["\n  width: 390px;\n  height: 360px;\n  position: fixed;\n  top: 0;\n  text-align: center;\n  object-fit: cover;\n  filter: brightness(60%);\n  z-index: 0;\n  background-color: #222;\n"]))),pO=Si.div($D||($D=o(["\n  padding: 28px;\n"]))),gO=Si.div(ZD||(ZD=o(["\n  width: 100%;\n  margin: 16px 0 0 0;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0 4px;\n"]))),mO=Si.p(eO||(eO=o(["\n  margin: 0;\n  font-size: 24px;\n  line-height: 140%;\n  font-weight: 700;\n  width: 100%;\n"]))),vO=Si.p(tO||(tO=o(["\n  margin-top: 28px;\n  width: 334px;\n  font-size: 16px;\n  font-weight: 300;\n  line-height: 160%;\n  text-align: justify;\n"]))),yO=Si.div(nO||(nO=o(["\n  padding: 28px;\n"]))),wO=Si.p(rO||(rO=o(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n"]))),bO=Si.p(iO||(iO=o(["\n  margin-top: 8px;\n  width: 334px;\n  font-size: 16px;\n  font-weight: 300;\n  line-height: 160%;\n  text-align: justify;\n"]))),_O=Si.div(oO||(oO=o(["\n  padding: 28px 28px 20px 28px;\n"]))),xO=Si.p(sO||(sO=o(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n"]))),EO=Si.div(aO||(aO=o(["\n  margin: 16px 0 0 0;\n  display: flex;\n  justify-content: space-between;\n  height: 44px;\n"]))),SO=Si.div(lO||(lO=o(["\n  padding: 28px;\n  margin-bottom: 60px;\n"]))),TO=Si.p(cO||(cO=o(["\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n"]))),kO=["\uc2e0\ub098\ub294 \ubd84\uc704\uae30\uc5d0\uc694","\uc794\uc794\ud55c \ubd84\uc704\uae30\uc5d0\uc694","\uc0ac\uc9c4\uc774 \uc798\ub098\uc640\uc694","\uc9c8\uc11c\uc815\uc5f0\ud574\uc694","\uc9c8\uc11c\uac00 \uc548\uc9c0\ucf1c\uc838\uc694","\uc5ec\uc720\ub85c\uc6cc\uc694","\uccb4\ud5d8\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc694","\ub2e4\uc591\ud55c \uccb4\ud5d8\uc774 \uc788\uc5b4\uc694","\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694","\ud654\uc7a5\uc2e4\uc774 \uae68\ub057\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \uae54\ub054\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \ubd88\ud3b8\ud574\uc694"];const IO=function(e){var n,r;const{id:i}=nt(),[o,s]=(0,t.useState)({id:0,title:"",review:"",feedback:"",comments:[]});(0,t.useEffect)((()=>{tC.collection("post").doc(i).get().then((e=>{const t=e.data();console.log(t),s({...t,comments:Array.isArray(t.comments)?t.comments:[]})}))}),[i]);const[a,l]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{const e=(await tC.collection("post").where("festivalId","==",o.festivalId).get()).docs.map((e=>({id:e.id,...e.data()})));l(e.slice(0,3))}catch(e){console.error("Error fetching posts: ",e)}})()}),[o]);const[c,u]=(0,t.useState)(!1),h=()=>{b(),u((e=>!e))},[d,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(""),[m,v]=(0,t.useState)(!1),y=e=>{const t=kO.indexOf(e);if(-1===t)return"\ud0a4\uc6cc\ub4dc\uac00 \ubaa9\ub85d\uc5d0 \uc5c6\uc2b5\ub2c8\ub2e4.";const n=t,r=Math.floor(n/3)+1,i=n%3+1;return console.log(r,i),{firstIndex:r,secondIndex:i}},w=[...o.comments].sort(((e,t)=>t.createdAt-e.createdAt)),b=async()=>{try{await tC.collection("post").doc(i).update({likeNumber:o.likeNumber+1})}catch(e){}};return(0,Ii.jsxs)(uO,{children:[(0,Ii.jsx)(xA,{color:"#fff",backgroundcolor:"transparent",boxshadow:"0px 0px 12px 0px rgba(0, 0, 0, 0.10)",righticonopacity:"1",title:"",selected:d,onLikeClick:()=>{f(!d)}}),(0,Ii.jsx)(fO,{src:"/Siheung_TalkTalk/FestivalImg.png"}),(0,Ii.jsxs)(hO,{children:[(0,Ii.jsxs)(pO,{children:[(0,Ii.jsx)(HP,{rating:null===o||void 0===o?void 0:o.rating,hashTag:null===o||void 0===o?void 0:o.hashTag}),(0,Ii.jsx)(mO,{children:null===o||void 0===o?void 0:o.title}),(0,Ii.jsx)(uN,{heart:null===o||void 0===o?void 0:o.likeNumber,commentNumber:(null===(n=o.comments)||void 0===n?void 0:n.length)||0}),(0,Ii.jsx)(vN,{}),o.image&&(0,Ii.jsx)(SN,{img:o.image}),(0,Ii.jsx)(jN,{}),(0,Ii.jsx)(vO,{children:null===o||void 0===o?void 0:o.review})]}),(0,Ii.jsx)(dO,{}),(0,Ii.jsxs)(yO,{children:[(0,Ii.jsx)(wO,{children:"\ud53c\ub4dc\ubc31"}),(0,Ii.jsx)(bO,{children:null===o||void 0===o?void 0:o.feedback}),(0,Ii.jsx)(gO,{children:null===(r=o.keyWord)||void 0===r?void 0:r.map(((e,t)=>(0,Ii.jsx)(BR,{fontsize:"12px",icon:"./feedback".concat(y(e).firstIndex,"-").concat(y(e).secondIndex,".png"),title:e},t)))}),(0,Ii.jsx)(eD,{count:null===o||void 0===o?void 0:o.likeNumber,onLikeClick:h,selected:c})]}),(0,Ii.jsx)(dO,{}),(0,Ii.jsxs)(_O,{children:[(0,Ii.jsx)(xO,{children:"\ub313\uae00"}),null!==o&&void 0!==o&&o.comments&&0===(null===o||void 0===o?void 0:o.comments.length)?"":(0,Ii.jsxs)(Ii.Fragment,{children:[(0,Ii.jsx)(RD,{comments:m?w:(w||[]).slice(0,3),onLikeClick:h,selected:c}),(null===o||void 0===o?void 0:o.comments)&&(null===o||void 0===o?void 0:o.comments.length)>3&&!m&&(0,Ii.jsx)(jD,{onClick:()=>v(!0),number:null===o||void 0===o?void 0:o.comments.length})]}),(0,Ii.jsxs)(EO,{children:[(0,Ii.jsx)(VD,{comment:p,setComment:g}),(0,Ii.jsx)(WD,{onClick:()=>{if(p.trim()){const e=(new Date).getTime().toString(),t={id:i+"_"+e,content:p,createdAt:e},n=[...o.comments||[],t];tC.collection("post").doc(i).update({comments:n}).then((()=>{s((e=>({...e,comments:n}))),g("")})).catch((e=>{console.error("Error adding comment: ",e)}))}}})]})]}),(0,Ii.jsx)(dO,{}),(0,Ii.jsxs)(SO,{children:[(0,Ii.jsx)(TO,{children:"\uc774 \ucd95\uc81c\uc758 \ub2e4\ub978 Review"}),(0,Ii.jsx)(qo,{ReviewList:a})]}),(0,Ii.jsx)(Bi,{})]})]})};var CO,AO,RO,PO,NO,DO;const OO=Si.div(CO||(CO=o(["\n  width: 100%;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),LO=Si(OO)(AO||(AO=o(["\n  /* height: 112px; */\n  margin-bottom: 12px;\n"]))),MO=Si.div(RO||(RO=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n"]))),FO=Si.div(PO||(PO=o(["\n  font-size: 16px;\n  color: #222222;\n  font-weight: bold;\n  margin-bottom: 16px;\n"]))),UO=Si.div(NO||(NO=o(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),jO=Si.img(DO||(DO=o(["\n  margin: -4px;\n  width: 44px;\n"])));function zO(e){let{handleRating:n}=e;const[r,i]=(0,t.useState)(0),[o,s]=(0,t.useState)(0),[a,l]=(0,t.useState)(!1),c=e=>{s(0),l(!1)},u=e=>a?e>=o?HR:qR:e>=r?HR:qR;return(0,Ii.jsx)(LO,{children:(0,Ii.jsxs)(MO,{children:[(0,Ii.jsxs)(FO,{children:["\ud3c9\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",a]}),(0,Ii.jsx)(UO,{children:[...Array(5)].map(((e,t)=>(0,Ii.jsx)(jO,{onClick:()=>(e=>{i(e+1),n(e+1)})(t),src:u(t),onMouseOver:()=>(e=>{s(e+1),l(!0)})(t),onMouseLeave:c},t)))})]})})}var BO,VO,qO,HO;const KO=Si.div(BO||(BO=o(["\n  width: 100%;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n"]))),GO=Si(KO)(VO||(VO=o(["\n  /* height: 156px; */\n  padding: 20px 28px;\n  font-size: 16px;\n  color: #222222;\n  font-weight: 700;\n"]))),WO=Si.div(qO||(qO=o(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 16px 0px 4px 0px;\n  gap: 8px;\n"]))),QO=Si.div(HO||(HO=o(["\n  padding: 10px 16px;\n  /* margin: 4px 4px; */\n  background-color: ",";\n  border-radius: 50px;\n  box-sizing: border-box;\n  color: ",";\n  border: ",";\n  font-size: 16px;\n  cursor: pointer;\n  font-weight: 400;\n"])),(e=>e.selected?"#5c67dc":"white"),(e=>e.selected?"white":"#cccccc"),(e=>e.selected?"1px solid #5c67dc":"1px solid #cccccc"));function YO(e){let{choiceKeyword:t,handleChoiceKeyword:n}=e;return(0,Ii.jsxs)(GO,{children:["\uc774 \ucd95\uc81c\uc5d0 \uc5b4\uc6b8\ub9ac\ub294 \ud0a4\uc6cc\ub4dc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694",(0,Ii.jsx)(WO,{children:["\uac00\uc871\uacfc \ud568\uaed8","\uce5c\uad6c\uc640 \ud568\uaed8","\ud65c\uae30\ucc2c","\ucc28\ubd84\ud55c","\ub2e4\ucc44\ub85c\uc6b4"].map(((e,r)=>(0,Ii.jsxs)(QO,{selected:t===r,onClick:()=>n(r),children:["#",e]},r)))})]})}var JO,XO,$O,ZO,eL,tL,nL,rL,iL;const oL=Si.div(JO||(JO=o(["\n  width: 100%;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n"]))),sL=Si(oL)(XO||(XO=o(["\n  /* height: 368px; */\n  padding: 20px 28px 0px 28px;\n  font-size: 16px;\n  gap: 22px;\n"]))),aL=Si.div($O||($O=o(["\n  display: flex;\n  flex-direction: column;\n  font-size: 16px;\n  font-weight: 700;\n  color: #222;\n  /* margin: 12px 0px; */\n"]))),lL=Si.div(ZO||(ZO=o(["\n  margin-top: 8px;\n  font-size: 12px;\n  font-weight: 400;\n  color: #444444;\n"]))),cL=Si.div(eL||(eL=o(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  width: 100%;\n  /* margin: 12px 0px; */\n"]))),uL=Si.div(tL||(tL=o(["\n  > * {\n    margin-bottom: 9px;\n  }\n  padding-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n"]))),hL=Si.div(nL||(nL=o(["\n  font-size: 12px;\n  font-weight: 700;\n  color: #222;\n"]))),dL=Si.div(rL||(rL=o(["\n  background-color: ",";\n  font-size: 12px;\n  padding: 4px 8px;\n  font-weight: 400;\n  line-height: 18px;\n  cursor: pointer;\n  border-radius: 4px;\n  width: auto;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 4px;\n"])),(e=>e.selected?"#7883F4":"#f5f6f8"),(e=>e.selected?"#fff":"#444")),fL=Si.img(iL||(iL=o(["\n  width: 18px;\n  height: 18px;\n"])));function pL(e){let{selectedKeywords:t=[],setSelectedKeywords:n}=e;return(0,Ii.jsxs)(sL,{children:[(0,Ii.jsxs)(aL,{children:["\ucd95\uc81c\ub294 \uc5b4\ub5a0\uc168\ub098\uc694?(1\uac1c~5\uac1c)",(0,Ii.jsx)(lL,{children:"\ucd95\uc81c\uc5d0\uc11c \ub290\uaf08\ub358 \uc0dd\uac01\uc744 \uace8\ub77c\uc8fc\uc138\uc694"})]}),(0,Ii.jsx)(cL,{children:[{kind:"\ubd84\uc704\uae30",keywords:["\uc2e0\ub098\ub294 \ubd84\uc704\uae30\uc5d0\uc694","\uc794\uc794\ud55c \ubd84\uc704\uae30\uc5d0\uc694","\uc0ac\uc9c4\uc774 \uc798\ub098\uc640\uc694"],emoticon:["./feedback1-1.png","./feedback1-2.png","./feedback1-3.png"]},{kind:"\uc9c8\uc11c",keywords:["\uc9c8\uc11c\uc815\uc5f0\ud574\uc694","\uc9c8\uc11c\uac00 \uc548\uc9c0\ucf1c\uc838\uc694","\uc5ec\uc720\ub85c\uc6cc\uc694"],emoticon:["./feedback2-1.png","./feedback2-2.png","./feedback2-3.png"]},{kind:"\uccb4\ud5d8",keywords:["\uccb4\ud5d8\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc694","\ub2e4\uc591\ud55c \uccb4\ud5d8\uc774 \uc788\uc5b4\uc694","\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694"],emoticon:["./feedback3-1.png","./feedback3-2.png","./feedback3-3.png"]},{kind:"\ud3b8\uc758\uc2dc\uc124",keywords:["\ud654\uc7a5\uc2e4\uc774 \uae68\ub057\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \uae54\ub054\ud574\uc694","\ud3b8\uc758\uc2dc\uc124\uc774 \ubd88\ud3b8\ud574\uc694"],emoticon:["./feedback4-1.png","./feedback4-2.png","./feedback4-3.png"]}].map((e=>(0,Ii.jsxs)(uL,{children:[(0,Ii.jsx)(hL,{children:e.kind}),e.keywords.map(((r,i)=>(0,Ii.jsxs)(dL,{selected:t.includes(r),onClick:()=>{return e=r,void n((t=>t.includes(e)?t.filter((t=>t!==e)):t.length<5?[...t,e]:t));var e},children:[e.emoticon&&e.emoticon[i]&&(0,Ii.jsx)(fL,{src:"/Siheung_TalkTalk/feedback/"+e.emoticon[i],alt:"emoticon-".concat(i)}),r]},r)))]})))})]})}var gL,mL,vL,yL;const wL=Si.div(gL||(gL=o(["\n  width: 334px; //width \ubcf4\uae30 \uc88b\uac8c \uc218\uc815\n  padding: 18px 28px;\n  /* position: fixed;\n  top: 0; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 999;\n  color: ",";  /* \uc0c9\uc0c1 \uc124\uc815 */\n  box-shadow: ",";  /* \ubc15\uc2a4\uc100\ub3c4\uc6b0 \uc801\uc6a9 */\n   /* \ud544\uc694\uc2dc\uc5d0 \ubc15\uc2a4 \uc100\ub3c4\uc6b0 0px 0px 12px 0px rgba(0, 0, 0, 0.10) \uc801\uc6a9 */\n  background-color: ",";\n  /* \ucd95\uc81c\ub9ac\uc2a4\ud2b8, \ub9ac\ubdf0\ub9ac\uc2a4\ud2b8, \ub9ac\ubdf0\uc791\uc131 \ud398\uc774\uc9c0\uc5d0 #FCFCFC \uc801\uc6a9\uc2dc\ud0a4\uae30 */\n"])),(e=>e.color),(e=>e.boxshadow),(e=>e.backgroundcolor)),bL=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M752.145 0c8.685 0 17.572 3.434 24.237 10.099 13.33 13.33 13.33 35.143 0 48.473L320.126 515.03l449.591 449.591c13.33 13.33 13.33 35.144 0 48.474-13.33 13.33-35.142 13.33-48.472 0L247.418 539.268c-13.33-13.33-13.33-35.144 0-48.474L727.91 10.1C734.575 3.435 743.46.002 752.146.002z"},child:[]}]})(e)}))(mL||(mL=o(["\n  width: 24px;\n  height: 24px;\n  opacity: ","; /* \uc67c\ucabd \uc544\uc774\ucf58 opacity */\n"])),(e=>e.lefticonopacity)),_L=Si.p(vL||(vL=o(["\n  font-size: 20px;\n  font-weight: 600;\n  margin:0;\n"]))),xL=Si((function(e){return HA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352 48H160a48 48 0 0 0-48 48v368l144-128 144 128V96a48 48 0 0 0-48-48z"},child:[]}]})(e)}))(yL||(yL=o(["\n  width: 24px;\n  height: 24px;\n  opacity: ","; /* \uc624\ub978\ucabd \uc544\uc774\ucf58 opacity */\n"])),(e=>e.righticonopacity));const EL=function(e){const{title:t,color:n,lefticonopacity:r,righticonopacity:i,boxshadow:o,backgroundcolor:s}=e;return(0,Ii.jsxs)(wL,{color:n,boxshadow:o,backgroundcolor:s,children:[(0,Ii.jsx)(bL,{lefticonopacity:r}),(0,Ii.jsx)(_L,{children:t||null}),(0,Ii.jsx)(xL,{righticonopacity:i})]})};var SL,TL;const kL=Si.textarea(SL||(SL=o(["\n  // styled.\ub4a4\uc5d0 \uc624\ub294\uac83\uc740 html\ud0dc\uadf8\n  height: ",'px;\n  width: 334px;\n  font-size: 12px;\n  box-sizing: border-box;\n  padding: 15px 26px;\n  border-radius: 16px;\n  border: 1px solid #d9d9d9;\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  line-height: 14px;\n  color: #444444;\n  min-height: 44px;\n  font-family: "Pretendard";\n  resize: none;\n\n  &:focus {\n    border-color: #5c67dc;\n    /* border-color: ',"; \ud3ec\ucee4\uc2a4\ub97c \ubc1b\uc558\uc744 \ub54c\uc758 \ud14c\ub450\ub9ac \uc0c9\uc0c1 */\n    outline: none; /* \ud3ec\ucee4\uc2a4 \ud14c\ub450\ub9ac \uc81c\uac70 */\n  }\n\n  &::placeholder {\n    color: #999; /* \uc6d0\ud558\ub294 \uc0c9\uc0c1 \ucf54\ub4dc\ub85c \ubcc0\uacbd\ud558\uc138\uc694 */\n  }\n"])),(e=>e.height),(e=>e.focuscolor));Si.p(TL||(TL=o(["\n  font-size: 12px;\n  color: #adadad;\n  text-align: right;\n"])));const IL=function(e){const{height:t,value:n,onChange:r,placeholder:i,focuscolor:o}=e;return(0,Ii.jsx)(kL,{type:"text",placeholder:i,height:t,value:n,onChange:r})};var CL,AL,RL,PL,NL,DL,OL,LL,ML,FL,UL;const jL=Si.div(CL||(CL=o(["\n  height: 1560px;\n  display: flex;\n  flex-direction: column;\n  background-color: #f2f4f6;\n  vertical-align: baseline;\n  border: none;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  border: none;\n"]))),zL=Si.div(AL||(AL=o(["\n  width: 390px;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),BL=Si(zL)(RL||(RL=o(["\n  height: 120px;\n  margin-bottom: 12px;\n  display: flex;\n  align-items: center;\n  padding: 20px 0;\n  box-sizing: border-box;\n"]))),VL=Si.div(PL||(PL=o(["\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  /* height: 372px; */\n  margin-bottom: 12px;\n  gap: 16px;\n  align-items: center;\n  padding-bottom: 28px;\n"]))),qL=Si.label(NL||(NL=o(["\n  box-sizing: border-box;\n  width: 334px;\n  height: 54px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50px;\n  color: #d9d9d9;\n  background-color: #ffffff;\n  border: 1px solid #d9d9d9;\n  cursor: pointer;\n"]))),HL=Si.input(DL||(DL=o(["\n  display: none;\n"]))),KL=Si.div(OL||(OL=o(["\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  padding: 8px 28px 16px 24px;\n  gap: 16px;\n  color: #222;\n  font-size: 16px;\n  font-weight: 700;\n  box-sizing: border-box;\n  /* height: 278px; */\n\n  p {\n    color: #444;\n    font-size: 12px;\n    font-weight: 400;\n    margin-top: -8px;\n  }\n"]))),GL=Si.div(LL||(LL=o(["\n  display: flex;\n  width: 390px;\n"]))),WL=Si.img(ML||(ML=o(["\n  margin-left: 28px;\n  width: 80px;\n  height: 80px;\n  border-radius: 8px;\n  border: 1px solid #d9d9d9;\n  object-fit: cover;\n  text-align: center;\n"]))),QL=Si.div(FL||(FL=o(["\n  cursor: pointer;\n  width: 334px;\n  height: 54px;\n  background-color: #5c67dc;\n  border-radius: 50px;\n  margin: 0px 28px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  color: white;\n"]))),YL=Si(zL)(UL||(UL=o(["\n  padding-bottom: 80px;\n"])));function JL(){const e=et(),n=nt().id,[r,i]=(0,t.useState)(0),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(-1),[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)(null),[v,y]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const e=await tC.collection("festivals").doc(n).get();e.exists?y(e.data().festivalName):console.log("No such document!")}catch(e){console.error("Error fetching festival name: ",e)}})()}),[n]);const w=["\uac00\uc871\uacfc \ud568\uaed8","\uce5c\uad6c\uc640 \ud568\uaed8","\ud65c\uae30\ucc2c","\ucc28\ubd84\ud55c","\ub2e4\ucc44\ub85c\uc6b4"];return(0,Ii.jsxs)(jL,{children:[(0,Ii.jsx)(EL,{color:"#222",boxshadow:"0px 0px 12px 0px rgba(0, 0, 0, 0.10)",righticonopacity:"0",title:"\ub9ac\ubdf0 \uc791\uc131",backgroundcolor:"#FCFCFC"}),(0,Ii.jsx)(BL,{children:(0,Ii.jsx)(OR,{name:v})}),(0,Ii.jsx)(zO,{handleRating:i}),(0,Ii.jsx)(YO,{choiceKeyword:h,handleChoiceKeyword:d}),(0,Ii.jsxs)(VL,{children:[(0,Ii.jsx)(IL,{placeholder:"\uc81c\ubaa9\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",height:46,value:o,onChange:e=>s(e.target.value)}),(0,Ii.jsx)(IL,{placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",height:202,value:a,onChange:e=>l(e.target.value)}),(0,Ii.jsx)(GL,{children:g&&(0,Ii.jsx)(WL,{src:g,alt:"Preview"})}),(0,Ii.jsx)(qL,{htmlFor:"image-upload",children:"+ \uc0ac\uc9c4 \ucd94\uac00"}),(0,Ii.jsx)(HL,{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0],n=new FileReader;n.onloadend=()=>{const e=n.result;m(e)},n.readAsDataURL(t),m(URL.createObjectURL(t))}})]}),(0,Ii.jsx)(pL,{selectedKeywords:f,setSelectedKeywords:p}),(0,Ii.jsxs)(KL,{children:["\uc5b4\ub5a4\uc810\uc774 \uc544\uc26c\uc6e0\ub098\uc694?",(0,Ii.jsx)("p",{children:"\ucd95\uc81c\uc758 \ud3b8\uc758\uc2dc\uc124, \ubd84\uc704\uae30, \uc9c8\uc11c \ub4f1\uc740 \uad1c\ucc2e\uc558\ub098\uc694?"}),(0,Ii.jsx)(IL,{placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",height:202,value:c,onChange:e=>u(e.target.value)})]}),(0,Ii.jsx)(YL,{children:(0,Ii.jsx)(QL,{onClick:async()=>{let t=(new Date).getTime().toString();try{await tC.collection("post").doc(t).set({id:t,likeNumber:0,title:o,visitedAt:t,review:a,festivalId:n,festival:v,comment:[],hashTag:-1===h?"\uac00\uc871\uacfc \ud568\uaed8":w[h],nickName:"\ud589\ubcf5\ud55c \uc720\uc800",keyWord:f,createdAt:t,rating:r,feedback:c,image:g});const i=await tC.collection("festivals").doc(n).get();if(i.exists){const o=i.data(),s=o.keywords,a=o.ratingSum,l=o.ratingNumber;f.forEach((e=>{const t=s.find((t=>t.keyword===e));t&&(t.count+=1)})),await tC.collection("festivals").doc(n).update({ratingNumber:l+1,ratingSum:a+r,keywords:s}).then((()=>e("/ReviewDetail/".concat(t)))),alert("\ub9ac\ubdf0\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else console.log("No such festival document!")}catch(i){console.error("Error posting review: ",i),alert("\ub9ac\ubdf0 \ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\ub9ac\ubdf0 \ub4f1\ub85d\ud558\uae30"})}),(0,Ii.jsx)(Bi,{})]})}var XL,$L;const ZL=Si.select(XL||(XL=o(["\n  padding: 10px 16px;\n  color: ",";\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 20px;\n  font-weight: 500;\n  display: inline-block;\n  width: auto; /* Set to auto to adjust based on content */\n  min-width: ","; /* Minimum width to avoid collapse */\n  white-space: nowrap; /* Prevents text wrapping */\n"])),(e=>"all"===e.value?"#fff":"#3945BD"),(e=>"all"===e.value?"#3945BD":"#fff"),(e=>e.bordercolor),(e=>e.width?e.width:"72px")),eM=Si.option($L||($L=o(["\n  padding: 10px 16px;\n  margin: 10px 16px;\n"])));const tM=function(e){let{selectedValue:n,setSelectedValue:r,options:i,borderColor:o}=e;const[s,a]=(0,t.useState)(0),l=(0,t.useRef)(null);return(0,t.useEffect)((()=>{l.current&&a(l.current.scrollWidth)}),[n,i]),(0,Ii.jsx)(ZL,{ref:l,value:n,onChange:e=>{r(e.target.value)},bordercolor:"all"===n?"#3945BD":o,width:s,children:null===i||void 0===i?void 0:i.map((e=>(0,Ii.jsx)(eM,{value:e.value,children:e.name},e.value)))})};var nM,rM,iM,oM,sM,aM;const lM=Si.div(nM||(nM=o(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),cM=Si.div(rM||(rM=o(["\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  margin: 0 0 12px 28px;\n"]))),uM=Si.div(iM||(iM=o(["\n  margin: 20px 0 0 0;\n  width: 390px;\n  background-color: #fff;\n  border-radius: 16px 16px 0 0;\n"]))),hM=Si.div(oM||(oM=o(["\n  margin: 4px 0 100px 0;\n  width: 100%;\n  gap: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),dM=Si(Qo)(sM||(sM=o([""]))),fM=Si(Qo)(aM||(aM=o([""])));const pM=function(e){const n=et(),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)("all"),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)(""),[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{const e=(await kT(oS(tC,"post"))).docs.map((e=>({id:e.id,...e.data()})));i(e),y(e.slice(0,5))})(),(async()=>{const e=(await kT(oS(tC,"festivals"))).docs.map((e=>({id:e.id,...e.data()})));console.log(e),s(e)})()}),[]),(0,t.useEffect)((()=>{if("all"===a)d(""),p(r),y(r.slice(0,5));else{const e=o.filter((e=>e.season===a));if(u(e),""===h){const t=r.filter((t=>e.some((e=>e.id===t.festivalId))));p(t),y(t.slice(0,5))}else{const e=r.filter((e=>e.festivalId===h));p(e),y(e.slice(0,5))}}m("")}),[a,h,o,r]),(0,t.useEffect)((()=>{y(""===g?f.slice(0,5):f.filter((e=>e.hashTag===g)).slice(0,5))}),[g,f]),(0,Ii.jsxs)(lM,{children:[(0,Ii.jsx)(xA,{color:"#222",backgroundcolor:"",boxshadow:"0px 0px 12px 0px rgba(0, 0, 0, 0.10)",righticonopacity:"0",title:"\ub9ac\ubdf0"}),(0,Ii.jsxs)(uM,{children:[(0,Ii.jsxs)(cM,{children:[(0,Ii.jsx)(tM,{options:[{value:"all",name:"\uc804\uccb4"},{value:"spring",name:"\ubd04"},{value:"summer",name:"\uc5ec\ub984"},{value:"fall",name:"\uac00\uc744"},{value:"winter",name:"\uaca8\uc6b8"}],selectedValue:a,setSelectedValue:l,borderColor:"#3945BD"}),"all"!==a&&(0,Ii.jsx)(tM,{options:[{value:"",name:"\uc804\uccb4"},...c.map((e=>({value:e.id,name:e.festivalName})))],selectedValue:h,setSelectedValue:d,borderColor:"#3945BD"})]}),(0,Ii.jsx)(co,{filter:g,setFilter:m}),(0,Ii.jsx)(qo,{ReviewList:v}),(0,Ii.jsxs)(hM,{children:[(0,Ii.jsx)(dM,{color:"#5C67DC",backgroundcolor:"transparent",title:"\ub354\ubcf4\uae30"}),(0,Ii.jsx)(fM,{color:"#fff",backgroundcolor:"#5C67DC",title:"\ub9ac\ubdf0 \uc791\uc131\ud558\uae30",fontWeight:"600",onClick:()=>{n("/CreateReview")}})]}),(0,Ii.jsx)(Bi,{})]})]})};var gM,mM,vM,yM;const wM=Si.div(gM||(gM=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),bM=Si.form(mM||(mM=o(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n"]))),_M=Si.input(vM||(vM=o(["\n  margin-bottom: 10px;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n"]))),xM=Si.button(yM||(yM=o(["\n  padding: 10px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #0056b3;\n  }\n"]))),EM=()=>{const[e,n]=(0,t.useState)({content:"",date:"",festivalName:"",imgUrl:"",keywords:[{count:0,keyword:"\uc2e0\ub098\ub294 \ubd84\uc704\uae30\uc5d0\uc694"},{count:0,keyword:"\uc794\uc794\ud55c \ubd84\uc704\uae30\uc5d0\uc694"},{count:0,keyword:"\uc0ac\uc9c4\uc774 \uc798\ub098\uc640\uc694"},{count:0,keyword:"\uc9c8\uc11c\uc815\uc5f0\ud574\uc694"},{count:0,keyword:"\uc9c8\uc11c\uac00 \uc548\uc9c0\ucf1c\uc838\uc694"},{count:0,keyword:"\uc5ec\uc720\ub85c\uc6cc\uc694"},{count:0,keyword:"\uccb4\ud5d8\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc694"},{count:0,keyword:"\ub2e4\uc591\ud55c \uccb4\ud5d8\uc774 \uc788\uc5b4\uc694"},{count:0,keyword:"\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694"},{count:0,keyword:"\ud654\uc7a5\uc2e4\uc774 \uae68\ub057\ud574\uc694"},{count:0,keyword:"\ud3b8\uc758\uc2dc\uc124\uc774 \uae54\ub054\ud574\uc694"},{count:0,keyword:"\ud3b8\uc758\uc2dc\uc124\uc774 \ubd88\ud3b8\ud574\uc694"}],link:"",ratingNumber:0,ratingSum:0,season:"",title:"",view:0,location:"",backgroundUrl:""}),r=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r})))};return(0,Ii.jsxs)(wM,{children:[(0,Ii.jsx)("h1",{children:"Add Festival Data"}),(0,Ii.jsxs)(bM,{onSubmit:t=>{t.preventDefault();let r=(new Date).getTime().toString(),i=(new Date).toISOString().split("T")[0].replace(/-/g,".");tC.collection("festivals").doc(r).set({...e,date:i}).then((()=>{alert("Data added successfully!"),n({content:"",date:"",festivalName:"",imgUrl:"",keywords:[{count:0,keyword:"\uc2e0\ub098\ub294 \ubd84\uc704\uae30\uc5d0\uc694"},{count:0,keyword:"\uc794\uc794\ud55c \ubd84\uc704\uae30\uc5d0\uc694"},{count:0,keyword:"\uc0ac\uc9c4\uc774 \uc798\ub098\uc640\uc694"},{count:0,keyword:"\uc9c8\uc11c\uc815\uc5f0\ud574\uc694"},{count:0,keyword:"\uc9c8\uc11c\uac00 \uc548\uc9c0\ucf1c\uc838\uc694"},{count:0,keyword:"\uc5ec\uc720\ub85c\uc6cc\uc694"},{count:0,keyword:"\uccb4\ud5d8\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc694"},{count:0,keyword:"\ub2e4\uc591\ud55c \uccb4\ud5d8\uc774 \uc788\uc5b4\uc694"},{count:0,keyword:"\ubcfc\uac70\ub9ac\uac00 \ub9ce\uc544\uc694"},{count:0,keyword:"\ud654\uc7a5\uc2e4\uc774 \uae68\ub057\ud574\uc694"},{count:0,keyword:"\ud3b8\uc758\uc2dc\uc124\uc774 \uae54\ub054\ud574\uc694"},{count:0,keyword:"\ud3b8\uc758\uc2dc\uc124\uc774 \ubd88\ud3b8\ud574\uc694"}],link:"",ratingNumber:0,ratingSum:0,season:"",title:"",view:0,location:"",backgroundUrl:""})})).catch((e=>{console.error("Error adding document: ",e)}))},children:[(0,Ii.jsx)("textarea",{type:"text",name:"content",value:e.content,onChange:r,placeholder:"\uac8c\uc2dc\ubb3c \ub0b4\uc6a9"}),(0,Ii.jsx)(_M,{type:"text",name:"date",value:e.date,onChange:r,placeholder:"\ub0a0\uc9dc"}),(0,Ii.jsx)(_M,{type:"text",name:"festivalName",value:e.festivalName,onChange:r,placeholder:"\ucd95\uc81c \uc774\ub984"}),(0,Ii.jsx)(_M,{type:"text",name:"imgUrl",value:e.imgUrl,onChange:r,placeholder:"\uc774\ubbf8\uc9c0 URL"}),(0,Ii.jsx)(_M,{type:"text",name:"link",value:e.link,onChange:r,placeholder:"\ube14\ub85c\uadf8 \ub9c1\ud06c"}),(0,Ii.jsx)(_M,{type:"text",name:"season",value:e.season,onChange:r,placeholder:"\uacc4\uc808 \uc601\uc5b4\ub85c spring, summer, fall, winter"}),(0,Ii.jsx)(_M,{type:"text",name:"title",value:e.title,onChange:r,placeholder:"\uac8c\uc2dc\ubb3c \uc81c\ubaa9"}),(0,Ii.jsx)(_M,{type:"text",name:"location",value:e.location,onChange:r,placeholder:"\uc704\uce58"}),(0,Ii.jsx)(_M,{type:"text",name:"backgroundUrl",value:e.backgroundUrl,onChange:r,placeholder:"\ubc30\uacbd \uc774\ubbf8\uc9c0 URL"}),(0,Ii.jsx)(xM,{type:"submit",children:"Add Festival"})]})]})},SM=function(e,t){return ie({basename:null==t?void 0:t.basename,future:yt({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),v((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:g(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||wt(),routes:e,mapRouteProperties:vt,unstable_dataStrategy:null==t?void 0:t.unstable_dataStrategy,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",element:(0,Ii.jsx)(Ai,{}),children:[{path:"/",element:(0,Ii.jsx)(HC,{})},{path:"/FestivalList",element:(0,Ii.jsx)(IA,{})},{path:"/FestivalDetail/:id",element:(0,Ii.jsx)(PP,{})},{path:"/reviewList",element:(0,Ii.jsx)(pM,{})},{path:"/ReviewDetail/:id",element:(0,Ii.jsx)(IO,{})},{path:"/CreateReview/:id",element:(0,Ii.jsx)(JL,{})},{path:"/CreateReview/",element:(0,Ii.jsx)(JL,{})},{path:"/input",element:(0,Ii.jsx)(EM,{})}]}]);var TM;!function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=_i.apply(void 0,Dt([e],n,!1)),o="sc-global-".concat(ar(JSON.stringify(i))),s=new Ti(i,o),a=function(e){var n=oi(),r=t.useContext(mi),i=t.useRef(n.styleSheet.allocateGSInstance(o)).current;return n.styleSheet.server&&l(i,e,n.styleSheet,r,n.stylis),t.useLayoutEffect((function(){if(!n.styleSheet.server)return l(i,e,n.styleSheet,r,n.stylis),function(){return s.removeStyles(i,n.styleSheet)}}),[i,e,n.styleSheet,r,n.stylis]),null};function l(e,t,n,r,i){if(s.isStatic)s.renderStyles(e,Kn,n,i);else{var o=Pt(Pt({},t),{theme:Qn(t,r,a.defaultProps)});s.renderStyles(e,o,n,i)}}t.memo(a)}(TM||(TM=o(["\n  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400&display=swap');\n  html, body, div, span, applet, object, iframe,\n  h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n  a, abbr, acronym, address, big, cite, code,\n  del, dfn, em, img, ins, kbd, q, s, samp,\n  small, strike, strong, sub, sup, tt, var,\n  b, u, i, center,\n  dl, dt, dd, menu, ol, ul, li,\n  fieldset, form, label, legend,\n  table, caption, tbody, tfoot, thead, tr, th, td,\n  article, aside, canvas, details, embed,\n  figure, figcaption, footer, header, hgroup,\n  main, menu, nav, output, ruby, section, summary,\n  time, mark, audio, video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n    border: none;\n  }\n  /* HTML5 display-role reset for older browsers */\n  article, aside, details, figcaption, figure,\n  footer, header, hgroup, main, menu, nav, section {\n    display: block;\n  }\n  /* HTML5 hidden-attribute fix for newer browsers */\n  *[hidden] {\n      display: none;\n  }\n  body {\n    \n  }\n  menu, ol, ul {\n    list-style: none;\n  }\n  blockquote, q {\n    quotes: none;\n  }\n  blockquote:before, blockquote:after,\n  q:before, q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    font-family: 'Source Sans Pro', sans-serif, 'JalnanGothic';\n  }\n  a {\n    text-decoration:none;\n    color:inherit;\n  }\n  button {\n    \n  }\n  @font-face {\n    font-family: 'JalanGothic';\n    src: url('./assets/fonts/JalanGothic.otf') format('opentype'),\n         url('./assets/fonts/JalanGothicTTF.ttf') format('truetype');\n    font-weight: normal;\n    font-style: normal;\n  }\n"])));const kM=function(){return(0,Ii.jsx)(Ii.Fragment,{children:(0,Ii.jsx)(It,{router:SM})})},IM=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};i.createRoot(document.getElementById("root")).render((0,Ii.jsx)(kM,{})),IM()})()})();
//# sourceMappingURL=main.7594a647.js.map